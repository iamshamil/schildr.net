"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[22],{3632:function(e,t,r){r.r(t),r.d(t,{default:function(){return Et}});var n,i=r(4165),o=r(5861),a=r(885),s=r(2791),d=r(6015),l=r(4162),c=r(456),u=r(1356),f=r(1413),x=r(2982),h=r(7762),p=r(7689),m=r(7022),g=r(8029),Z=r(5985),b=r(1898),w=r(5702),j=r(3057),v=r(7205),y=r(4407),C=r(5017),S=r(3811),k=r(4565),I=r(1872),z=r(6132),_=r(2637),R=r(464),N=r(9365),T=r(8440),W=r(9978),B=r(5514),E=r(4346),A=r(2419),F=r(580),D=r(7247),O=r(2694),M=r(1131),H=r(7154),P=r(96),L=r(9544),U=r(1377),V=r(184),Q=function(e){var t=e.headerNames,r=e.setHeaderNames,n=(0,p.UO)().projectId,u=(0,s.useState)(0),Q=(0,a.Z)(u,2),X=Q[0],K=Q[1],G=(0,s.useState)(null),J=(0,a.Z)(G,2),Y=J[0],$=J[1],q=(0,s.useState)(null),ee=(0,a.Z)(q,2),te=ee[0],re=ee[1],ne=(0,s.useState)(""),ie=(0,a.Z)(ne,2),oe=ie[0],ae=ie[1],se=(0,s.useState)(10),de=(0,a.Z)(se,2),le=de[0],ce=de[1],ue=(0,s.useState)([]),fe=(0,a.Z)(ue,2),xe=fe[0],he=fe[1],pe=(0,s.useState)(""),me=(0,a.Z)(pe,2),ge=me[0],Ze=me[1],be=(0,s.useState)(!1),we=(0,a.Z)(be,2),je=we[0],ve=we[1],ye=Boolean(Y),Ce=Boolean(te),Se=(0,s.useState)([]),ke=(0,a.Z)(Se,2),Ie=ke[0],ze=ke[1],_e=(0,s.useState)(""),Re=(0,a.Z)(_e,2),Ne=Re[0],Te=Re[1],We=(0,H.Z)().user,Be=(0,P.Z)(),Ee=Be.changeHeader,Ae=Be.changeBody,Fe=Be.setHid,De=Be.selectEditabled,Oe=Be.isAdmin,Me=Be.users,He=Be.setUsers,Pe=function(e){$(null),re(null),ae("")},Le=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.YL)(xe[X]._id,We._id);case 2:(t=e.sent).status?Te(t.key):Z.Am.error("Link generation failed!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(t),Te(""),e.next=4,(0,c.$5)(r);case 4:if(!(n=e.sent).status){e.next=15;break}return Fe(r),De(""),e.next=10,(0,U.Jk)(We,r,We,n.header.row);case 10:o=e.sent,Ee(o),Ae(n.body),e.next=16;break;case 15:alert("Failed");case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(o){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}return Te(""),e.next=4,(0,c.ZW)({name:oe,pId:n});case 4:(a=e.sent).status?(he([].concat((0,x.Z)(xe),[a.data])),r([].concat((0,x.Z)(t),[a.data])),K(xe.length),Fe(a.data._id),De(""),Ee([]),Ae([])):alert("Faliled!"),Pe(),ae(""),e.next=11;break;case 10:Z.Am.error("Required Project Id");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xe[X],oe){e.next=3;break}return e.abrupt("return");case 3:if(oe!==t.name){e.next=6;break}return Pe(),e.abrupt("return");case 6:return e.next=8,(0,c.iM)(t._id,oe);case 8:(r=e.sent).status?xe[X].name=oe:alert(r.message),Pe();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xe[X],e.next=3,(0,c.Px)(t._id);case 3:(n=e.sent).status?(xe[X+1]?(xe.splice(X,1),Ue(X,xe[X]._id)):xe[X-1]?(xe.splice(X,1),Ue(X-1,xe[X-1]._id)):(r([]),he([])),Pe()):alert(n.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(e,t,r,n){if(n){if(!Oe)return;re(e.target)}else Ue(t,r)},Ge=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,s,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Me.findIndex((function(e){return e._id===t})),a=(0,x.Z)(Me),n?(s=a[o].myTable.findIndex((function(e){return e===r})),a[o].myTable.splice(s,1)):a[o].myTable.push(r),e.next=5,(0,c.Nq)({id:t,data:{myTable:a[o].myTable}});case 5:(d=e.sent).status?He(a):alert(d.message);case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Je=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ie.length){e.next=5;break}ce(null===(t=Ie[0])||void 0===t?void 0:t._id),ve(!0),e.next=9;break;case 5:return e.next=7,(0,c.mW)();case 7:(r=e.sent).status?1===r.data.length?Z.Am.info("There are no other projects"):(a=r.data.filter((function(e){return e._id!==n})),ze(a),ce(null===(o=a[0])||void 0===o?void 0:o._id),ve(!0)):Z.Am.error(r.message);case 9:re(null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=function(){ve(!1)},$e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xe[X],le&&t._id){e.next=4;break}return Z.Am.error("Invalid params"),e.abrupt("return");case 4:return e.next=6,(0,c.VJ)({projectId:le,tableId:t._id});case 6:(n=e.sent).status?(xe[X+1]?(xe.splice(X,1),Ue(X,xe[X]._id)):xe[X-1]?(xe.splice(X,1),Ue(X-1,xe[X-1]._id)):(r([]),he([])),Ye()):Z.Am.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){he(t)}),[t,he]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{bgcolor:"#0000001a",height:32,px:2,position:"relative"},children:(0,V.jsx)(d.Z,{sx:{width:"100%",position:"absolute",top:0,left:0,right:0,bottom:0,px:2},children:(0,V.jsx)(l.Z,{direction:"row",alignItems:"center",children:(0,V.jsx)(l.Z,{direction:"row",children:(0,V.jsxs)(l.Z,{direction:"row",sx:{height:32},children:[(0,V.jsx)(m.Z5,{onDragEnd:function(e){if(e.destination){var t=xe,n=e.source.index,i=e.destination.index,o=[];if(n<i){var a,s=(0,h.Z)(t);try{for(s.s();!(a=s.n()).done;){var d=a.value;d.order===n?d.order=i:d.order>n&&d.order<=i&&d.order--,o.push(d)}}catch(x){s.e(x)}finally{s.f()}}else{var l,u=(0,h.Z)(t);try{for(u.s();!(l=u.n()).done;){var f=l.value;f.order===n?f.order=i:f.order>=i&&f.order<n&&f.order++,o.push(f)}}catch(x){u.e(x)}finally{u.f()}}r(o),(0,c.S3)({startIndex:n,endIndex:i})}},children:(0,V.jsx)(m.bK,{droppableId:"tab-order",type:"tab-order",direction:"horizontal",children:function(e,t){return(0,V.jsxs)(l.Z,(0,f.Z)((0,f.Z)({direction:"row",sx:{flex:"one",zIndex:1,position:"relative"},ref:e.innerRef},e.droppableProps),{},{children:[xe.map((function(e,t){return(0,V.jsx)(m._l,{draggableId:e.name,index:t,DraggingStyle:{backgroundColor:"#000000"},children:function(r,n){return(0,s.createElement)(l.Z,(0,f.Z)((0,f.Z)((0,f.Z)({},r.draggableProps),r.dragHandleProps),{},{ref:r.innerRef,key:t,onClick:function(r){return Ke(r,t,e._id,t===X)},direction:"row",sx:{order:e.order,position:"relative",cursor:"pointer",borderTopRightRadius:"3px",borderTopLeftRadius:"3px",bgcolor:t===X?"#fff":"",boxShadow:t===X?"#00000014 0px 0px 2px, #00000029 0px -1px 3px":"","&:after":{content:"''",width:"1px",height:15,bgcolor:"#ffffff85",top:8,right:0,position:"absolute"},"&:hover":{bgcolor:t!==X&&"#00000029","&:after":{width:0}}}}),(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(d.Z,{sx:{outlineOffset:"-5px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",pr:t===X?4:2,pl:t===X?1:2},children:(0,V.jsx)(k.Z,{variant:"span",sx:{fontSize:13,userSelect:"none",color:t!==X?"#fff":""},children:e.name})}),t===X&&(0,V.jsx)(l.Z,{alignItems:"center",justifyContent:"center",sx:{position:"absolute",top:0,right:12,height:"100%"},children:(0,V.jsx)(M.Z,{sx:{fontSize:12}})})]}))}},e.name+t)})),e.placeholder]}))}})}),Oe&&(0,V.jsx)(l.Z,{justifyContent:"center",alignItems:"center",sx:{order:xe.length},children:(0,V.jsx)(S.Z,{sx:{p:0,ml:1},onClick:function(e){$(e.target)},children:(0,V.jsx)(A.Z,{sx:{color:"#fff"}})})})]})})})})}),(0,V.jsx)(y.ZP,{anchorEl:Y,open:ye,onClose:Pe,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{"& .MuiPopover-paper":{boxShadow:"0 0 0 2px #00000040"}},children:(0,V.jsxs)(d.Z,{sx:{py:1,px:2,width:400},children:[(0,V.jsx)(C.Z,{placeholder:"Field name",value:oe,onChange:function(e){return ae(e.target.value)},autoFocus:!0,sx:{py:1,width:"100%","& input":{py:1,px:1,fontSize:15},"& fieldset":{borderWidth:2}}}),(0,V.jsxs)(l.Z,{direction:"row",justifyContent:"flex-end",spacing:1,sx:{mt:1},children:[(0,V.jsx)(v.Z,{variant:"outlined",sx:{textTransform:"capitalize",px:1,py:.5,color:"#4d4d4d",borderColor:"#e0e0e0","&:hover":{borderColor:"#4d4d4d"}},onClick:Pe,children:"Cancel"}),(0,V.jsx)(v.Z,{variant:"contained",sx:{textTransform:"capitalize",px:1,py:.5},color:"primary",disabled:!oe,onClick:function(){return Ve()},children:"Create"})]})]})}),(0,V.jsx)(y.ZP,{anchorEl:te,open:Ce,onClose:Pe,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{"& .MuiPopover-paper":{boxShadow:"0 0 0 2px #00000040"}},children:(0,V.jsxs)(d.Z,{sx:{py:1,px:2,width:300},children:[(0,V.jsxs)(l.Z,{direction:"row",justifyContent:"flex-end",spacing:1,children:[(0,V.jsx)(C.Z,{placeholder:"Rename",value:oe,onChange:function(e){return ae(e.target.value)},autoFocus:!0,sx:{width:"100%","& input":{py:1,px:1,fontSize:15},"& fieldset":{borderWidth:2}}}),(0,V.jsx)(v.Z,{variant:"contained",sx:{textTransform:"capitalize",px:1,py:.5},color:"primary",disabled:!oe,onClick:function(){return Qe()},children:"Update"})]}),(0,V.jsx)(I.Z,{sx:{my:1}}),(0,V.jsx)(C.Z,{placeholder:"Find Users",value:ge,onChange:function(e){return Ze(e.target.value)},sx:{width:"100%",mb:1,"& input":{p:1,fontSize:13},"& fieldset":{borderWidth:2}}}),(0,V.jsx)(l.Z,{spacing:.5,sx:{maxWidth:500,bgcolor:"#fff"},children:function(){var e=Me.filter((function(e){return-1!==(e.firstName+" "+e.lastName).toLowerCase().search(ge)}));return(0,V.jsx)(d.Z,{sx:{minHeight:31*e.length},children:e.length?e.map((function(e,t){return(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{px:1,py:.5,cursor:"pointer",borderRadius:1,bgcolor:"#fff","&:hover":{bgcolor:"#0000000d"}},children:[(0,V.jsx)(l.Z,{direction:"row",alignItems:"center",sx:{overflow:"hidden"},children:(0,V.jsx)(k.Z,{sx:{ml:.2,userSelect:"none",fontSize:13,color:"#4d4d4d",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},children:"".concat(e.firstName," ").concat(e.lastName)})}),function(){var t=-1;xe[X]&&(t=e.myTable.findIndex((function(e){return e===xe[X]._id})));var r=-1!==t;return(0,V.jsx)(L.Z,{inputProps:{"aria-label":"ant design"},checked:r,onClick:function(){return Ge(e._id,xe[X]._id,r)}})}()]},t)})):(0,V.jsxs)(k.Z,{sx:{fontSize:12,display:"flex"},component:"div",children:["No results. ",ge?(0,V.jsx)(k.Z,{onClick:function(){return Ze("")},sx:{ml:1,cursor:"pointer",fontSize:12,textDecoration:"underline"},children:"Clear"}):null]})})}()}),(0,V.jsx)(I.Z,{sx:{my:1}}),(0,V.jsxs)(l.Z,{children:[(0,V.jsx)(z.ZP,{disablePadding:!0,children:(0,V.jsxs)(W.Z,{sx:{py:0,px:.5},onClick:Je,children:[(0,V.jsx)(B.Z,{sx:{minWidth:36},children:(0,V.jsx)(O.Z,{})}),(0,V.jsx)(E.Z,{primary:"Transfer"})]})}),Ne?(0,V.jsx)(z.ZP,{disablePadding:!0,children:(0,V.jsx)(g.CopyToClipboard,{text:"".concat(origin,"/view/").concat(Ne),children:(0,V.jsxs)(W.Z,{sx:{py:0,px:.5},children:[(0,V.jsx)(B.Z,{sx:{minWidth:36},children:(0,V.jsx)(F.Z,{})}),(0,V.jsx)(E.Z,{sx:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},primary:"Link: ".concat(Ne)})]})})}):(0,V.jsx)(z.ZP,{disablePadding:!0,children:(0,V.jsxs)(W.Z,{sx:{py:0,px:.5},onClick:Le,children:[(0,V.jsx)(B.Z,{sx:{minWidth:36},children:(0,V.jsx)(F.Z,{})}),(0,V.jsx)(E.Z,{primary:"Generate link"})]})}),(0,V.jsx)(z.ZP,{disablePadding:!0,children:(0,V.jsxs)(W.Z,{sx:{py:0,px:.5},onClick:Xe,children:[(0,V.jsx)(B.Z,{sx:{minWidth:36},children:(0,V.jsx)(D.Z,{})}),(0,V.jsx)(E.Z,{primary:"Delete"})]})})]})]})}),(0,V.jsxs)(_.Z,{open:je,children:[(0,V.jsx)(R.Z,{children:"Transfer Table"}),(0,V.jsxs)(T.Z,{children:[(0,V.jsx)(l.Z,{spacing:1,sx:{py:1},children:(0,V.jsxs)(b.Z,{fullWidth:!0,children:[(0,V.jsx)(N.Z,{children:"Project Name"}),(0,V.jsx)(j.Z,{sx:{minWidth:300},value:le,label:"Project Name",onChange:function(e){ce(e.target.value)},children:Ie.map((function(e,t){return(0,V.jsx)(w.Z,{value:e._id,children:e.name},t)}))})]})}),(0,V.jsxs)(l.Z,{direction:"row",justifyContent:"flex-end",sx:{pt:2},children:[(0,V.jsx)(v.Z,{variant:"contained",color:"error",sx:{mr:1},onClick:Ye,children:"Cancel"}),(0,V.jsx)(v.Z,{variant:"contained",color:"info",onClick:$e,children:"Transfer"})]})]})]})]})},X=r(5403),K=r(9823),G=r(4942),J=r(1535),Y=r(165),$=r(1177),q=r(9582),ee=r(6842),te=r(8347),re=r(470),ne=function(){var e=(0,H.Z)(),t=e.user,r=e.setUser,n=(0,P.Z)(),u=n.header,p=n.changeHeader,g=n.users,b=n.setUsers,S=n.hId,z=n.isAdmin,_=(0,s.useState)(-1),R=(0,a.Z)(_,2),N=R[0],T=R[1],W=(0,s.useState)([]),B=(0,a.Z)(W,2),E=B[0],A=B[1],F=(0,s.useState)(null),D=(0,a.Z)(F,2),O=D[0],M=D[1],U=(0,s.useState)(""),Q=(0,a.Z)(U,2),X=Q[0],K=Q[1],ne=Boolean(O),ie=function(){return M(null)},oe=function(e,n,i){if(i||0===i){var o=E;o[n].allowed=e.target.checked,A((0,x.Z)(o))}else{var a=u;a[n].hide=!e.target.checked,E[n].hide=!e.target.checked;var s=(0,f.Z)((0,f.Z)({},t.showList),{},(0,G.Z)({},E[n].id,!e.target.checked));(0,c.rw)(t._id,s),r((0,f.Z)((0,f.Z)({},t),{},{showList:s})),A(E),p(a)}},ae=function(e,t){if(t>-1){var r=E.map((function(t){return t.allowed=!e,t}));A((0,x.Z)(r))}else{var n=u.map((function(t,r){return(0,f.Z)((0,f.Z)({},t),{},{hide:e})}));p(n)}},se=function(e){T(e.target.value)},de=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,n,o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=E.map((function(e){return e.allowed})),n=E.filter((function(e){return e.allowed})).map((function(e){return e.id})),o=E.filter((function(e){return e.editable})).map((function(e){return e.id})),a=g,!((s=g.findIndex((function(e){return e._id===t})))>-1)){e.next=17;break}return a[s].allowed[S]=r,a[s].allowIds[S]=n,a[s].editable[S]=o,b(a),e.next=12,(0,c.kG)({id:a[s]._id,allowed:r,allowIds:n,editable:o,hId:S});case 12:e.sent.status||Z.Am.error("Can not update data"),ie(),e.next=19;break;case 17:Z.Am.error("User not found"),ie();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){if(N>-1){var e=g.filter((function(e){return"Admin"!==e.role})),t=e[N].allowed&&e[N].allowed[S]?e[N].allowed[S]:[],r=e[N].editable&&e[N].editable[S]?e[N].editable[S]:[];if(t.length){var n=u.map((function(e,n){var i,o=!1,a=(0,h.Z)(r);try{for(a.s();!(i=a.n()).done;){if(i.value===e.id){o=!0;break}}}catch(s){a.e(s)}finally{a.f()}return(0,f.Z)((0,f.Z)({},e),{},{allowed:t[n],index:n,editable:o})}));A(n)}else{var i=u.map((function(e,t){var n,i=!1,o=(0,h.Z)(r);try{for(o.s();!(n=o.n()).done;){if(n.value===e.id){i=!0;break}}}catch(a){o.e(a)}finally{o.f()}return(0,f.Z)((0,f.Z)({},e),{},{allowed:!1,index:t,editable:i})}));A(i)}}else{var o=u.filter((function(e){return e.allowed})).map((function(e,t){return(0,f.Z)((0,f.Z)({},e),{},{index:t,editable:!0})}));A(o)}};return(0,s.useEffect)((function(){le()}),[u,N]),(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(v.Z,{size:"small",startIcon:(0,V.jsx)(Y.Z,{sx:{fontSize:16}}),onClick:function(e){return M(e.currentTarget)},sx:{px:1,fontSize:13,color:"#4d4d4d",textTransform:"capitalize","&:hover":{bgcolor:"#0000000d"}},children:"Hide fields"}),z?(0,V.jsx)(y.ZP,{anchorEl:O,open:ne,onClose:ie,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,V.jsxs)(d.Z,{sx:{py:1,px:2},children:[(0,V.jsx)(C.Z,{placeholder:"Find an option",value:X,onChange:function(e){return K(e.target.value)},autoFocus:!0,sx:{borderBottom:"1px solid #0000001a",pt:1,pb:.5,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),function(){var e=g.filter((function(e){return"Admin"!==e.role}));return e[N]?(0,V.jsxs)(k.Z,{sx:{fontSize:11,py:1},children:["For ","".concat(e[N].firstName," ").concat(e[N].lastName)]}):null}(),(0,V.jsxs)(l.Z,{direction:"row",children:[(0,V.jsx)(k.Z,{sx:{fontSize:12,color:"#1976d2"},children:"Visible"}),(0,V.jsx)(k.Z,{sx:{fontSize:12,ml:2,color:"#1976d2"},children:"Editable"})]}),(0,V.jsx)(d.Z,{sx:{py:1},children:(0,V.jsx)(m.Z5,{onDragEnd:function(e){return function(e,t){if(e.destination){var r=t,n=e.source.index,i=e.destination.index,o=[];if(n<i){var a,s=(0,h.Z)(r);try{for(s.s();!(a=s.n()).done;){var d=a.value;d.order===n?d.order=i:d.order>n&&d.order<=i&&d.order--,console.log(d.order),o.push(d)}}catch(x){s.e(x)}finally{s.f()}}else{var l,u=(0,h.Z)(r);try{for(u.s();!(l=u.n()).done;){var f=l.value;f.order===n?f.order=i:f.order>=i&&f.order<n&&f.order++,o.push(f)}}catch(x){u.e(x)}finally{u.f()}}p([].concat(o)),le(),(0,c.EH)({row:o,hId:S})}}(e,u)},children:(0,V.jsx)(m.bK,{droppableId:"field-order",type:"field-order",children:function(e,n){return(0,V.jsx)(l.Z,(0,f.Z)((0,f.Z)({ref:e.innerRef},e.droppableProps),{},{spacing:.5,sx:{maxWidth:500,minWidth:300,bgcolor:"#fff"},children:function(){var n=E.filter((function(e){return-1!==e.name.toLowerCase().search(X)})).sort((function(e,t){return e.order-t.order}));return(0,V.jsxs)(d.Z,{sx:{minWidth:27.5*n.length},children:[n.length?n.map((function(e,n){return(0,V.jsx)(m._l,{draggableId:e.name,index:n,children:function(n,i){return(0,V.jsxs)(l.Z,(0,f.Z)((0,f.Z)((0,f.Z)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,direction:"row",alignItems:"center",justifyContent:"space-between",sx:{px:1,py:.5,cursor:"pointer",borderRadius:1,bgcolor:"#fff","&:hover":{bgcolor:"#0000000d"},boxShadow:i.isDragging?"0 0 6px #898585":""},children:[(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,V.jsx)(L.Z,{checked:N>=0?!!e.allowed:!e.hide,inputProps:{"aria-label":"ant design"},onChange:function(t){return oe(t,e.index,N)}}),(0,V.jsx)(L.Z,{disabled:-1===N,checked:e.editable,sx:{ml:4,opacity:-1===N?.5:1},onChange:function(n){return function(e,n,i){if(i>-1){var o=E;o[n].editable=e.target.checked,A((0,x.Z)(o))}else{var a,s=u;E[n].editable=!e.target.checked;var d=null!==(a=t.editable)&&void 0!==a?a:{},l=t.editable&&t.editable[S]?t.editable[S]:{},h=(0,f.Z)((0,f.Z)({},l),{},(0,G.Z)({},E[n].id,e.target.checked));(0,c.dD)(t._id,(0,f.Z)((0,f.Z)({},d),{},(0,G.Z)({},S,h))),r((0,f.Z)((0,f.Z)({},t),{},{editable:(0,f.Z)((0,f.Z)({},d),{},(0,G.Z)({},S,h))})),A(E),p(s)}}(n,e.index,N)}}),(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{overflow:"hidden"},children:[(0,V.jsx)(l.Z,{sx:{mr:1,ml:2,"& svg":{height:13,width:15}},children:function(){switch(e.type){case"text":case"email":default:return(0,V.jsx)($.r,{});case"longText":return(0,V.jsx)(q.r,{});case"attached":return(0,V.jsx)(ee.r,{});case"date":return(0,V.jsx)(re.r,{});case"select":return(0,V.jsx)(te.r,{})}}()}),(0,V.jsx)(k.Z,{sx:{ml:.2,userSelect:"none",fontSize:13,color:"#4d4d4d",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},children:e.name})]})]}),(0,V.jsx)(J.Z,{sx:{fontSize:13,color:"gray"}})]}))}},e.name+n)})):(0,V.jsxs)(k.Z,{sx:{fontSize:12,display:"flex"},component:"div",children:["No results. ",X?(0,V.jsx)(k.Z,{onClick:function(){return K("")},sx:{ml:1,cursor:"pointer",fontSize:12,textDecoration:"underline"},children:"Clear"}):null]}),e.placeholder]})}()}))}})})}),E.filter((function(e){return-1!==e.name.toLowerCase().search(X)})).length?(0,V.jsxs)(l.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(v.Z,{variant:"contained",onClick:function(){return ae(!0,N)},sx:{width:"50%",textTransform:"capitalize",color:"#4d4d4d",fontSize:11,bgcolor:"#0000000d",py:.5,"&:hover":{bgcolor:"#0000000d"}},children:"Hide all"}),(0,V.jsx)(v.Z,{variant:"contained",onClick:function(){return ae(!1,N)},sx:{width:"50%",textTransform:"capitalize",color:"#4d4d4d",fontSize:11,bgcolor:"#0000000d",py:.5,"&:hover":{bgcolor:"#0000000d"}},children:"Show all"})]}):null,function(){if(z){var e=g.filter((function(e){return"Admin"!==e.role}));return(0,V.jsxs)(d.Z,{sx:{pt:1},children:[(0,V.jsx)(I.Z,{}),(0,V.jsxs)(j.Z,{sx:{width:"100%",mt:1,"& .MuiSelect-select":{py:1}},value:N,onChange:se,children:[(0,V.jsx)(w.Z,{value:-1,children:(0,V.jsx)("em",{children:"For Admin"})}),e.map((function(e,t){var r=e._id,n=e.firstName,i=e.lastName,o=e.department;return(0,V.jsx)(w.Z,{value:t,children:(0,V.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,V.jsxs)(k.Z,{sx:{fontSize:14},children:[" ","".concat(n," ").concat(i)]}),(0,V.jsxs)(k.Z,{sx:{fontSize:10},align:"right",children:[" ",o]})]})},r)}))]}),(0,V.jsx)(v.Z,{disabled:N<0,onClick:function(){return de(e[N]._id)},variant:"contained",sx:{width:"100%",mt:1,textTransform:"capitalize",color:"#4d4d4d",fontSize:11,bgcolor:"#0000000d",py:.5,"&:hover":{bgcolor:"#0000000d"}},children:"Save options"})]})}return null}()]})}):(0,V.jsx)(y.ZP,{anchorEl:O,open:ne,onClose:ie,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,V.jsxs)(d.Z,{sx:{py:1,px:2},children:[(0,V.jsx)(C.Z,{placeholder:"Find an option",onChange:function(e){return K(e.target.value)},autoFocus:!0,sx:{borderBottom:"1px solid #0000001a",pt:1,pb:.5,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),(0,V.jsx)(d.Z,{sx:{py:1},children:(0,V.jsx)(l.Z,{spacing:.5,sx:{maxWidth:500,minWidth:300,bgcolor:"#fff"},children:function(){var e=E.filter((function(e){return-1!==e.name.toLowerCase().search(X)})).sort((function(e,t){return e.order-t.order}));return(0,V.jsx)(d.Z,{sx:{minHeight:31*e.length},children:e.length?e.map((function(e,t){return(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{px:1,py:.5,cursor:"pointer",borderRadius:1,bgcolor:"#fff","&:hover":{bgcolor:"#0000000d"}},children:[(0,V.jsx)(L.Z,{checked:N||0===N?!!e.allowed:!e.hide,inputProps:{"aria-label":"ant design"},onChange:function(t){return oe(t,e.index,N)}}),(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{overflow:"hidden"},children:[(0,V.jsx)(l.Z,{sx:{mr:1,ml:2,"& svg":{height:13,width:15}},children:function(){switch(e.type){case"text":case"email":default:return(0,V.jsx)($.r,{});case"longText":return(0,V.jsx)(q.r,{});case"attached":return(0,V.jsx)(ee.r,{});case"date":return(0,V.jsx)(re.r,{});case"select":return(0,V.jsx)(te.r,{})}}()}),(0,V.jsx)(k.Z,{sx:{ml:.2,userSelect:"none",fontSize:13,color:"#4d4d4d",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},children:e.name})]})]},t)})):(0,V.jsxs)(k.Z,{sx:{fontSize:12,display:"flex"},component:"div",children:["No results. ",X?(0,V.jsx)(k.Z,{onClick:function(){return K("")},sx:{ml:1,cursor:"pointer",fontSize:12,textDecoration:"underline"},children:"Clear"}):null]})})}()})}),E.filter((function(e){return-1!==e.name.toLowerCase().search(X)})).length?(0,V.jsxs)(l.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(v.Z,{variant:"contained",onClick:function(){return ae(!0,N)},sx:{width:"50%",textTransform:"capitalize",color:"#4d4d4d",fontSize:11,bgcolor:"#0000000d",py:.5,"&:hover":{bgcolor:"#0000000d"}},children:"Hide all"}),(0,V.jsx)(v.Z,{variant:"contained",onClick:function(){return ae(!1,N)},sx:{width:"50%",textTransform:"capitalize",color:"#4d4d4d",fontSize:11,bgcolor:"#0000000d",py:.5,"&:hover":{bgcolor:"#0000000d"}},children:"Show all"})]}):null]})})]})},ie=r(1903),oe=[{label:"contains...",value:"contain"},{label:"does not contain...",value:"notContain"},{label:"is...",value:"is"},{label:"is not...",value:"isNot"},{label:"is empty",value:"isEmpty"},{label:"is not empty",value:"notEmpty"}],ae=function(e,t,r){switch(t){case"contain":return e.toLocaleLowerCase().search(r.toLocaleLowerCase())>-1;case"notContain":return!(e.toLocaleLowerCase().search(r.toLocaleLowerCase())>-1);case"is":return e.toLocaleLowerCase()===r.toLocaleLowerCase();case"isNot":return e.toLocaleLowerCase()!==r.toLocaleLowerCase();case"isEmpty":return""===e.toLocaleLowerCase();case"notEmpty":return""!==e.toLocaleLowerCase();default:return!1}},se=function(){var e=(0,P.Z)(),t=e.header,r=e.changeFilterBody,n=e.filterItem,i=e.setFilterItem,o=e.body,c=e.setFilter,u=(0,s.useState)(null),f=(0,a.Z)(u,2),h=f[0],p=f[1],m=Boolean(h),g=(0,s.useState)("or"),Z=(0,a.Z)(g,2),b=Z[0],S=Z[1],I=function(e,t,r){var o=n;n[e][t]=r,i((0,x.Z)(o))};return(0,s.useEffect)((function(){if(n.length){c(!0);var e=o.filter((function(e){var r=[];for(var i in n){var o="",a=void 0,s=n[i].field;switch(t[s].type){case"text":case"date":case"email":case"longText":o=e.row[n[i].field].data;break;case"select":a=e.row[n[i].field].data,o=t[n[i].field].list[Number(a)].label;break;case"attached":o=e.row[n[i].field].data.map((function(e){return e.originalname})).join(",");break;default:return o=e.row[n[i].field].data}r.push(ae(o,n[i].condition,n[i].value))}return"and"===b&&0===r.filter((function(e){return!e})).length||"or"===b&&r.filter((function(e){return e})).length>0}));r((0,x.Z)(e))}else c(!1),r([])}),[n,b]),(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(v.Z,{size:"small",startIcon:(0,V.jsx)(ie.Z,{sx:{fontSize:16}}),onClick:function(e){return p(e.currentTarget)},sx:{px:1,fontSize:13,color:"#4d4d4d",textTransform:"capitalize","&:hover":{bgcolor:"#0000000d"}},children:"Filter"}),(0,V.jsx)(y.ZP,{anchorEl:h,open:m,onClose:function(e){return p(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,V.jsxs)(d.Z,{sx:{py:1,px:2},children:[(0,V.jsx)(k.Z,{sx:{ml:.2,userSelect:"none",fontSize:13,color:"#4d4d4d",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},children:"In this view, show tasks"}),(0,V.jsx)(d.Z,{sx:{py:1},children:(0,V.jsx)(l.Z,{spacing:1,sx:{minWidth:300},children:n.map((function(e,r){return(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[0===r?(0,V.jsx)(k.Z,{sx:{width:60,mr:1,display:"flex",justifyContent:"center",userSelect:"none",fontSize:13,color:"#4d4d4d",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},children:"Where"}):1===r?(0,V.jsx)(j.Z,{value:b,onChange:function(e){return S(e.target.value)},sx:{width:60,mr:1,borderRadius:0,border:"1px solid #0000001a","& .MuiSelect-select":{py:0,pl:.5,display:"flex",alignItems:"center","& .MuiTypography-root":{fontSize:13}},"& fieldset":{display:"none"},"& .MuiListItemIcon-root":{minWidth:0,"& div":{margin:0}}},children:["or","and"].map((function(e,t){return(0,V.jsx)(w.Z,{value:e,children:(0,V.jsx)(E.Z,{children:e})},t)}))}):(0,V.jsx)(k.Z,{sx:{width:60,mr:1,display:"flex",justifyContent:"center",userSelect:"none",fontSize:13,color:"#4d4d4d",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},children:b}),(0,V.jsx)(l.Z,{children:(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,V.jsx)(j.Z,{value:e.field,onChange:function(e){return I(r,"field",e.target.value)},sx:{width:140,borderRadius:0,border:"1px solid #0000001a",borderRight:0,"& .MuiSelect-select":{py:0,pl:.5,display:"flex",alignItems:"center","& .MuiTypography-root":{fontSize:13,overflow:"hidden",textOverflow:"ellipsis"}},"& fieldset":{display:"none"},"& .MuiListItemIcon-root":{minWidth:0,"& div":{margin:0}}},children:t.map((function(e,t){return(0,V.jsxs)(w.Z,{value:t,children:[(0,V.jsx)(B.Z,{sx:{minWidth:"0px !important"},children:(0,V.jsx)(l.Z,{sx:{mr:.5,"& svg":{height:13}},children:function(){switch(e.type){case"text":case"email":default:return(0,V.jsx)($.r,{});case"longText":return(0,V.jsx)(q.r,{});case"attached":return(0,V.jsx)(ee.r,{});case"date":return(0,V.jsx)(re.r,{});case"select":return(0,V.jsx)(te.r,{})}}()})}),(0,V.jsx)(E.Z,{children:e.name})]},t)}))}),(0,V.jsx)(j.Z,{value:e.condition,onChange:function(e){return I(r,"condition",e.target.value)},sx:{width:140,borderRadius:0,border:"1px solid #0000001a",borderRight:0,"& .MuiSelect-select":{py:0,pl:.5,display:"flex",alignItems:"center","& .MuiTypography-root":{fontSize:13}},"& fieldset":{display:"none"},"& .MuiListItemIcon-root":{minWidth:0,"& div":{margin:0}}},children:oe.map((function(e,t){return(0,V.jsx)(w.Z,{value:e.value,children:(0,V.jsx)(E.Z,{children:e.label})},t)}))}),(0,V.jsx)(C.Z,{onChange:function(e){return I(r,"value",e.target.value)},placeholder:"Enter a value",value:e.value,sx:{borderRadius:0,border:"1px solid #0000001a",borderRight:0,"& fieldset":{display:"none"},"& input":{p:.5,fontSize:13}}}),(0,V.jsx)(d.Z,{onClick:function(){return function(e){var t=n;t.splice(e,1),i((0,x.Z)(t))}(r)},sx:{cursor:"pointer",borderRadius:0,border:"1px solid #0000001a",p:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,V.jsx)(D.Z,{sx:{fontSize:19}})})]})})]},r)}))})}),(0,V.jsx)(l.Z,{direction:"row",spacing:2,children:(0,V.jsx)(v.Z,{onClick:function(){i([].concat((0,x.Z)(n),[{field:0,condition:"contain",value:""}]))},startIcon:(0,V.jsx)(A.Z,{sx:{fontSiz:13}}),variant:"contained",sx:{textTransform:"capitalize",color:"#4d4d4d",fontSize:11,bgcolor:"#0000000d",py:.5,"&:hover":{bgcolor:"#0000000d"}},children:"Add condition"})})]})})]})},de=function(){var e=(0,s.useState)(""),t=(0,a.Z)(e,2),r=t[0],n=t[1],i=(0,P.Z)(),o=i.header,u=i.changeFilterBody,f=i.body,h=i.changeBody,p=i.deleteRowList,m=i.setDeleteRowList,g=(0,s.useState)(!1),Z=(0,a.Z)(g,2),b=Z[0],w=Z[1];return(0,s.useEffect)((function(){if(r){var e=f.map((function(e){for(var t=0;t<e.row.length;t++){var n="",i=void 0;switch(o[t].type){case"text":case"date":case"email":case"longText":n=e.row[t].data;break;case"select":i=e.row[t].data,n=o[t].list[Number(i)]?o[t].list[Number(i)].label:"";break;case"attached":n=e.row[t].data.map((function(e){return e.originalname})).join(",");break;default:return n=e.row[t].data}ae(n,"contain",r)?e.row[t].search=!0:e.row[t].search=!1}return e}));u((0,x.Z)(e))}else{var t=f.map((function(e){for(var t=0;t<e.row.length;t++)e.row[t].search=!1;return e}));u((0,x.Z)(t))}}),[r]),(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{top:0,left:0,zIndex:7,height:44,position:"relative",bgcolor:"#fff",whiteSpace:"nowrap",boxShadow:"rgb(200 200 200) 0 1px 0 0"},children:[(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:.5,sx:{height:26,px:2},children:[p.length?(0,V.jsx)(v.Z,{size:"small",startIcon:(0,V.jsx)(D.Z,{sx:{fontSize:16}}),onClick:function(){(0,c.wE)(p);var e=f.filter((function(e){return-1===p.findIndex((function(t){return t===e._id}))}));e.sort((function(e,t){return e.order-t.order}));for(var t=0;t<e.length;t++)e[t].order=t;h((0,x.Z)(e)),m([])},sx:{px:1,fontSize:13,color:"#f82b60",textTransform:"capitalize","&:hover":{bgcolor:"#0000000d"}},children:"Delete Selected Rows"}):null,(0,V.jsx)(ne,{}),(0,V.jsx)(se,{})]}),(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{height:26,pr:2,position:"relative"},children:[(0,V.jsx)(X.Z,{sx:{fontSize:24,cursor:"pointer"},onClick:function(){return w(!0)}}),b&&(0,V.jsx)(d.Z,{sx:{width:300,position:"absolute",bottom:-46,right:10,bgcolor:"#fff",borderWidth:"0px 2px 2px",borderStyle:"solid",borderColor:"#0000001a",borderBottomLeftRadius:3,borderBottomRightRadius:3},children:(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,V.jsx)(C.Z,{onChange:function(e){return n(e.target.value)},placeholder:"Search",sx:{py:1,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),(0,V.jsx)(K.Z,{sx:{opacity:.5,cursor:"pointer",fontSize:20,mr:.5},onClick:function(){return w(!1)}})]})})]})]})},le=r(8490),ce=r(6666),ue=r.n(ce),fe=r(9887),xe=r(4519),he=r(194),pe=r(4803),me=["title","titleId"];function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ge.apply(this,arguments)}function Ze(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function be(e,t){var r=e.title,i=e.titleId,o=Ze(e,me);return s.createElement("svg",ge({width:16,height:16,viewBox:"0 0 16 16",className:"flex-none mr1 text-color-quiet",style:{shapeRendering:"geometricprecision"},ref:t,"aria-labelledby":i},o),r?s.createElement("title",{id:i},r):null,n||(n=s.createElement("path",{fillRule:"evenodd",fill:"currentColor",d:"M14 4h1a.5.5 0 0 1 .416.777l-1.341 1.906c-.317.45-.832.451-1.15 0l-1.341-1.906A.5.5 0 0 1 12 4h1V.5c0-.275.225-.5.5-.5s.5.225.5.5V4zM1 2a1 1 0 0 1 1.01-1h1.98a1 1 0 1 1 0 2H2.01C1.451 3 1 2.556 1 2zm0 3a1 1 0 0 1 .99-1h4.02c.546 0 .99.444.99 1a1 1 0 0 1-.99 1H1.99A.993.993 0 0 1 1 5zm0 3c0-.552.453-1 .997-1h6.006C8.553 7 9 7.444 9 8c0 .552-.453 1-.997 1H1.997A.996.996 0 0 1 1 8zm0 3c0-.552.445-1 .996-1h9.008c.55 0 .996.444.996 1 0 .552-.445 1-.996 1H1.996A.995.995 0 0 1 1 11zm0 3c0-.552.45-1 1.007-1h11.986c.556 0 1.007.444 1.007 1 0 .552-.45 1-1.007 1H2.007A1.001 1.001 0 0 1 1 14z"})))}var we,je=s.forwardRef(be),ve=(r.p,["title","titleId"]);function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ye.apply(this,arguments)}function Ce(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Se(e,t){var r=e.title,n=e.titleId,i=Ce(e,ve);return s.createElement("svg",ye({width:16,height:16,viewBox:"0 0 16 16",className:"flex-none mr1 text-color-quiet",style:{shapeRendering:"geometricprecision"},ref:t,"aria-labelledby":n},i),r?s.createElement("title",{id:n},r):null,we||(we=s.createElement("path",{fillRule:"evenodd",fill:"currentColor",d:"M1.94 1h12.12c.506 0 .94.424.94.948a.942.942 0 0 1-.94.948H1.94A.953.953 0 0 1 1 1.948C1 1.421 1.421 1 1.94 1zm.017 3h9.086c.54 0 .957.424.957.948a.95.95 0 0 1-.957.948H1.957A.946.946 0 0 1 1 4.948.95.95 0 0 1 1.957 4zm-.008 3.104h6.102c.519 0 .949.424.949.948A.946.946 0 0 1 8.05 9h-6.1A.952.952 0 0 1 1 8.052c0-.528.425-.948.95-.948zM1.951 10h4.098a.947.947 0 1 1 0 1.896H1.951a.947.947 0 1 1 0-1.896zm-.003 3.104h2.104a.95.95 0 0 1 .948.948.946.946 0 0 1-.948.948H1.948A.95.95 0 0 1 1 14.052c0-.527.424-.948.948-.948zM14 12h1a.5.5 0 0 1 .416.777l-1.341 1.906c-.317.45-.832.451-1.15 0l-1.341-1.906A.5.5 0 0 1 12 12h1V8.5c0-.275.225-.5.5-.5s.5.225.5.5V12z"})))}var ke=s.forwardRef(Se),Ie=(r.p,r(1286)),ze=r(6759),_e=r(8264),Re=r(7394),Ne=r(5453),Te=r(8400),We=function(e){var t=e.i,r=e.me,n=(0,P.Z)(),i=n.header,o=n.changeFilterBody,u=n.body,p=n.setFilter,m=n.changeBody,g=n.changeHeader,Z=n.hId,b=n.setColumHandle,w=n.isAdmin,j=(0,H.Z)(),C=j.user,S=j.setUser,z=(0,s.useState)(null),_=(0,a.Z)(z,2),R=_[0],N=_[1],T=(0,s.useState)(!1),W=(0,a.Z)(T,2),B=W[0],E=W[1],A=(0,s.useState)(!0),F=(0,a.Z)(A,2),O=F[0],M=F[1],L=Boolean(R),U=function(e,t){E(!B),M(e)},Q=function(e){b({direction:e,target:R.parentElement,index:"right"===e?i[t].order+1:i[t].order,type:"add"}),N(null)};return(0,s.useEffect)((function(){if(B){var e=u.sort((function(e,r){var n,o,a;switch(i[t].type){case"text":case"date":case"email":case"link":case"longText":n=e.row[t].data,o=r.row[t].data;break;case"select":a=e.row[t].data,n=i[t].list[Number(a)].label,a=r.row[t].data,o=i[t].list[Number(a)].label;break;case"attached":n=e.row[t].data.length,o=r.row[t].data.length;break;default:return n=e.row[t].data,o=r.row[t].data,n}if(O){if(n<o)return-1;if(n>o)return 1}else{if(n<o)return 1;if(n>o)return-1}}));p(!0),o((0,x.Z)(e))}}),[u,B,M]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{height:"100%",width:"100%",px:"5px"},children:[(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{overflow:"hidden"},children:[(0,V.jsx)(d.Z,{sx:{display:"flex"},children:(0,V.jsx)(Te.Z,{type:i[t].type,editable:r.editable})}),(0,V.jsx)(d.Z,{sx:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(0,V.jsx)(k.Z,{variant:"span",sx:{ml:"5px",color:r.editable?"#0ed114":"#333333",fontWeight:r.editable?600:300,fontSize:13,userSelect:"none"},children:r.name})})]}),(0,V.jsx)(ze.Z,{onClick:function(e){return N(e.currentTarget)},sx:{cursor:"pointer",fontSiz:12,color:"#555555",opacity:.4,"&:hover":{opacity:1}}})]}),(0,V.jsx)(y.ZP,{anchorEl:R,open:L,onClose:function(e){return N(null)},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:(0,V.jsx)(d.Z,{sx:{py:1,px:2},children:(0,V.jsx)(d.Z,{sx:{py:1},children:(0,V.jsxs)(l.Z,{spacing:.5,sx:{minWidth:200},children:[w?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(v.Z,{onClick:function(){return b({direction:"left",target:R.parentElement,index:i[t].order,type:"edit"}),void N(null)},startIcon:(0,V.jsx)(Ie.Z,{sx:{fontSize:15}}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize"},children:"Edit field"}),(0,V.jsx)(I.Z,{})]}):null,w?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(v.Z,{disabled:0===r.order,onClick:function(){return Q("left")},startIcon:(0,V.jsx)(Re.Z,{sx:{fontSize:15}}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize"},children:"Insert left"}),(0,V.jsx)(v.Z,{onClick:function(){return Q("right")},startIcon:(0,V.jsx)(_e.Z,{sx:{fontSize:15}}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize"},children:"Insert right"}),(0,V.jsx)(I.Z,{}),(0,V.jsx)(v.Z,{onClick:function(){return function(){console.log(i);var e=i.map((function(e){return e.order<=r.order?(0,f.Z)((0,f.Z)({},e),{},{fixed:!0}):(0,f.Z)((0,f.Z)({},e),{},{fixed:!1})}));g(e)}()},startIcon:(0,V.jsx)(Ne.Z,{}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize"},children:"Fixed"}),(0,V.jsx)(I.Z,{})]}):null,(0,V.jsx)(v.Z,{onClick:function(){return U(!0)},startIcon:(0,V.jsx)(je,{}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize"},children:"Sort A ~ Z"}),(0,V.jsx)(v.Z,{onClick:function(){return U(!1)},startIcon:(0,V.jsx)(ke,{}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize"},children:"Sort Z ~ A"}),(0,V.jsx)(I.Z,{}),(0,V.jsx)(v.Z,{onClick:function(){return function(){var e=i;e[t].hide=!0,(0,c.rw)(C._id,(0,f.Z)((0,f.Z)({},C.showList),{},(0,G.Z)({},e[t].id,!0))),S((0,f.Z)((0,f.Z)({},C),{},{showList:(0,f.Z)((0,f.Z)({},C.showList),{},(0,G.Z)({},e[t].id,!0))})),g(e)}()},startIcon:(0,V.jsx)(Y.Z,{sx:{fontSize:15}}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize"},children:"Hide field"}),w?(0,V.jsx)(v.Z,{onClick:function(){return function(e){var t,r=[],n=u,o=(0,h.Z)(i);try{for(o.s();!(t=o.n()).done;){var a=t.value;a.order!==i[e].order&&(a.order>i[e].order&&a.order--,r.push(a))}}catch(s){o.e(s)}finally{o.f()}n=n.map((function(t){var r=t;return r.row.splice(e,1),r})),g(r),m(n),(0,c.XS)({hId:Z,index:e}),N(null)}(t)},startIcon:(0,V.jsx)(D.Z,{sx:{fontSize:15}}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize"},children:"Delete"}):null]})})})})]})},Be=r(5473),Ee=r(7043),Ae=function(){var e=(0,s.useContext)(le.X),t=e.body,r=e.deleteRowList,n=e.setDeleteRowList;return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)(d.Z,{sx:{position:"sticky",left:0,zIndex:9,display:"flex",alignItems:"center",order:-2,height:"100%",width:Ee.cn,bgcolor:"#f5f5f5",borderBottom:"1px solid #d1d1d1",borderRight:"1px solid #dde1e3"},children:[(0,V.jsx)(d.Z,{sx:{width:32,height:32,cursor:"default",borderLeft:"none",borderRight:"none",position:"relative",ml:2},children:(0,V.jsx)(Be.Z,{onChange:function(e){if(e.target.checked){var r=t.map((function(e){return e._id}));n((0,x.Z)(r))}else n([])},checked:Boolean(r.length),sx:{"& .MuiSvgIcon-root":{fontSize:15}}})}),(0,V.jsx)(k.Z,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:"Actions"})]})})},Fe=r(5814),De=r(8946),Oe=r(5724),Me=r(5020),He=r(333),Pe=r(2426),Le=r.n(Pe),Ue=r(8277),Ve=r(5953),Qe=r(3423),Xe=r(1835),Ke=r(872),Ge=r(2885),Je=r(9663),Ye=r(8421),$e=r(9652),qe=r(2775),et=r(3292),tt=r(5315),rt=r(7323),nt=r(1888),it=r(4683),ot=r(8923);var at=r.p+"static/media/file.0f468b4b769aae19fbe7adcfa088f063.svg";var st=r.p+"static/media/delete.73821db442f345f308f6a32c9e78ae47.svg";function dt(e){var t=e.open,r=e.close,n=e.position,u=e.data,p=(0,H.Z)().user,m=(0,P.Z)(),g=m.body,Z=m.changeBody,b=m.header,w=(0,s.useState)(""),j=(0,a.Z)(w,2),y=j[0],C=j[1],S=(0,s.useState)([]),I=(0,a.Z)(S,2),z=I[0],N=I[1],W=(0,s.useState)(!1),B=(0,a.Z)(W,2),E=B[0],A=B[1],F=(0,s.useState)(0),D=(0,a.Z)(F,2),O=D[0],M=D[1],L=(0,s.useState)([]),U=(0,a.Z)(L,2),Q=U[0],X=U[1],K=function(){N([]),X([]),r(!1)},J=function(e){N([].concat((0,x.Z)(z),(0,x.Z)(e)))},Y=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,o,a,s,d,l,f,x,m,w,j;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(!0),t=new FormData,o=(0,h.Z)(z);try{for(o.s();!(a=o.n()).done;)s=a.value,t.append("file",s)}catch(i){o.e(i)}finally{o.f()}return e.prev=4,e.next=7,(0,c.W$)("table/upload",t,M);case 7:if(!(d=e.sent).status){e.next=18;break}f=(l={data:g}).data[n[0]]._id,x=(0,h.Z)(d.data);try{for(x.s();!(m=x.n()).done;)w=m.value,l.data[n[0]].row[n[1]].data.push(w)}catch(i){x.e(i)}finally{x.f()}return Z(l.data),e.next=16,(0,c.RQ)({data:l.data[n[0]],modifier:p});case 16:e.sent.status&&(j={type:"activity",rowId:f,history:{status:"add",data:d.data},dataType:"attached",sign:(0,G.Z)({},p._id,!0),creator:p,cellName:b[n[1]].name,cellId:u.id,columnId:b[n[1]].id},(0,c.Hw)(j));case 18:N([]),X([]),r(!1),e.next=26;break;case 23:return e.prev=23,e.t0=e.catch(4),e.abrupt("return");case 26:A(!1);case 27:case"end":return e.stop()}}),e,null,[[4,23]])})));return function(){return e.apply(this,arguments)}}();return(0,V.jsx)("div",{children:(0,V.jsxs)(_.Z,{maxWidth:"md",open:t,sx:{"& .MuiDialog-paper":{width:"100%"}},onClose:K,children:[(0,V.jsx)(R.Z,{children:"File Upload"}),(0,V.jsx)(T.Z,{children:(0,V.jsxs)(d.Z,{sx:{position:"relative","& input:focus+div":{borderStyle:"solid"}},children:[(0,V.jsxs)(d.Z,{sx:(0,f.Z)({lineHeight:0},y&&{border:"1px solid #f23a3c",boxShadow:"0 0 3px #f23a3c","&:hover":{borderColor:"#fe8e92",boxShadow:"0 0 0 2px #ffa5a5"}}),children:[!E&&(0,V.jsxs)("label",{children:[(0,V.jsx)("input",{multiple:!0,type:"file",id:"file",name:"file",onChange:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,n,o,a,s,d,l,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.target.blur(),r=t.target.files,n=0;case 4:if(!(n<r.length)){e.next=17;break}if(o=r[n],(a=o.name.split(".").pop())||(a=o.type.split("/")[1]),!(o.size>167772160)){e.next=11;break}return C("".concat(o.name.length>14?o.name.slice(0,7)+"..."+o.name.slice(-7):o.name," is too large, maximum file size is 20MB.")),e.abrupt("return");case 11:if(Ee.Gb.includes(a)){e.next=14;break}return C("".concat(o.name," has invalid extension. Only ").concat(Ee.Gb.join(", ")," are allowed.")),e.abrupt("return");case 14:n++,e.next=4;break;case 17:s=[],d=0;case 19:if(!(d<r.length)){e.next=35;break}if(l=r[d],(c=l.name.split(".").pop())||(c=l.type.split("/")[1]),console.log(c),!Ee._w.includes(c)){e.next=31;break}return e.next=27,(0,ot.s)(l);case 27:u=e.sent,s.push({name:l.name,size:(0,it.R)(l.size,1),base64:u}),e.next=32;break;case 31:s.push({name:l.name,size:(0,it.R)(l.size,1)});case 32:d++,e.next=19;break;case 35:J(t.target.files),X([].concat((0,x.Z)(Q),s)),t.target.value="",y&&C("");case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{height:"132px",position:"absolute",width:"100%",top:0,left:0,opacity:0,cursor:"pointer",fontSize:0}}),(0,V.jsxs)(d.Z,{sx:{pointerEvents:"none",position:"relative",overflow:"hidden",direction:"ltr",color:"#C96100",borderColor:"rgba(201, 97, 0, 0.77)",backgroundColor:"#fbfcff",border:"1px dashed",borderRadius:"4px",height:"132px",fontSize:"18px",top:"0",left:"0",width:"100%",display:"flex",flexDirection:"column",fontWeight:"600",alignItems:"center",justifyContent:"center",wordBreak:"break-word","&:before":{backgroundImage:"url(/browse_file.svg)",content:'""',width:"39px",height:"28px",marginBottom:"16px",backgroundRepeat:"no-repeat"},"&:hover":{borderColor:"rgba(201, 97, 0, 0.5)",boxShadow:"0 0 0 2px rgb(201 97 0 / 25%)"},"&:focus":{borderColor:"#c96100",boxShadow:"0 0 0 3px rgb(201 97 0 / 25%)"}},children:["Browse File",(0,V.jsx)(k.Z,{sx:{display:{xs:"none",sm:"initial"},fontSize:"14px",color:"#FF913E",fontWeight:"400",marginTop:"6px"},children:"Drag and drop files here"}),(0,V.jsx)(k.Z,{sx:{display:{xs:"initial",sm:"none"},fontSize:"14px",color:"#FF913E",fontWeight:"400",marginTop:"6px"},children:"Choose a file"})]})]}),(0,V.jsx)(d.Z,{sx:{pt:Q.length?"6px":"0px"},children:Q.map((function(e,t){return(0,V.jsx)(d.Z,{sx:{mt:"10px"},children:(0,V.jsxs)(l.Z,{direction:"row",children:[(0,V.jsxs)(l.Z,{direction:"row",sx:{backgroundColor:"#dae6ff",fontSize:"14px",fontWeight:500,color:"white",borderRadius:"4px",alignItems:"center",flexGrow:1},children:[(0,V.jsx)(d.Z,{sx:{p:"8px"},children:(0,V.jsx)("img",{alt:"upload",src:e.base64||at,style:{padding:e.base64?"0px":"6px",background:e.base64?"transparent":"rgb(255, 255, 255)",display:"block",objectPosition:"center",objectFit:"cover",width:"25px",height:"25px",border:"1px solid",borderRadius:"4px",borderColor:"#b5c2db"}})}),(0,V.jsx)("span",{style:{flexGrow:1},children:e.name}),(0,V.jsx)("span",{style:{padding:"0 10px"},children:e.size})]}),(0,V.jsx)(v.Z,{component:"span",onClick:function(){N(z.filter((function(e,r){return r!==t}))),X(Q.filter((function(e,r){return r!==t})))},sx:{backgroundColor:"#dce5f6",backgroundImage:"url(".concat(st,")"),width:"32px",borderRadius:"4px",backgroundSize:"12px",backgroundPosition:"50%",marginLeft:"5px",backgroundRepeat:"no-repeat",color:"transparent",cursor:"pointer"}})]})},t)}))}),E&&(0,V.jsx)(nt.Z,{sx:{mt:2},variant:"determinate",value:O})]}),y&&(0,V.jsx)(d.Z,{sx:{width:"100%",p:1,mt:1,borderRadius:1,bgcolor:function(e){return e.palette.error.light}},children:y})]})}),(0,V.jsxs)(rt.Z,{sx:{px:3,pb:3},children:[(0,V.jsx)(v.Z,{variant:"contained",color:"error",onClick:K,children:"Cancel"}),(0,V.jsx)(v.Z,{variant:"contained",onClick:Y,disabled:!z.length,autoFocus:!0,children:"Upload"})]})]})})}var lt=r(9856),ct=r(1211),ut=function(e){var t=e.data,r=e.position,n=e.group,l=(0,s.useContext)(le.X),u=l.hId,f=l.body,x=l.changeBody,h=l.header,p=l.changeHeader,m=l.isAdmin,g=(0,s.useContext)(ct.E).user,Z=(0,s.useState)([]),b=(0,a.Z)(Z,2),j=b[0],v=b[1],S=(0,s.useState)(null),I=(0,a.Z)(S,2),z=I[0],_=I[1],R=(0,s.useState)(""),N=(0,a.Z)(R,2),T=N[0],W=N[1],B=(0,s.useMemo)((function(){return Boolean(z)}),[z]),E=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,o,a){var s,d,l,u,p,m,Z,b,w;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=16;break}if(d=(s={data:f}).data[r[0]]._id,l=s.data[r[0]].row[r[1]].data,n===l){e.next=16;break}return s.data[r[0]].row[r[1]].data=n,p="",m="",(Z=j.findIndex((function(e){return e.id===l})))>-1&&(p=j[Z].label,m=j[Z].color),(null===(u=s.data[r[0]].updater)||void 0===u?void 0:u._id)!==g._id&&(b={firstName:g.firstName,lastName:g.lastName,email:g.email,color:g.color},s.data[r[0]].updater=b),s.data[r[0]].updatedAt=new Date,x(s.data),e.next=14,(0,c.RQ)({data:s.data[r[0]],updater:g._id});case 14:e.sent.status?(w={type:"activity",old:p,oldColor:m,rowId:d,new:o,color:a,dataType:"select",sign:(0,G.Z)({},g._id,!0),creator:g,cellName:h[r[1]].name,cellId:t.id,columnId:h[r[1]].id},(0,c.Hw)(w)):alert("server error!");case 16:_(null),W("");case 18:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),F=function(e){var t=(0,lt.$v)(),n=ue()(),i=h;i[r[1]].list.push({id:n,label:e,color:t,order:i[r[1]].list.length}),p(i),(0,c.ZP)("POST","table/updateHeader",{data:{row:i,hId:u}}).then((function(e){e.status||alert("server error!")})),E(n,e,t)};return(0,s.useEffect)((function(){var e=h[r[1]].list.map((function(e,t){return e.index=t,e}));v(e)}),[h,r]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},onClick:function(e){"active"===n&&_(e.currentTarget)},children:function(){var e,n=j.findIndex((function(e){return e.id===t.data}));return-1!==n?(0,V.jsx)(k.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:h[r[1]].colored?null===(e=j[n])||void 0===e?void 0:e.color:"#b3b0b0",px:1,minWidth:18},children:(0,V.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:j[n].label})}):null}()}),(0,V.jsx)(y.ZP,{anchorEl:z,open:B,onClose:function(){_(null),W("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPaper-rounded":{mt:-1.5}},children:(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(C.Z,{placeholder:"Find an option",onKeyDown:function(e){if("Enter"===e.key){var t=j.filter((function(e){return-1!==e.label.toLowerCase().search(T)}));t.length?E(t[0].id):m?F(T):(_(null),W(""))}},onChange:function(e){return W(e.target.value)},autoFocus:!0,sx:{pt:1,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),function(){var e=j.filter((function(e){return-1!==e.label.toLowerCase().search(T)}));return e.length?(0,V.jsx)(V.Fragment,{children:e.map((function(e,t){var n=e.label,i=e.color,o=e.id;return(0,V.jsx)(w.Z,{onClick:function(){return E(o,n,i)},children:(0,V.jsx)(k.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:h[r[1]].colored?i:"#b3b0b0",px:1,minWidth:18},children:(0,V.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:n})})},t)}))}):T&&m?(0,V.jsxs)(w.Z,{onClick:function(){return F(T)},children:[(0,V.jsx)(A.Z,{sx:{fontSize:16,position:"absolute",left:4}}),(0,V.jsxs)(k.Z,{sx:{pl:.5,width:"100%",overflow:"hidden",fontSize:13,whiteSpace:"break-spaces"},children:["create a new option named ",(0,V.jsx)("b",{children:T})]})]}):(0,V.jsx)(d.Z,{sx:{p:1}})}()]})})]})},ft=function(e){var t=e.data,r=e.width,n=e.position,u=e.group,x=(0,P.Z)(),h=x.hId,p=x.body,m=x.changeBody,g=x.header,Z=x.changeHeader,b=x.isAdmin,j=(0,H.Z)().user,v=(0,s.useState)([]),I=(0,a.Z)(v,2),z=I[0],_=I[1],R=(0,s.useState)(null),N=(0,a.Z)(R,2),T=N[0],W=N[1],B=(0,s.useState)(""),E=(0,a.Z)(B,2),F=E[0],D=E[1],O=Boolean(T),M=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r,o,a){var s,d,l,u,x,h,Z;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return l=[],u=(d={data:p}).data[n[0]]._id,x=d.data[n[0]].row[n[1]].data,(l=x.map((function(e){var t=g[n[1]].list.filter((function(t){return t.id===e}));return(0,f.Z)({status:"nochange"},t[0])}))).push({status:"add",id:r,label:o,color:a}),d.data[n[0]].row[n[1]].data.push(r),(null===(s=d.data[n[0]].updater)||void 0===s?void 0:s._id)!==j._id&&(h={firstName:j.firstName,lastName:j.lastName,email:j.email,color:j.color},d.data[n[0]].updater=h),d.data[n[0]].updatedAt=new Date,m(d.data),e.next=12,(0,c.RQ)({data:d.data[n[0]],updater:j._id});case 12:e.sent.status?(Z={type:"activity",rowId:u,history:l,dataType:"multiSelect",sign:(0,G.Z)({},j._id,!0),creator:j,cellName:g[n[1]].name,cellId:t.id,columnId:g[n[1]].id},(0,c.Hw)(Z)):alert("server error!");case 14:W(null),D("");case 16:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),L=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){var o,a,s,d,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],s=(o={data:p}).data[n[0]]._id,d=o.data[n[0]].row[n[1]].data,a=d.map((function(e,t){var i=g[n[1]].list.filter((function(t){return t.id===e}));return(0,f.Z)({status:r===t?"remove":"nochange"},i[0])})),d.splice(r,1),o.data[n[0]].row[n[1]].data=d,m(o.data),e.next=9,(0,c.RQ)({data:o.data[n[0]],updater:j._id});case 9:e.sent.status?(l={type:"activity",rowId:s,history:a,dataType:"multiSelect",sign:(0,G.Z)({},j._id,!0),creator:j,cellName:g[n[1]].name,cellId:t.id,columnId:g[n[1]].id},(0,c.Hw)(l)):alert("server error!");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=(0,lt.$v)(),r=ue()(),i=g;i[n[1]].list.push({id:r,label:e,color:t,order:i[n[1]].list.length}),Z(i),(0,c.ZP)("POST","table/updateHeader",{data:{row:i,hId:h}}).then((function(e){e.status||alert("server error!")})),M(r,e,t)};return(0,s.useEffect)((function(){var e=g[n[1]].list.map((function(e,t){return e.index=t,e}));_(e)}),[g,n,t.data]),(0,V.jsxs)(d.Z,{sx:{position:"relative"},children:[(0,V.jsx)(l.Z,{className:"selectItems-wrap",sx:{border:"1px solid #0000003b",width:"100%",minHeight:34,borderRadius:1,flexWrap:"wrap",bgcolor:"#fff","&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,V.jsxs)(l.Z,{direction:"row",sx:{flexWrap:"wrap",alignItems:"center"},children:[t.data.length?(0,V.jsx)(V.Fragment,{children:t.data.map((function(e,t){var r,i,o=z.findIndex((function(t){return t.id===e}));return(0,V.jsxs)(k.Z,{component:"span",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:"3px",ml:"3px",height:18,borderRadius:50,bgcolor:g[n[1]].colored?null===(r=z[o])||void 0===r?void 0:r.color:"#b3b0b0",px:1,minWidth:18,mr:.5},children:[(0,V.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:null===(i=z[o])||void 0===i?void 0:i.label}),(0,V.jsx)(K.Z,{sx:{fontSize:14,ml:.5,color:"#fff"},onClick:function(){return L(t)}})]},t)}))}):null,(0,V.jsx)(S.Z,{disabled:"active"!==u||!g[n[1]].editable,onClick:function(e){W(e.currentTarget.parentElement.parentElement)},sx:{mt:.25,height:28,borderRadius:"3px",px:.5,cursor:"pointer",bgcolor:"#0000000d","&:hover":{bgcolor:"#0000001a"}},children:(0,V.jsx)(A.Z,{sx:{fontSize:12}})})]})}),(0,V.jsx)(y.ZP,{anchorEl:T,open:O,onClose:function(){W(null),D("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPaper-rounded":{width:r,mt:-1.5,minWidth:160}},children:(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(C.Z,{placeholder:"Find an option",onKeyDown:function(e){if("Enter"===e.key){var t=z.filter((function(e){return-1!==e.label.toLowerCase().search(F)}));t.length?M(t[0].id):b?U(F):(W(null),D(""))}},onChange:function(e){return D(e.target.value)},autoFocus:!0,sx:{pt:1,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),function(){var e=z.filter((function(e){return-1===t.data.findIndex((function(t){return t===e.id}))&&-1!==e.label.toLowerCase().search(F)}));return e.length?(0,V.jsx)(V.Fragment,{children:e.map((function(e,t){var r=e.label,i=e.color,o=e.id;return(0,V.jsx)(w.Z,{onClick:function(){return M(o,r,i)},children:(0,V.jsx)(k.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:g[n[1]].colored?i:"#b3b0b0",px:1,minWidth:18},children:(0,V.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:r})})},t)}))}):F&&b?(0,V.jsxs)(w.Z,{onClick:function(){return U(F)},children:[(0,V.jsx)(A.Z,{sx:{fontSize:16,position:"absolute",left:4}}),(0,V.jsxs)(k.Z,{sx:{pl:.5,width:"100%",overflow:"hidden",fontSize:13,whiteSpace:"break-spaces"},children:["create a new option named ",(0,V.jsx)("b",{children:F})]})]}):(0,V.jsx)(d.Z,{sx:{p:1}})}()]})})]})},xt=function(e){var t=e.baseVal,r=e.position,n=e.dataId,d=(0,s.useContext)(le.X),l=d.header,u=d.body,f=d.changeBody,x=d.selectEditable,h=d.selectEditabled,p=(0,s.useContext)(ct.E).user,m=(0,s.useState)(t),g=(0,a.Z)(m,2),Z=g[0],b=g[1],w=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,o,a){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.RQ)({data:t,updater:p._id});case 2:e.sent.status?(s={type:"activity",old:o,rowId:a,new:Z,dataType:"string",sign:(0,G.Z)({},p._id,!0),creator:p,cellName:l[r[1]].name,cellId:n,columnId:l[r[1]].id},(0,c.Hw)(s)):alert("server error!");case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),j=(0,s.useCallback)((function(){!function(e){var t,n={data:u},i=n.data[r[0]]._id,o=n.data[r[0]].row[r[1]].data;if(n.data[r[0]].row[r[1]].data=e,(null===(t=n.data[r[0]].updater)||void 0===t?void 0:t._id)!==p._id){var a={firstName:p.firstName,lastName:p.lastName,email:p.email,color:p.color};n.data[r[0]].updater=a}n.data[r[0]].updatedAt=new Date,w(n.data[r[0]],o,i),f(n.data),h(""),x("")}(Z)}),[Z]);return(0,V.jsx)(C.Z,{variant:"outlined",autoFocus:!0,value:Z,onBlur:j,onChange:function(e){return b(e.target.value)},sx:{width:"100%",height:"100%","& fieldset":{display:"none"},"& input":{height:"100%",p:1,fontSize:13}}})},ht=function(e){var t=e.data,r=e.position,n=e.onModal,l=e.status,u=e.isDel,f=e.group,x=(0,s.useContext)(le.X),h=x.header,p=x.body,m=x.modalChange,g=x.changeBody,Z=x.editable,b=x.editabled,w=x.selectEditable,j=x.selectEditabled,v=x.selectActive,y=(0,s.useContext)(ct.E).user,S=(0,s.useState)(t.data),I=(0,a.Z)(S,2),z=I[0],_=I[1],R=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,o,a){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.RQ)({data:n,updater:y._id});case 2:e.sent.status?(s={type:"activity",old:o,rowId:a,new:z,dataType:"string",sign:(0,G.Z)({},y._id,!0),creator:y,cellName:h[r[1]].name,cellId:t.id,columnId:h[r[1]].id},(0,c.Hw)(s)):alert("server error!");case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){z===t.data||u||(n&&!1===l||b===r.join("_"))&&(!function(){var e,t={data:p},n=t.data[r[0]]._id,i=t.data[r[0]].row[r[1]].data;if(t.data[r[0]].row[r[1]].data=z,(null===(e=t.data[r[0]].updater)||void 0===e?void 0:e._id)!==y._id){var o={firstName:y.firstName,lastName:y.lastName,email:y.email,color:y.color};t.data[r[0]].updater=o}t.data[r[0]].updatedAt=new Date,R(t.data[r[0]],i,n),g(t.data)}(),j("")),_(t.data)}),[b,r,m,l,n,u,t.data]),n?(0,V.jsx)(C.Z,{variant:"outlined",autoFocus:!0,disabled:"active"!==f||!h[r[1]].editable,value:z,onChange:function(e){return _(e.target.value)},onKeyDown:function(e){"Enter"!==e.key||n||(v(r[0]+1+"_"+r[1]),w(""),j(Z))},sx:{width:"100%",height:"100%","& input":{height:"100%",p:1.5,fontSize:13}}}):Z===r.join("_")&&"active"===f&&h[r[1]].editable?(0,V.jsx)(xt,{baseVal:z,position:r,dataId:t.id}):(0,V.jsx)(d.Z,{sx:{p:"6px"},children:(0,V.jsx)(k.Z,{component:"div",sx:{userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default"},children:z})})},pt=function(e){var t=e.data,r=e.position,n=e.onModal,l=e.status,u=e.isDel,f=e.group,x=(0,s.useContext)(le.X),h=x.header,p=x.body,m=x.modalChange,g=x.changeBody,Z=x.editabled,b=(0,s.useContext)(ct.E).user,w=(0,s.useState)(t.data),j=(0,a.Z)(w,2),v=j[0],y=j[1],S=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,o,a){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.RQ)({data:n,updater:b._id});case 2:e.sent.status?(s={type:"activity",old:o,rowId:a,new:v,dataType:"string",sign:(0,G.Z)({},b._id,!0),creator:b,cellName:h[r[1]].name,cellId:t.id,columnId:h[r[1]].id},(0,c.Hw)(s)):alert("server error!");case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){v===t.data||u||(n&&!1===l||Z===r.join("_"))&&function(){var e,t={data:p},n=t.data[r[0]]._id,i=t.data[r[0]].row[r[1]].data;if(t.data[r[0]].row[r[1]].data=v,(null===(e=t.data[r[0]].updater)||void 0===e?void 0:e._id)!==b._id){var o={firstName:b.firstName,lastName:b.lastName,email:b.email,color:b.color};t.data[r[0]].updater=o}t.data[r[0]].updatedAt=new Date,S(t.data[r[0]],i,n),g(t.data)}(),y(t.data)}),[Z,r,m,l,n,u,t.data]),n?(0,V.jsx)(C.Z,{variant:"outlined",defaultValue:v,multiline:!0,disabled:"active"!==f||!h[r[1]].editable,rows:4,onChange:function(e){return y(e.target.value)},sx:{width:"100%",height:"100%","& .MuiInputBase-multiline":{height:"100%"},"& textarea":{padding:.5,height:"100% !important",fontSize:13}}}):l&&"active"===f&&h[r[1]].editable?(0,V.jsx)(C.Z,{variant:"outlined",autoFocus:!0,defaultValue:v,multiline:!0,rows:2,onChange:function(e){return y(e.target.value)},sx:{width:"100%",height:"100%","& .MuiInputBase-multiline":{height:"100%"},"& fieldset":{display:n?"block":"none"},"& textarea":{padding:n?.5:0,height:"100% !important",fontSize:13}}}):(0,V.jsx)(d.Z,{sx:{p:"6px"},children:(0,V.jsx)(k.Z,{component:"div",sx:{userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default"},children:v})})},mt=function(e){var t=e.data,r=e.position,n=e.onModal,l=e.status,u=e.isDel,f=e.group,x=(0,s.useContext)(le.X),h=x.header,p=x.body,m=x.modalChange,g=x.changeBody,Z=x.editable,b=x.editabled,w=x.selectEditable,j=x.selectEditabled,v=x.selectActive,y=(0,s.useContext)(ct.E).user,S=(0,s.useState)(t.data),I=(0,a.Z)(S,2),z=I[0],_=I[1],R=function(e){"Enter"!==e.key||n||(v(r[0]+1+"_"+r[1]),w(""),j(Z))},N=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,o,a){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.RQ)({data:n,updater:y._id});case 2:e.sent.status?(s={type:"activity",old:o,rowId:a,new:z,dataType:"string",sign:(0,G.Z)({},y._id,!0),creator:y,cellName:h[r[1]].name,cellId:t.id,columnId:h[r[1]].id},(0,c.Hw)(s)):alert("server error!");case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){z===t.data||u||(n&&!1===l||b===r.join("_"))&&function(){var e,t={data:p},n=t.data[r[0]]._id,i=t.data[r[0]].row[r[1]].data;if(t.data[r[0]].row[r[1]].data=z,(null===(e=t.data[r[0]].updater)||void 0===e?void 0:e._id)!==y._id){var o={firstName:y.firstName,lastName:y.lastName,email:y.email,color:y.color};t.data[r[0]].updater=o}t.data[r[0]].updatedAt=new Date,N(t.data[r[0]],i,n),g(t.data)}(),_(t.data)}),[b,r,m,l,n,u,t.data]),n?(0,V.jsx)(C.Z,{variant:"outlined",autoFocus:!0,disabled:"active"!==f||!h[r[1]].editable,value:z,onChange:function(e){return _(e.target.value)},onKeyDown:R,sx:{width:"100%",height:"100%","& input":{height:"100%",p:1.5,fontSize:13}}}):Z===r.join("_")&&"active"===f&&h[r[1]].editable?(0,V.jsx)(C.Z,{variant:"outlined",autoFocus:!0,value:z,onChange:function(e){return _(e.target.value)},onKeyDown:R,sx:{width:"100%",height:"100%","& fieldset":{display:"none"},"& input":{height:"100%",p:1,fontSize:13}}}):(0,V.jsx)(d.Z,{sx:{p:"6px"},children:(0,V.jsx)(k.Z,{component:"div",sx:{userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default"},children:(0,V.jsx)("a",{href:z,target:"_blank",rel:"noreferrer",children:z})})})},gt=r(2196),Zt=r(7792),bt=r(6571),wt=function(e){var t=e.data,r=e.position,n=e.group,a=(0,s.useContext)(le.X),d=a.header,l=a.body,u=a.changeBody,x=(0,s.useContext)(ct.E).user,h=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,o,a,s){var l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.RQ)({data:n,updater:x._id});case 2:e.sent.status?(l={type:"activity",old:o,new:a,dataType:"date",sign:(0,G.Z)({},x._id,!0),creator:x,rowId:s,cellName:d[r[1]].name,cellId:t.id,columnId:d[r[1]].id},(0,c.Hw)(l)):alert("server error!");case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,i){return e.apply(this,arguments)}}();return(0,V.jsx)(bt._,{dateAdapter:Zt.y,children:(0,V.jsx)(gt.M,{disabled:"active"!==n||!d[r[1]].editable,value:t.data,onChange:function(e){!function(e){var t,n={data:l},i=n.data[r[0]]._id,o=n.data[r[0]].row[r[1]].data;if(n.data[r[0]].row[r[1]].data=e,(null===(t=n.data[r[0]].updater)||void 0===t?void 0:t._id)!==x._id){var a={firstName:x.firstName,lastName:x.lastName,email:x.email,color:x.color};n.data[r[0]].updater=a}n.data[r[0]].updatedAt=new Date,h(n.data[r[0]],o,e,i),u(n.data)}(e)},renderInput:function(e){return(0,V.jsx)(C.Z,(0,f.Z)((0,f.Z)({},e),{},{sx:{width:"100%",height:"100%","& fieldset":{display:"none"},"& div":{height:"100%"},"& input":{padding:0,height:"100%",px:.7,fontSize:13}}}))}})})},jt=function(e){var t=e.data,r=e.position,n=e.onModal,l=e.group,u=(0,s.useContext)(le.X),f=u.header,x=u.body,h=u.changeBody,p=(0,s.useContext)(ct.E).user,m=(0,s.useState)(t.data),g=(0,a.Z)(m,2),Z=g[0],b=g[1],w=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,o,a){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.RQ)({data:n,updater:p._id});case 2:e.sent.status?(s={type:"activity",old:!o,rowId:a,new:o,dataType:"checkBox",sign:(0,G.Z)({},p._id,!0),creator:p,cellName:f[r[1]].name,cellId:t.id,columnId:f[r[1]].id},(0,c.Hw)(s)):alert("server error!");case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),j=function(e){var t,n={data:x},i=n.data[r[0]]._id;if(n.data[r[0]].row[r[1]].data=e.target.checked,(null===(t=n.data[r[0]].updater)||void 0===t?void 0:t._id)!==p._id){var o={firstName:p.firstName,lastName:p.lastName,email:p.email,color:p.color};n.data[r[0]].updater=o}n.data[r[0]].updatedAt=new Date,w(n.data[r[0]],e.target.checked,i),h(n.data)};return(0,s.useEffect)((function(){b(t.data)}),[r,t.data]),n?(0,V.jsx)(Be.Z,{disabled:"active"!==l||!f[r[1]].editable,checked:Z,onChange:j,sx:{p:0,"& .MuiSvgIcon-root":{fontSize:28}}}):(0,V.jsx)(d.Z,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,V.jsx)(Be.Z,{disabled:"active"!==l||!f[r[1]].editable,checked:Z,onChange:j,sx:{p:"0px !important","& .MuiSvgIcon-root":{fontSize:28}}})})},vt=function(e){var t=e.data;return e.onModal?(0,V.jsx)(V.Fragment,{children:null!==t&&void 0!==t&&t.data?(0,V.jsx)(l.Z,{sx:{height:"100%",justifyContent:"center",width:"100%",minHeight:34,borderRadius:1,flexWrap:"wrap",bgcolor:"#fff","&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:Le()(t.data).format("M/d/yyyy h:mm a")}):null}):(0,V.jsx)(d.Z,{sx:{p:"6px"},children:null!==t&&void 0!==t&&t.data?(0,V.jsx)(k.Z,{component:"div",sx:{userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default"},children:Le()(t.data).format("DD/MM/yyyy h:mm a")}):null})},yt=function(e){var t=e.onModal,r=e.data;return t?(0,V.jsx)(l.Z,{sx:{height:"100%",justifyContent:"center",width:"100%",minHeight:34,borderRadius:1,flexWrap:"wrap",bgcolor:"#fff","&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:function(){var e,t,n;return r.data&&r.data.color?(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,V.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:22,height:22,border:"1px solid #eee",borderRadius:50,color:"#fff",bgcolor:r.data&&r.data.color?r.data.color:"#999",zIndex:2},children:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.firstName[0]}),(0,V.jsxs)(k.Z,{component:"span",sx:{bgcolor:"#eee",userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default",pr:1,pl:2.5,lineHeight:1.4,borderRadius:4,ml:-2},children:[null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.firstName," ",null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.lastName]})]}):null}()}):(0,V.jsx)(d.Z,{sx:{p:"6px"},children:function(){var e,t,n;return r.data?(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,V.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:22,height:22,border:"1px solid #eee",borderRadius:50,color:"#fff",bgcolor:r.data&&r.data.color?r.data.color:"#999",zIndex:2},children:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.firstName[0]}),(0,V.jsxs)(k.Z,{component:"span",sx:{bgcolor:"#eee",userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default",pr:1,pl:2.5,lineHeight:1.4,borderRadius:4,ml:-2},children:[null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.firstName," ",null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.lastName]})]}):null}()})},Ct=function(e){var t,r=e.y,n=e.open,u=e.handleClose,p=e.changeItem,m=e.group,g=(0,H.Z)().user,Z=(0,P.Z)(),b=Z.header,j=Z.body,I=Z.changeBody,z=Z.users,N=Z.isAdmin,W=Z.hId,A=(0,s.useState)(0),F=(0,a.Z)(A,2),O=F[0],L=F[1],Q=(0,s.useState)([]),X=(0,a.Z)(Q,2),J=X[0],Y=X[1],$=(0,s.useState)(!1),q=(0,a.Z)($,2),ee=q[0],te=q[1],re=(0,s.useState)(""),ne=(0,a.Z)(re,2),ie=ne[0],oe=ne[1],ae=(0,s.useState)([]),se=(0,a.Z)(ae,2),de=se[0],le=se[1],ce=(0,s.useState)(!1),ue=(0,a.Z)(ce,2),fe=ue[0],xe=ue[1],pe=(0,s.useState)(!0),me=(0,a.Z)(pe,2),ge=me[0],Ze=me[1],be=(0,s.useState)(null),we=(0,a.Z)(be,2),je=we[0],ve=we[1],ye=(0,s.useState)([]),Ce=(0,a.Z)(ye,2),Se=Ce[0],ke=Ce[1],Ie=(0,s.useState)(0),_e=(0,a.Z)(Ie,2),Re=_e[0],Ne=_e[1],We=(0,s.useState)(!1),Be=(0,a.Z)(We,2),Ae=Be[0],De=Be[1],Oe=(0,s.useState)(1),Me=(0,a.Z)(Oe,2),Pe=Me[0],rt=Me[1],nt=(0,s.useState)(null),it=(0,a.Z)(nt,2),ot=it[0],at=it[1],st=(0,s.useState)([]),lt=(0,a.Z)(st,2),ct=lt[0],xt=lt[1],gt=(0,s.useState)(""),Zt=(0,a.Z)(gt,2),bt=Zt[0],Ct=Zt[1],St=Boolean(ot),kt=Boolean(je),It=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(!0),t={data:j},(0,c.ZP)("POST","table/deleteRow",{data:t.data[r]}).then((function(e){e.status||alert("server error!")})),t.data.splice(r,1),I(t.data),u();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var a,s,d,l,u,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=(s={data:j}).data[r]._id,l=s.data[r].row[n].data[o],s.data[r].row[n].data.splice(o,1),(null===(a=s.data[r].updater)||void 0===a?void 0:a._id)!==g._id&&(u={firstName:g.firstName,lastName:g.lastName,email:g.email,color:g.color},s.data[r].updater=u),s.data[r].updatedAt=new Date,I(s.data),e.next=9,(0,c.RQ)({data:s.data[r],updater:g._id});case 9:e.sent.status?(h={type:"activity",rowId:d,history:{status:"remove",data:[l]},dataType:"attached",sign:(0,G.Z)({},g._id,!0),creator:g,cellName:b[n].name,cellId:J.id,columnId:b[n].id},(0,c.Hw)(h),Y([].concat((0,x.Z)(J),[(0,f.Z)((0,f.Z)({},h),{},{updatedAt:new Date})]))):alert("server error!");case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),_t=function(e){ve(e?e.currentTarget:null)},Rt=function(e){rt(e),document.getElementsByClassName("commentBoxWrap")[0].scroll({top:document.getElementsByClassName("commentBox")[0].clientHeight,behavior:"smooth"}),ve(null)},Nt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.kI)(j[r]._id,g._id);case 2:if((t=e.sent).status){for((n={data:j}).data.sort((function(e,t){return e.order-t.order})),o=j[r].order+1;o<n.data.length;o++)n.data[o].order++;t.data.creator=g,t.data.updater=g,t.data.updatedAt=new Date,t.data.createdAt=new Date,n.data.splice(j[r].order+1,0,t.data),I((0,x.Z)(n.data)),p(!0)}else alert("Server error!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,n,o,a,s,d,l,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],g.allowIds&&g.allowIds[W]&&(r=g.allowIds[W]),e.next=4,(0,c.Bd)({rowId:t,allowIds:r});case 4:if((n=e.sent).status){Y(n.data),o={},a=(0,h.Z)(n.data);try{for(a.s();!(s=a.n()).done;)d=s.value,o[d.creator._id]=!0}catch(i){a.e(i)}finally{a.f()}for(l=z.filter((function(e){return Object.keys(o).findIndex((function(t){return t===e._id}))>-1})),u=0;u<Object.keys(o).length;u++);ke(l)}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){n&&(te(!1),Tt(j[r]._id))}),[n,r]),(0,s.useEffect)((function(){J.length&&document.getElementsByClassName("commentBoxWrap")[0]&&document.getElementsByClassName("commentBox")[0].lastChild&&document.getElementsByClassName("commentBoxWrap")[0].scroll({top:document.getElementsByClassName("commentBox")[0].clientHeight+document.getElementsByClassName("commentBox")[0].lastChild.clientHeight,behavior:"smooth"})}),[J]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(_.Z,{open:n,maxWidth:"lg",onClose:function(){u()},sx:{"& .MuiDialog-paper":{height:"calc(100% - 64px)",width:"100%"}},children:[(0,V.jsx)(R.Z,{sx:{borderBottom:"1px solid #bdbdbd"},children:(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,V.jsx)(S.Z,{onClick:function(){return p(!1)},disabled:0===r,children:(0,V.jsx)(Ge.Z,{sx:{fontSize:16}})}),(0,V.jsx)(S.Z,{onClick:function(){return p(!0)},disabled:r===j.length-1,children:(0,V.jsx)(M.Z,{sx:{fontSize:16}})})]}),(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",children:["Developer"!==g.role&&(0,V.jsx)(S.Z,{onClick:function(){return It()},children:(0,V.jsx)(D.Z,{sx:{fontSize:15}})}),(0,V.jsx)(S.Z,{onClick:function(){return Nt()},children:(0,V.jsx)(he.Z,{sx:{fontSize:15}})}),(0,V.jsx)(S.Z,{onClick:function(){return Ze(!ge)},children:ge?(0,V.jsx)($e.Z,{sx:{fontSize:15}}):(0,V.jsx)(Ye.Z,{sx:{fontSize:15}})}),(0,V.jsx)(d.Z,{sx:{width:"1px",height:15,bgcolor:"gray",mx:2}}),(0,V.jsx)(S.Z,{onClick:u,children:(0,V.jsx)(K.Z,{sx:{fontSize:15}})})]})]})}),(0,V.jsx)(T.Z,{sx:{p:0},children:(0,V.jsxs)(Ve.ZP,{container:!0,sx:{height:"100%"},children:[(0,V.jsx)(Ve.ZP,{item:!0,md:ge?8:12,sx:{height:"100%",overflow:"auto",borderRight:"1px solid #bdbdbd",p:6,pt:4},children:(0,V.jsx)(Ve.ZP,{container:!0,spacing:2,sx:{maxWidth:"640px",m:"auto"},children:null===(t=j[r])||void 0===t?void 0:t.row.map((function(e,t){return(0,V.jsx)(s.Fragment,{children:b[t].allowed?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ve.ZP,{item:!0,md:3,sm:12,sx:{order:2*b[t].order},children:(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{opacity:.75},children:[(0,V.jsx)(Te.Z,{type:b[t].type,editable:b[t].editable}),(0,V.jsx)(k.Z,{sx:{opacity:.75,ml:.5,fontSize:13,color:b[t].editable?"#16cd92":"#333333"},children:b[t].name})]})}),(0,V.jsx)(Ve.ZP,{item:!0,md:9,sm:12,sx:{order:2*b[t].order+1},children:function(){switch(b[t].type){case"text":case"email":return(0,V.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,V.jsx)(ht,{group:m,data:e,status:n,position:[r,t],onModal:!0,isDel:ee})});case"checkBox":return(0,V.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,V.jsx)(jt,{group:m,data:e,status:n,position:[r,t],onModal:!0,isDel:ee})});case"link":return(0,V.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,V.jsx)(mt,{group:m,data:e,status:n,position:[r,t],onModal:!0,isDel:ee})});case"longText":return(0,V.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,V.jsx)(pt,{group:m,data:e,status:n,position:[r,t],onModal:!0,isDel:ee})});case"select":return(0,V.jsx)(ut,{group:m,data:e,status:!1,height:38,position:[r,t]});case"multiSelect":return(0,V.jsx)(ft,{group:m,data:e,status:!1,height:38,position:[r,t]});case"date":return(0,V.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,V.jsx)(wt,{group:m,data:e,position:[r,t]})});case"createdAt":return(0,V.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,V.jsx)(vt,{data:{data:j[r].createdAt},onModal:!0})});case"updatedAt":return(0,V.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,V.jsx)(vt,{data:{data:j[r].updater?j[r].updatedAt:null},onModal:!0})});case"createdBy":return(0,V.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,V.jsx)(yt,{data:{data:j[r].creator},onModal:!0})});case"updatedBy":return(0,V.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,V.jsx)(yt,{data:{data:j[r].updater},onModal:!0})});case"attached":return e.data||(e.data=[]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(d.Z,{sx:{width:"100%",mb:2},children:(0,V.jsx)(v.Z,{disabled:"active"!==m||!b[t].editable,variant:"outlined",sx:{color:"#333333",fontSize:11,textTransform:"capitalize",py:.5,px:1},startIcon:(0,V.jsx)(Je.Z,{sx:{fontSize:"15px !important"}}),onClick:function(){return function(e){L(e),De(!0)}(t)},children:"Attach file"})}),(0,V.jsx)(Ve.ZP,{container:!0,spacing:2,children:e.data.map((function(e,n){return(0,V.jsxs)(Ve.ZP,{item:!0,md:6,children:[(0,V.jsx)(d.Z,{sx:{height:250,cursor:"pointer",bgcolor:"#fafafa",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #00000052",overflow:"hidden",borderRadius:2,mb:2},children:(0,V.jsx)(d.Z,{alt:"img",component:"img",src:e.mimetype.startsWith("image")?"".concat(Ee.P_).concat(e.filename):(0,U.Pk)(e),sx:{height:e.mimetype.startsWith("image")?"auto":100,maxWidth:"100%",maxHeight:"100%"},onClick:function(){return function(e,t,r){le(j[e].row[t].data),Ne(r),xe(!0)}(r,t,n)}})}),(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{position:"relative"},children:[(0,V.jsxs)(k.Z,{sx:{fontSize:13,width:"calc(100% - 60px)",textOverflow:"ellipsis",overflow:"hidden"},children:[e.originalname," "]}),(0,V.jsxs)(l.Z,{direction:"row",sx:{position:"absolute",bottom:0,right:0,bgcolor:"#fff"},children:[(0,V.jsx)(S.Z,{sx:{p:0,mr:1},onClick:function(){return t=e,void(0,c.Sv)(t);var t},children:(0,V.jsx)(qe.Z,{})}),(0,V.jsx)(S.Z,{sx:{p:0},onClick:function(){return zt(e,t,n)},children:(0,V.jsx)(D.Z,{})})]})]})]},n)}))})]});default:return(0,V.jsx)(C.Z,{size:"small",sx:{width:"100%"},multiline:!0})}}()})]}):null},t)}))})}),(0,V.jsx)(Ve.ZP,{item:!0,md:4,sx:{height:"100%",display:ge?"block":"none"},children:(0,V.jsxs)(l.Z,{sx:{height:"100%",pb:2},justifyContent:"space-between",children:[(0,V.jsxs)(l.Z,{sx:{p:2,borderBottom:"1px solid #bdbdbd"},justifyContent:"flex-start",alignItems:"flex-start",children:[(0,V.jsxs)(l.Z,{children:[(0,V.jsx)(v.Z,{size:"small",endIcon:(0,V.jsx)(ze.Z,{sx:{fontSize:16}}),onClick:_t,sx:{px:1,fontSize:13,color:"#4d4d4d",textTransform:"capitalize","&:hover":{bgcolor:"#0000000d"}},children:Ee.Jg[Pe].label}),N?(0,V.jsx)(Ue.Z,{anchorEl:je,open:kt,onClose:function(){return _t(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Ee.Jg.map((function(e,t){return t===Pe?(0,V.jsxs)(w.Z,{onClick:function(){return Rt(t)},children:[(0,V.jsx)(B.Z,{children:(0,V.jsx)(Ke.Z,{sx:{fontSize:15}})}),e.label]},t):(0,V.jsx)(w.Z,{onClick:function(){return Rt(t)},children:(0,V.jsx)(E.Z,{inset:!0,children:e.label})},t)}))}):null]}),(0,V.jsx)(l.Z,{direction:"row",children:Se.length?(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,V.jsx)(Xe.Z,{max:20,sx:{"& .MuiAvatarGroup-avatar":{borderWidth:"0px !important",color:"#fff",width:20,height:20,fontSize:9,textTransform:"uppercase"}},children:Se.map((function(e,t){return(0,V.jsx)(Qe.Z,{sx:{borderWidth:"0px !important",color:"#fff",width:20,height:20,fontSize:9,bgcolor:e.color?e.color:"#bdbdbd",textTransform:"uppercase"},alt:e.firstName,src:"/static/images/avatar/1.jpg"},t)}))}),(0,V.jsx)(k.Z,{sx:{ml:.5,fontSize:11,opacity:.75},children:"".concat(Se.length>1?"are":"is"," following this.")})]}):null})]}),(0,V.jsx)(d.Z,{className:"commentBoxWrap",sx:{px:2,height:"100%",overflow:"auto"},children:(0,V.jsx)(d.Z,{className:"commentBox",children:J.filter((function(e){return!Ee.Jg[Pe].type||e.type===Ee.Jg[Pe].type})).map((function(e,t){if("activity"===e.type||"workflow"===e.type)return(0,V.jsx)(d.Z,{sx:{py:1},children:(0,V.jsxs)(l.Z,{direction:"row",children:[function(){var t=z.filter((function(t){return t._id===e.creator._id}))[0];return(0,V.jsx)(Qe.Z,{sx:{bgcolor:t.color?t.color:"#999",textTransform:"uppercase",color:"white",mr:1,width:24,height:24,fontSize:12},alt:"Trevor Henderson",src:"/static/images/avatar/5.jpg",children:e.creator.firstName[0]})}(),(0,V.jsxs)(d.Z,{sx:{width:"100%"},children:[(0,V.jsxs)(l.Z,{sx:{fontSize:12,mb:.1},direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,V.jsx)(k.Z,{sx:{fontSize:12},children:e.creator.email===g.email?"You":"".concat(e.creator.firstName," ").concat(e.creator.lastName)}),(0,V.jsx)(He.Z,{date:new Date(e.updatedAt),locale:"en-US"})]}),(0,V.jsxs)(l.Z,{sx:{bgcolor:"#f2f2f2",width:"100%",borderRadius:1,fontSize:13,py:1,px:1},children:[(0,V.jsx)(k.Z,{sx:"workflow"===e.type?{fontSize:12,fontWeight:600}:{fontSize:9},children:function(){if("workflow"===e.type){var t="",r=J.filter((function(e){return"workflow"===e.type})).sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})).filter((function(t){return new Date(t.createdAt)<new Date(e.createdAt)})).pop();if(r){var n=new Date(r.createdAt),i=new Date(e.createdAt).getTime()-n.getTime(),o=Math.floor(i/864e5),a=i%864e5,s=Math.floor(a/36e5),d=a%36e5,l=Math.floor(d/6e4),c=d%6e4,u=Math.floor(c/1e3);o&&(t+=o,t+=o>1?" days ":" day "),s&&(t+=s,t+=s>1?" hours ":" hour "),l&&(t+=l,t+=l>1?" minutes ":" minute "),u&&!t&&(t+=u,t+=u>1?" seconds ":" second ")}return t?e.cellName+" - "+t:e.cellName}return e.cellName}()}),(0,V.jsx)(d.Z,{sx:{display:"flex",mt:.5},children:"string"===e.dataType?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,bgcolor:"#ffdce5",textDecoration:"workflow"===e.type?"":"line-through",mr:.2},children:e.old}),(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,bgcolor:"#d1f7c4"},children:e.new})]}):"date"===e.dataType?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,bgcolor:"#ffdce5",textDecoration:"line-through",mr:.2},children:e.old?Le()(e.old).format("MMMM D, yyyy"):""}),(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,bgcolor:"#d1f7c4"},children:e.new?Le()(e.new).format("MMMM D, yyyy"):""})]}):"checkBox"===e.dataType?(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(k.Z,{component:"span",sx:{display:"flex",alignItems:"center",fontSize:13,bgcolor:"true"===e.new?"#d1f7c4":"#ffdce5",textDecoration:"line-through",mr:.2},children:(0,V.jsx)(Ke.Z,{sx:{color:"rgb(32, 201, 51)"}})})}):"select"===e.dataType?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(d.Z,{sx:{border:"1px solid #93e088",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5,mr:.2},children:(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.color},children:e.new})}),e.old?(0,V.jsx)(d.Z,{sx:{border:"1px solid #ff9eb7",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5},children:(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.oldColor,textDecoration:"line-through"},children:e.old})}):null]}):"multiSelect"===e.dataType?(0,V.jsx)(V.Fragment,{children:e.history.map((function(e,t){return"add"===e.status?(0,V.jsx)(d.Z,{sx:{border:"1px solid #93e088",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5,mr:.2},children:(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.color},children:e.label})},t):"remove"===e.status?(0,V.jsx)(d.Z,{sx:{border:"1px solid #ff9eb7",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5},children:(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.color,textDecoration:"line-through"},children:e.label})},t):(0,V.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5},children:(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.color},children:e.label})},t)}))}):"attached"===e.dataType?(0,V.jsx)(l.Z,{direction:"row",spacing:.5,children:e.history.data.map((function(t,r){return(0,V.jsx)(d.Z,{sx:{overflow:"hidden",width:48,height:48,border:"add"===e.history.status?"2px solid #93e088":"2px solid #ff9eb7",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:.5},children:(0,V.jsx)(d.Z,{component:"img",src:t.mimetype.startsWith("image")?"".concat(Ee.P_).concat(t.filename):(0,U.Pk)(t),sx:{width:48,height:48,maxHeight:48}})},r)}))}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,bgcolor:"#ffdce5",textDecoration:"line-through",mr:.2},children:e.old}),(0,V.jsx)(k.Z,{component:"span",sx:{fontSize:13,bgcolor:"#d1f7c4"},children:e.new})]})})]})]})]})},t);var r=-1;return e.whiteList&&e.whiteList.length&&-1===(r=e.whiteList.findIndex((function(e){return e===g._id})))?null:(0,V.jsx)(d.Z,{sx:{py:1},children:(0,V.jsxs)(l.Z,{direction:"row",children:[function(){var t=z.filter((function(t){return t._id===e.creator._id}))[0];return(0,V.jsx)(Qe.Z,{sx:{bgcolor:t.color?t.color:"#999",textTransform:"uppercase",color:"white",mr:1,width:24,height:24,fontSize:12},alt:"Trevor Henderson",src:"/static/images/avatar/5.jpg",children:e.creator.firstName[0]})}(),(0,V.jsxs)(d.Z,{sx:{width:"100%"},children:[(0,V.jsxs)(l.Z,{sx:{fontSize:12,mb:.1},direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,V.jsx)(k.Z,{sx:{fontSize:12},children:e.creator.email===g.email?"You":"".concat(e.creator.firstName," ").concat(e.creator.lastName)}),(0,V.jsx)(He.Z,{date:new Date(e.updatedAt),locale:"en-US"})]}),(0,V.jsx)(d.Z,{children:(0,V.jsxs)(d.Z,{sx:{display:"inline-block",position:"relative",bgcolor:"#2d7ff9",borderRadius:2,color:"#fff",fontSize:13,py:.5,px:1,pr:5},children:[e.new,-1!==r&&(0,V.jsx)(Fe.Z,{title:"".concat(e.creator.firstName," ").concat(e.creator.lastName),children:(0,V.jsx)(et.Z,{sx:{position:"absolute",right:4,bottom:2,fontSize:16}})})]})})]})]})},t)}))})}),(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(l.Z,{sx:{px:1,flexWrap:"wrap"},direction:"row",children:ct.map((function(e,t){return(0,V.jsxs)(l.Z,{direction:"row",sx:{display:"inline-flex",mb:1,mr:1},onClick:function(){return function(e){var t=ct;t.splice(e,1),xt((0,x.Z)(t))}(t)},children:[(0,V.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:22,height:22,border:"1px solid #eee",borderRadius:50,color:"#fff",bgcolor:e&&e.color?e.color:"#999",zIndex:2},children:null===e||void 0===e?void 0:e.firstName[0]}),(0,V.jsxs)(k.Z,{component:"span",sx:{bgcolor:"#eee",cursor:"pointer",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",pr:1,pl:2.5,lineHeight:1.4,borderRadius:4,ml:-2},children:[e.firstName," ",e.lastName]})]},t)}))}),(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{p:2,pb:0,borderTop:"1px solid #bdbdbd"},children:[(0,V.jsx)(Qe.Z,{sx:{bgcolor:function(e){return e.palette.background.default},color:"#fff",width:24,height:24,textTransform:"uppercase"},alt:"Trevor Henderson",src:"/static/images/avatar/5.jpg",children:g.firstName[0]}),(0,V.jsx)(C.Z,{id:"message-handle",sx:{ml:1,width:"100%","& input":{px:1,py:1}},onKeyDown:function(e){if("Enter"===e.key&&ie){var t={data:j},n={type:"comment",rowId:t.data[r]._id,new:ie,dataType:"string",columnId:"chat",sign:(0,G.Z)({},g._id,!0),creator:g,whiteList:ct.length?[].concat((0,x.Z)(ct.map((function(e){return e._id}))),[g._id]):[]};(0,c.Hw)(n),Y([].concat((0,x.Z)(J),[(0,f.Z)((0,f.Z)({},n),{},{updatedAt:new Date})])),oe(""),t.data[r].chat?t.data[r].chat+=1:t.data[r].chat=1,I(t.data),xt([])}},value:ie,onChange:function(e){return function(e){oe(e.target.value),"@"===e.target.value&&at(e.currentTarget)}(e)}})]}),(0,V.jsx)(y.ZP,{anchorEl:ot,open:St,onClose:function(e){at(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPopover-paper":{boxShadow:"0 0 0 2px #00000040",maxHeight:"80vh"}},children:(0,V.jsx)(d.Z,{sx:{py:1,px:1,width:200},children:(0,V.jsxs)(l.Z,{spacing:1,children:[(0,V.jsx)(C.Z,{sx:{ml:1,"& input":{px:1,py:1,fontSize:12}},onKeyDown:function(e){if("Enter"===e.key){var t=z.filter((function(e){return-1!==(e.firstName+" "+e.lastName).search(bt)}));if(t.length)-1===ct.findIndex((function(e){return e._id===t[0]._id}))&&xt([].concat((0,x.Z)(ct),[t[0]])),oe(ie.slice(0,-1));at(null),Ct("")}},value:bt,onChange:function(e){return Ct(e.target.value)},autoFocus:!0}),z.filter((function(e){return-1!==(e.firstName+" "+e.lastName).search(bt)})).map((function(e,t){return(0,V.jsxs)(v.Z,{sx:{justifyContent:"flex-start"},onClick:function(){return function(e){-1===ct.findIndex((function(t){return t._id===e._id}))&&xt([].concat((0,x.Z)(ct),[e])),at(null),Ct(""),oe(ie.slice(0,-1))}(e)},children:[(0,V.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:22,height:22,border:"1px solid #eee",borderRadius:50,color:"#fff",bgcolor:e&&e.color?e.color:"#999",zIndex:2},children:null===e||void 0===e?void 0:e.firstName[0]}),(0,V.jsxs)(k.Z,{component:"span",sx:{bgcolor:"#eee",userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default",pr:1,pl:2.5,lineHeight:1.4,borderRadius:4,ml:-2},children:[e.firstName," ",e.lastName]})]},t)}))]})})})]})]})})]})})]}),(0,V.jsx)(tt.Z,{open:fe,close:function(){return xe(!1)},data:de,index:Re}),(0,V.jsx)(dt,{open:Ae,close:function(){De(!1)},position:[r,O]})]})},St=function(e){var t,r=e.id,n=e.y,u=e.group,f=(0,s.useState)(0),h=(0,a.Z)(f,2),p=h[0],m=h[1],g=(0,s.useState)(0),Z=(0,a.Z)(g,2),b=Z[0],w=Z[1],j=(0,s.useState)(!1),y=(0,a.Z)(j,2),k=y[0],I=y[1],z=(0,s.useState)(!1),N=(0,a.Z)(z,2),W=N[0],B=N[1],E=(0,s.useState)(""),A=(0,a.Z)(E,2),F=A[0],D=A[1],O=(0,H.Z)().user,M=(0,P.Z)(),L=M.body,U=M.isFilter,Q=M.filterBody,X=M.deleteRowList,K=M.setDeleteRowList,J=M.isAdmin,Y=M.changeBody,$=M.selectEditabled,q=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(""),e.next=3,(0,c.WE)(r,!0);case 3:e.sent.status&&(n={type:"workflow",rowId:L[b]._id,new:"Approved",dataType:"string",sign:(0,G.Z)({},O._id,!0),creator:O,cellName:"Approve",columnId:"process"},(0,c.Hw)(n),L[b].done=!0,Y(L));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(""),e.next=3,(0,c.WE)(r,!1);case 3:e.sent.status&&(n={type:"workflow",rowId:L[b]._id,old:F,dataType:"string",sign:(0,G.Z)({},O._id,!0),creator:O,cellName:"Reject",columnId:"process"},(0,c.Hw)(n),L[b].done=!1,Y(L),te());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){B(!W)},re=(0,s.useMemo)((function(){return X.findIndex((function(e){return e===r}))>-1}),[X,r]);return(0,s.useEffect)((function(){var e=L.findIndex((function(e){return e._id===r}));w(e),m(e)}),[L,r]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(l.Z,{direction:"row",className:"cell first-cell",sx:{width:Ee.aY,height:32,bgcolor:"#fff",borderTop:"1px solid #dde1e3",borderRight:"1px solid #dde1e3"},children:[(0,V.jsxs)(d.Z,{sx:{borderRight:"1px solid #dde1e3",display:"inline-block",position:"relative",height:32,width:32,zIndex:2,textAlign:"center"},children:[re?null:(0,V.jsx)(d.Z,{className:"row-num",sx:{position:"absolute",width:"100%",top:7,color:"#707070",textAlign:"center",fontSize:12,userSelect:"none"},children:n+1}),(0,V.jsx)(Be.Z,{checked:re,onChange:function(e){if(e.target.checked)K([].concat((0,x.Z)(X),[r]));else{var t=X.filter((function(e){return e!==r}));K((0,x.Z)(t))}},className:"show-head",sx:{opacity:re?1:0,position:"absolute",left:7,top:0,width:11,"& .MuiSvgIcon-root":{fontSize:15}}})]}),(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-around",sx:{width:"calc(100% - 32px)"},children:[(0,V.jsx)(d.Z,{children:(0,V.jsx)(l.Z,{direction:"row",sx:{position:"relative",height:"100%",alignItems:"center",cursor:"pointer"},children:(0,V.jsx)(S.Z,{onClick:function(){return I(!0)},color:"info",sx:{height:32,width:32,display:"flex",alignItems:"center",justifyContent:"center"},children:function(){var e,t=U?Q:L;return(0,V.jsx)(V.Fragment,{children:null!==(e=t[b])&&void 0!==e&&e.chat?(0,V.jsx)(d.Z,{sx:{fontSize:16,color:"#2d7ff9",borderRadius:5,p:.5,opacity:1},children:L[b].chat}):(0,V.jsx)(Me.Z,{className:"show-head",sx:{fontSize:16,color:"#2d7ff9"}})})}()})})}),"Project Manager"===O.role||J?(0,V.jsx)(V.Fragment,{children:null!==(t=L[b])&&void 0!==t&&t.done?(0,V.jsx)(Fe.Z,{arrow:!0,title:"Reject",children:(0,V.jsx)(S.Z,{color:"error",onClick:te,sx:{height:32,width:32,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,V.jsx)(Oe.Z,{sx:{fontSize:18,color:"#7a7e81","&:hover":{color:"#f94949"}}})})}):(0,V.jsx)(Fe.Z,{arrow:!0,title:"Approve",children:(0,V.jsx)(S.Z,{color:"success",onClick:q,sx:{height:32,width:32,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,V.jsx)(De.Z,{sx:{fontSize:18,color:"#7a7e81","&:hover":{color:"#5ac75f"}}})})})}):null]})]},-2),(0,V.jsx)(Ct,{y:p,open:k,handleClose:function(){I(!1),m(b)},changeItem:function(e){m(e?p+1:p-1)},group:u}),(0,V.jsxs)(_.Z,{open:W,onClose:te,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,V.jsx)(R.Z,{id:"alert-dialog-title",children:"Rejection Reason"}),(0,V.jsxs)(T.Z,{children:[(0,V.jsx)(l.Z,{spacing:1,children:(0,V.jsx)(C.Z,{required:!0,type:"text",multiline:!0,rows:4,value:F,error:!F,onChange:function(e){return D(e.target.value)},placeholder:"",sx:{width:500}})}),(0,V.jsxs)(l.Z,{direction:"row",justifyContent:"flex-end",sx:{pt:2},children:[(0,V.jsx)(v.Z,{variant:"contained",color:"error",onClick:te,sx:{mr:1},children:"Cancel"}),(0,V.jsx)(v.Z,{variant:"contained",color:"info",disabled:!F,onClick:ee,autoFocus:!0,children:"Reject"})]})]})]})]})},kt=function(e){var t=e.data,r=e.focus,n=e.position,u=e.group,f=(0,s.useState)(!1),x=(0,a.Z)(f,2),p=x[0],m=x[1],g=(0,s.useState)(!1),Z=(0,a.Z)(g,2),b=Z[0],w=Z[1],j=(0,s.useState)(0),v=(0,a.Z)(j,2),y=v[0],S=v[1],k=(0,H.Z)().user,I=(0,P.Z)(),z=I.header,_=I.body,R=I.changeBody,N=function(e){r&&(S(e),m(!0))},T=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){var o,a,s,d,l,u,f,x,p,m,g,Z;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.clipboardData.items,a=[].slice.call(o).filter((function(e){return-1!==e.type.indexOf("image")})),0!==a.length){e.next=4;break}return e.abrupt("return");case 4:return s=a[0],d=s.getAsFile(),(l=new FormData).append("file",d),e.next=10,(0,c.W$)("table/upload",l,(function(e){return console.log(e)}));case 10:if(!(u=e.sent).status){e.next=21;break}x=(f={data:_}).data[n[0]]._id,p=(0,h.Z)(u.data);try{for(p.s();!(m=p.n()).done;)g=m.value,f.data[n[0]].row[n[1]].data.push(g)}catch(i){p.e(i)}finally{p.f()}return R(f.data),e.next=19,(0,c.RQ)({data:f.data[n[0]],modifier:k});case 19:e.sent.status&&(Z={type:"activity",rowId:x,history:{status:"add",data:u.data},dataType:"attached",sign:(0,G.Z)({},k._id,!0),creator:k,cellName:z[n[1]].name,cellId:t.id,columnId:z[n[1]].id},(0,c.Hw)(Z));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(d.Z,{tabIndex:n.join("-"),onKeyDown:function(e){"Enter"===e.key&&w(!0)},sx:{height:"100%",width:"100%"},children:(0,V.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{px:"3px",height:"100%",display:"inline-flex",position:"relative"},children:[t.data&&t.data.map((function(e,t){return(0,V.jsx)(d.Z,{sx:{height:r?36:25,width:"auto",mr:.25,zIndex:1,overflow:"hidden",cursor:"pointer",border:"2px solid #0000001a",bgcolor:"#0000001a","&:hover":{border:r?"2px solid #00000052":"2px solid #0000001a"}},children:e.mimetype.startsWith("image")?(0,V.jsx)(d.Z,{onClick:function(){return N(t)},sx:{height:r?36:25,maxWidth:r?64:44},component:"img",src:"".concat(Ee.P_).concat(e.filename),alt:"attached"}):(0,V.jsx)(d.Z,{onClick:function(){return N(t)},sx:{height:r?36:20,width:r?36:20},component:"img",src:(0,U.Pk)(e),alt:"attached"})},t)})),r&&"active"===u&&z[n[1]].editable&&(0,V.jsx)(l.Z,{onClick:function(){w(!0)},alignItems:"center",justifyContent:"center",sx:{height:38,mr:.25,borderRadius:"3px",px:.5,cursor:"pointer",bgcolor:"#0000000d",zIndex:1,"&:hover":{bgcolor:"#0000001a"}},children:(0,V.jsx)(A.Z,{sx:{fontSize:12}})}),(0,V.jsx)(C.Z,{sx:{position:"absolute",height:"100%",width:"100%",opacity:0,zIndex:0},onPaste:T})]})}),(0,V.jsx)(tt.Z,{open:p,close:function(){m(!1)},data:t.data,index:y}),(0,V.jsx)(dt,{open:b,close:function(){w(!1)},position:n,data:t})]})},It=function(e){var t=e.data,r=e.width,n=e.position,l=(0,P.Z)(),u=l.hId,f=l.body,x=l.changeBody,h=l.header,p=l.changeHeader,m=l.isAdmin,g=(0,H.Z)().user,Z=(0,s.useState)([]),b=(0,a.Z)(Z,2),j=b[0],v=b[1],S=(0,s.useState)(null),I=(0,a.Z)(S,2),z=I[0],_=I[1],R=(0,s.useState)(""),N=(0,a.Z)(R,2),T=N[0],W=N[1],B=Boolean(z),E=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r,o,a){var s,d,l,u,p,m,Z,b,w;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=16;break}if(d=(s={data:f}).data[n[0]]._id,l=s.data[n[0]].row[n[1]].data,r===l){e.next=16;break}return s.data[n[0]].row[n[1]].data=r,p="",m="",(Z=j.findIndex((function(e){return e.id===l})))>-1&&(p=j[Z].label,m=j[Z].color),(null===(u=s.data[n[0]].updater)||void 0===u?void 0:u._id)!==g._id&&(b={firstName:g.firstName,lastName:g.lastName,email:g.email,color:g.color},s.data[n[0]].updater=b),s.data[n[0]].updatedAt=new Date,x(s.data),e.next=14,(0,c.RQ)({data:s.data[n[0]],updater:g._id});case 14:e.sent.status?(w={type:"activity",old:p,oldColor:m,rowId:d,new:o,color:a,dataType:"select",sign:(0,G.Z)({},g._id,!0),creator:g,cellName:h[n[1]].name,cellId:t.id,columnId:h[n[1]].id},(0,c.Hw)(w)):alert("server error!");case 16:_(null),W("");case 18:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),F=function(e){var t=(0,lt.$v)(),r=ue()(),i=h;i[n[1]].list.push({id:r,label:e,color:t,order:i[n[1]].list.length}),p(i),(0,c.ZP)("POST","table/updateHeader",{data:{row:i,hId:u}}).then((function(e){e.status||alert("server error!")})),E(r,e,t)};return(0,s.useEffect)((function(){var e=h[n[1]].list.map((function(e,t){return e.index=t,e}));v(e)}),[h,n]),(0,V.jsxs)(d.Z,{sx:{p:"6px",height:"100%",display:"flex"},onDoubleClick:function(e){return _(e.currentTarget)},children:[function(){var e,r=j.findIndex((function(e){return e.id===t.data}));return-1!==r?(0,V.jsx)(k.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:h[n[1]].colored?null===(e=j[r])||void 0===e?void 0:e.color:"#b3b0b0",px:1,minWidth:18},children:(0,V.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:j[r].label})}):null}(),(0,V.jsx)(y.ZP,{anchorEl:z,open:B,onClose:function(){_(null),W("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPaper-rounded":{width:r,mt:-1.5,minWidth:160}},children:(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(C.Z,{placeholder:"Find an option",onKeyDown:function(e){if("Enter"===e.key){var t=j.filter((function(e){return-1!==e.label.toLowerCase().search(T)}));t.length?E(t[0].id):m?F(T):(_(null),W(""))}},onChange:function(e){return W(e.target.value)},autoFocus:!0,sx:{pt:1,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),function(){var e=j.filter((function(e){return-1!==e.label.toLowerCase().search(T)}));return e.length?(0,V.jsx)(V.Fragment,{children:e.map((function(e,t){var r=e.label,i=e.color,o=e.id;return(0,V.jsx)(w.Z,{onClick:function(){return E(o,r,i)},children:(0,V.jsx)(k.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:h[n[1]].colored?i:"#b3b0b0",px:1,minWidth:18},children:(0,V.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:r})})},t)}))}):T&&m?(0,V.jsxs)(w.Z,{onClick:function(){return F(T)},children:[(0,V.jsx)(A.Z,{sx:{fontSize:16,position:"absolute",left:4}}),(0,V.jsxs)(k.Z,{sx:{pl:.5,width:"100%",overflow:"hidden",fontSize:13,whiteSpace:"break-spaces"},children:["create a new option named ",(0,V.jsx)("b",{children:T})]})]}):(0,V.jsx)(d.Z,{sx:{p:1}})}()]})})]})},zt=function(e){var t=e.data,r=e.width,n=e.position,u=(0,P.Z)(),x=u.hId,h=u.body,p=u.changeBody,m=u.header,g=u.changeHeader,Z=u.active,b=u.isAdmin,j=(0,H.Z)().user,v=(0,s.useState)([]),S=(0,a.Z)(v,2),I=S[0],z=S[1],_=(0,s.useState)(null),R=(0,a.Z)(_,2),N=R[0],T=R[1],W=(0,s.useState)(""),B=(0,a.Z)(W,2),E=B[0],F=B[1],D=Boolean(N),O=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r,o,a){var s,d,l,u,x;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=12;break}return d=[],l=(s={data:h}).data[n[0]]._id,u=s.data[n[0]].row[n[1]].data,(d=u.map((function(e){var t=m[n[1]].list.filter((function(t){return t.id===e}));return(0,f.Z)({status:"nochange"},t[0])}))).push({status:"add",id:r,label:o,color:a}),s.data[n[0]].row[n[1]].data.push(r),p(s.data),e.next=10,(0,c.RQ)({data:s.data[n[0]],updater:j._id});case 10:e.sent.status?(x={type:"activity",rowId:l,history:d,dataType:"multiSelect",sign:(0,G.Z)({},j._id,!0),creator:j,cellName:m[n[1]].name,cellId:t.id,columnId:m[n[1]].id},(0,c.Hw)(x)):alert("server error!");case 12:T(null),F("");case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),M=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){var o,a,s,d,l,u,x;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],d=(a={data:h}).data[n[0]]._id,l=a.data[n[0]].row[n[1]].data,s=l.map((function(e,t){var i=m[n[1]].list.filter((function(t){return t.id===e}));return(0,f.Z)({status:r===t?"remove":"nochange"},i[0])})),l.splice(r,1),a.data[n[0]].row[n[1]].data=l,(null===(o=a.data[n[0]].updater)||void 0===o?void 0:o._id)!==j._id&&(u={firstName:j.firstName,lastName:j.lastName,email:j.email,color:j.color},a.data[n[0]].updater=u),a.data[n[0]].updatedAt=new Date,p(a.data),e.next=11,(0,c.RQ)({data:a.data[n[0]],updater:j._id});case 11:e.sent.status?(x={type:"activity",rowId:d,history:s,dataType:"multiSelect",sign:(0,G.Z)({},j._id,!0),creator:j,cellName:m[n[1]].name,cellId:t.id,columnId:m[n[1]].id},(0,c.Hw)(x)):alert("server error!");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=(0,lt.$v)(),r=ue()(),i=m;i[n[1]].list.push({id:r,label:e,color:t,order:i[n[1]].list.length}),g(i),(0,c.ZP)("POST","table/updateHeader",{data:{row:i,hId:x}}).then((function(e){e.status||alert("server error!")})),O(r,e,t)};return(0,s.useEffect)((function(){var e=m[n[1]].list.map((function(e,t){return e.index=t,e}));z(e)}),[m,n,t.data]),(0,V.jsxs)(V.Fragment,{children:[Z===n.join("_")?(0,V.jsx)(l.Z,{className:"selectItems-wrap",sx:{height:"auto",minHeight:34,position:"absolute",borderRadius:"1px",flexWrap:"wrap",bgcolor:"#fff",ml:"-1px",boxShadow:"0 0 0 2px #2d7ff9 !important",width:r+2},children:(0,V.jsxs)(l.Z,{direction:"row",sx:{flexWrap:"wrap",alignItems:"center"},children:[t.data.length?(0,V.jsx)(V.Fragment,{children:t.data.map((function(e,t){var r,i,o=I.findIndex((function(t){return t.id===e}));return(0,V.jsxs)(k.Z,{component:"span",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:"3px",ml:"3px",height:18,borderRadius:50,bgcolor:m[n[1]].colored?null===(r=I[o])||void 0===r?void 0:r.color:"#b3b0b0",px:1,minWidth:18,mr:.5},children:[(0,V.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:null===(i=I[o])||void 0===i?void 0:i.label}),m[n[1]].editable&&(0,V.jsx)(K.Z,{sx:{fontSize:14,ml:.5,color:"#fff"},onClick:function(){return M(t)}})]},t)}))}):null,m[n[1]].editable&&(0,V.jsx)(l.Z,{onClick:function(e){T(e.currentTarget.parentElement.parentElement)},alignItems:"center",justifyContent:"center",sx:{mt:.25,height:28,borderRadius:"3px",px:.5,cursor:"pointer",bgcolor:"#0000000d","&:hover":{bgcolor:"#0000001a"}},children:(0,V.jsx)(A.Z,{sx:{fontSize:12}})})]})}):(0,V.jsx)(d.Z,{sx:{p:"6px",height:"100%",display:"flex"},children:t.data.length?(0,V.jsx)(V.Fragment,{children:t.data.map((function(e,t){var r,i,o=I.findIndex((function(t){return t.id===e}));return(0,V.jsx)(k.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:m[n[1]].colored?null===(r=I[o])||void 0===r?void 0:r.color:"#b3b0b0",px:1,mr:.5},children:(0,V.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,color:"#fff"},children:null===(i=I[o])||void 0===i?void 0:i.label})},t)}))}):null}),(0,V.jsx)(y.ZP,{anchorEl:N,open:D,onClose:function(){T(null),F("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPaper-rounded":{width:r,mt:-1.5,minWidth:160}},children:(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(C.Z,{placeholder:"Find an option",onKeyDown:function(e){if("Enter"===e.key){var t=I.filter((function(e){return-1!==e.label.toLowerCase().search(E)}));t.length?O(t[0].id):b?L(E):(T(null),F(""))}},onChange:function(e){return F(e.target.value)},autoFocus:!0,sx:{pt:1,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),function(){var e=I.filter((function(e){return-1===t.data.findIndex((function(t){return t===e.id}))&&-1!==e.label.toLowerCase().search(E)}));return e.length?(0,V.jsx)(V.Fragment,{children:e.map((function(e,t){var r=e.label,i=e.color,o=e.id;return(0,V.jsx)(w.Z,{onClick:function(){return O(o,r,i)},children:(0,V.jsx)(k.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:m[n[1]].colored?i:"#b3b0b0",px:1,minWidth:18},children:(0,V.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:r})})},t)}))}):E&&b?(0,V.jsxs)(w.Z,{onClick:function(){return L(E)},children:[(0,V.jsx)(A.Z,{sx:{fontSize:16,position:"absolute",left:4}}),(0,V.jsxs)(k.Z,{sx:{pl:.5,width:"100%",overflow:"hidden",fontSize:13,whiteSpace:"break-spaces"},children:["create a new option named ",(0,V.jsx)("b",{children:E})]})]}):(0,V.jsx)(d.Z,{sx:{p:1}})}()]})})]})},_t=function(e){var t=e.data,r=e.type,n=e.status,i=e.focus,o=e.width,a=e.height,s=e.position,d=e.group;return(0,V.jsx)(V.Fragment,{children:function(){switch(r){case"text":case"email":default:return(0,V.jsx)(ht,{group:d,data:t,status:n,position:s});case"link":return(0,V.jsx)(mt,{group:d,data:t,status:n,position:s});case"longText":return(0,V.jsx)(pt,{group:d,data:t,status:n,height:a,position:s});case"attached":return(0,V.jsx)(kt,{group:d,data:t,focus:i,position:s});case"date":return(0,V.jsx)(wt,{group:d,data:t,position:s});case"select":return(0,V.jsx)(It,{group:d,data:t,width:o,position:s});case"multiSelect":return(0,V.jsx)(zt,{group:d,data:t,width:o,position:s});case"checkBox":return(0,V.jsx)(jt,{group:d,data:t,width:o,position:s});case"createdAt":case"updatedAt":return(0,V.jsx)(vt,{group:d,data:t,width:o,position:s});case"createdBy":case"updatedBy":return(0,V.jsx)(yt,{group:d,data:t,width:o,position:s})}}()})},Rt=function(e){var t=e.data,r=e.handleContextMenu,n=e.width,i=e.position,o=e.type,a=e.order,c=e.group,u=e.cssClass,x=(0,s.useContext)(le.X),h=x.active,p=x.selectActive,m=x.editable,g=x.selectEditable,Z=x.selectEditabled,b={order:a,zIndex:1,width:n,bgcolor:t.search?"#97ffa2":"#fff",overflow:"hidden",borderTop:"1px solid #dde1e3",borderRight:"1px solid #dde1e3"},w={boxSizing:"content-box",border:"1px solid transparent",mt:"-1px",ml:"-2px",pr:0,borderRight:0,boxShadow:"multiSelect"===o?"":"0 0 0 2px #2d7ff9 !important",borderRadius:"1px",zIndex:"8 !important"},j=(0,s.useMemo)((function(){return m===i.join("_")&&h===i.join("_")?"longText"===o?142:32:(m===i.join("_")||h===i.join("_"))&&"attached"===o?40:32}),[m,i]);return console.log("active :>> ",h),(0,V.jsx)(l.Z,{className:"cell"+u,onClick:function(){i.join("_")!==h&&"active"===c&&(p(i.join("_")),g(""),Z(m))},onKeyDown:function(e){h===i.join("_")&&m!==i.join("_")&&("longText"!==o&&"text"!==o&&"link"!==o||(Z(m),g(i.join("_"))))},onContextMenu:r,tabIndex:i.join("-"),sx:h===i.join("_")&&"active"===c?(0,f.Z)((0,f.Z)((0,f.Z)({},b),w),{},{height:j}):(0,f.Z)((0,f.Z)({},b),{},{height:j}),children:(0,V.jsx)(d.Z,{onDoubleClick:function(){"attached"===o||"select"===o?p(i.join("_")):(Z(m),g(i.join("_")))},sx:{height:"100%"},children:(0,V.jsx)(_t,{group:c,data:t,width:n,height:j,type:o,status:m===i.join("_"),position:i,focus:h===i.join("_")})})})},Nt=function(e){var t=e.group,r=e.row,n=e.y,i=e.popup,o=e.visible,a=e.setVisible,s=e.setOrder,d=e.isFixed,c=(0,P.Z)(),u=c.header,f=c.body,x=function(e){if(e.preventDefault(),a(!0),s({id:r._id,index:r.order}),i.current){var t=e.clientX,n=e.clientY,o=window.innerWidth-t>200,d=!o,l=window.innerHeight-n>193,c=!l;o&&(i.current.style.left="".concat(t+5,"px")),d&&(i.current.style.left="".concat(t-200-5,"px")),l&&(i.current.style.top="".concat(n-120,"px")),c&&(i.current.style.top="".concat(n-193-130,"px"))}};return(0,V.jsx)(l.Z,{direction:"row",className:"grid-row",sx:{height:32,width:"100%","&:hover":{"& .show-head":{opacity:1},"& .row-num":{opacity:0},"& .cell":{bgcolor:"#f8f8f8"}}},children:function(e,l){if(u.length){var c=[];d&&c.push((0,V.jsx)(St,{order:r.order,id:l,y:n,group:t},n+"_"));var h=u.filter((function(e){return e.allowed}));h=h.length?h.reduce((function(e,t){return e.order>t.order?e:t})):{order:0};for(var p=0;p<e.length;p++){var m=void 0;switch(u[p].type){case"createdAt":m={data:r.createdAt,search:!1};break;case"updatedAt":m={data:r.updater?r.updatedAt:null,search:!1};break;case"createdBy":m={data:r.creator,search:!1};break;case"updatedBy":m={data:r.updater,search:!1};break;default:m=e[p]}if(!u[p].hide&&u[p].allowed){var g=f.findIndex((function(e){return e._id===l}));d&&u[p].fixed?c.push((0,V.jsx)(Rt,{cssClass:u[p].order===h.order?" last":"",group:t,rorder:e.order,order:u[p].order,type:u[p].type,width:u[p].width,data:m,position:[g,p],popup:i,visible:o,setVisible:a,setOrder:s,handleContextMenu:x},n+"_"+p)):d||u[p].fixed||c.push((0,V.jsx)(Rt,{cssClass:u[p].order===h.order?" last":"",group:t,rorder:e.order,order:u[p].order,type:u[p].type,width:u[p].width,data:m,position:[g,p],popup:i,visible:o,setVisible:a,setOrder:s,handleContextMenu:x},n+"_"+p))}}return c}return null}(r.row,r._id)})},Tt=function(e){var t=e.mainW,r=(0,s.useRef)(0),n=(0,H.Z)().user,u=(0,P.Z)(),h=u.header,p=u.changeHeader,m=u.body,g=u.editable,Z=u.changeBody,b=u.selectEditable,w=u.selectEditabled,j=u.selectActive,y=u.filterBody,C=u.isFilter,z=u.hId,_=u.setColumHandle,R=u.isAdmin,N=(0,s.useState)(-1),T=(0,a.Z)(N,2),W=T[0],B=T[1],E=(0,s.useState)(-1),F=(0,a.Z)(E,2),O=F[0],M=F[1],L=(0,s.useState)(!1),U=(0,a.Z)(L,2),Q=U[0],X=U[1],K=(0,s.useState)({id:"",index:-1}),G=(0,a.Z)(K,2),J=G[0],Y=G[1],$=function(e){_({direction:"left",target:e.currentTarget,index:h.length,type:"add"})},q=function(e,t){B(t),M(e.clientX-h[t].width)},ee=function(){var e=h.map((function(e){var t=e;return delete t.hide,t}));(0,c.EH)({row:e,hId:z}),B(-1),M(-1)},te=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=0;case 2:if(!(r<h.length)){e.next=17;break}e.t0=h[r].type,e.next="text"===e.t0||"longText"===e.t0||"email"===e.t0||"date"===e.t0||"link"===e.t0||"select"===e.t0||"number"===e.t0||"createdAt"===e.t0||"updatedAt"===e.t0||"createdBy"===e.t0||"updatedBy"===e.t0?6:"checkBox"===e.t0?8:"multiSelect"===e.t0||"attached"===e.t0?10:12;break;case 6:return t.push({id:ue()(),data:""}),e.abrupt("break",14);case 8:return t.push({id:ue()(),data:!1}),e.abrupt("break",14);case 10:return t.push({id:ue()(),data:[]}),e.abrupt("break",14);case 12:return t.push({id:ue()(),data:""}),e.abrupt("break",14);case 14:r++,e.next=2;break;case 17:return e.next=19,(0,c.yw)(t,z,n._id);case 19:o=e.sent,Z([].concat((0,x.Z)(m),[(0,f.Z)((0,f.Z)({},o.data),{},{creator:n})])),document.getElementsByClassName("tableBody")[0].scroll({top:32*(m.length+3)-document.getElementsByClassName("tableBody")[0].clientHeight,behavior:"smooth"});case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){b(""),w(g),j("")},ne=function(e,t){e.target.contains&&(!(e.target===r.current||e.target.parentElement===r.current)&&t&&(X(!1),Y({id:"",index:-1})))},ie=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var n,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Cs)((0,f.Z)((0,f.Z)({},t),{},{up:r}));case 2:e.sent.status&&(n={data:m},r?(o=n.data.findIndex((function(e){return e.order===t.index-1})),n.data[o].order++,o=n.data.findIndex((function(e){return e._id===t.id})),n.data[o].order--):(a=n.data.findIndex((function(e){return e.order===t.index+1})),n.data[a].order--,a=n.data.findIndex((function(e){return e._id===t.id})),n.data[a].order++),Z(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),oe=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t={data:m}).data.sort((function(e,t){return e.order-t.order})),r=t.data.findIndex((function(e){return e._id===J.id})),e.next=5,(0,c.ZP)("POST","table/deleteRow",{data:t.data[r]});case 5:if(e.sent.status){for(t.data.splice(r,1),n=r;n<t.data.length;n++)t.data[n].order--;Z(t.data)}else alert("server error!");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.kI)(t.id,n._id);case 2:if((r=e.sent).status){for((o={data:m}).data.sort((function(e,t){return e.order-t.order})),a=t.index+1;a<o.data.length;a++)o.data[a].order++;r.data.creator=n,r.data.updater=n,r.data.updatedAt=new Date,r.data.createdAt=new Date,o.data.splice(t.index+1,0,r.data),Z((0,x.Z)(o.data))}else alert("Server error!");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=function(e){if(W>-1){var t=h,r=e.clientX-O;r>130&&(t[W].width=r,p(t))}};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[W,O]),(0,s.useEffect)((function(){var e=function(){if(W>-1&&O>-1){var e=h.map((function(e){var t=e;return delete t.hide,t}));(0,c.EH)({row:e,hId:z}),B(-1),M(-1)}};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[O,W,h]),(0,s.useEffect)((function(){return window.addEventListener("click",(function(e){return ne(e,Q)})),function(){window.removeEventListener("click",(function(e){return ne(e,Q)}))}}),[Q]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(d.Z,{sx:{height:"200%",position:"sticky",left:Ee.cn-1,width:"6px",bgcolor:"#99999917",zIndex:99,top:0},children:(0,V.jsx)(d.Z,{sx:{height:"100%",width:"1px",bgcolor:"#dde1e3"}})}),(0,V.jsxs)(d.Z,{sx:{position:"absolute",right:0,width:t,left:0,overflow:"visible",top:0,bottom:0},children:[(0,V.jsx)(d.Z,{sx:{height:32,top:0,left:0,right:0,zIndex:3,overflow:"visible",bgcolor:"#f2f2f2",position:"sticky",borderBottom:"1px solid #dde1e3"},children:(0,V.jsx)(d.Z,{sx:{height:32,position:"relative"},children:(0,V.jsx)(d.Z,{sx:{height:32,display:"flex"},children:function(){var e=[];e.push((0,V.jsx)(Ae,{},-1));var t=Object.assign([],h);t=t.map((function(e,t){return(0,f.Z)((0,f.Z)({},e),{},{index:t})})).sort((function(e,t){return e.order-t.order}));for(var r=Ee.cn+Ee.Xu,i=function(n){if(t[n].hide||!t[n].allowed)return"continue";t[n].fixed?(e.push((0,V.jsxs)(d.Z,{sx:{order:t[n].order,height:"100%",position:"sticky",left:r,zIndex:9,width:t[n].width,bgcolor:"#f5f5f5",borderBottom:"1px solid #d1d1d1",borderRight:"1px solid #dde1e3"},children:[(0,V.jsx)(We,{me:t[n],i:t[n].index}),(0,V.jsx)(d.Z,{onMouseDown:function(e){return q(e,t[n].index)},onMouseUp:function(){return ee(n)},sx:{width:"2px",bgcolor:W===t[n].index?"#1283da":"#f5f5f5",height:"100%",position:"absolute",top:0,right:0,"&:hover":{cursor:"col-resize"}}})]},n)),r+=t[n].width):e.push((0,V.jsxs)(d.Z,{sx:{order:t[n].order,height:"100%",position:"relative",width:t[n].width,bgcolor:"#f5f5f5",borderBottom:"1px solid #d1d1d1",borderRight:"1px solid #dde1e3"},children:[(0,V.jsx)(We,{me:t[n],i:t[n].index}),(0,V.jsx)(d.Z,{onMouseDown:function(e){return q(e,t[n].index)},onMouseUp:function(){return ee(n)},sx:{width:"2px",bgcolor:W===t[n].index?"#1283da":"#f5f5f5",height:"100%",position:"absolute",top:0,right:0,"&:hover":{cursor:"col-resize"}}})]},n))},o=0;o<t.length;o++)i(o);return e.push((0,V.jsx)(s.Fragment,{children:"Admin"===n.role?(0,V.jsx)(d.Z,{sx:{height:"100%",width:100,borderBottom:"1px solid #d1d1d1",order:h.length},children:(0,V.jsx)(l.Z,{onClick:$,direction:"row",alignItems:"center",justifyContent:"center",sx:{height:"100%",width:"100%",px:"5px",cursor:"pointer"},children:(0,V.jsx)(A.Z,{sx:{fontSize:16}})})}):(0,V.jsx)(d.Z,{sx:{height:"100%",width:16,borderBottom:"1px solid #d1d1d1",order:h.length}})},h.length)),e}()})})}),(0,V.jsx)(d.Z,{className:"tableBody",sx:{top:32,left:0,right:0,bottom:0,zIndex:0,position:"absolute",height:"calc(100% - 67px)"},children:(0,V.jsx)(d.Z,{sx:{position:"relative"},children:function(){for(var e=m,t=0,n=Ee.aY,i=[],o=[],a=0;a<h.length;a++)!h[a].hide&&h[a].allowed&&(h[a].fixed?n+=h[a].width:t+=h[a].width);for(var s=0;s<e.length;s++)e[s].done?i.push(e[s]):o.push(e[s]);return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)(l.Z,{children:[(0,V.jsx)(l.Z,{direction:"row",sx:{height:16},onClick:function(){return re()},children:(0,V.jsx)(d.Z,{sx:{width:n,height:"100%",position:"sticky",left:0,zIndex:9,bgcolor:"#f7f7f7"}})}),(0,V.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,V.jsx)(d.Z,{sx:{width:16,bgcolor:"#f7f7f7",zIndex:9,position:"sticky",left:0},onClick:function(){return re()}}),(0,V.jsxs)(l.Z,{sx:{zIndex:9,position:"sticky",left:16,width:n,border:"1px solid #dde1e3",borderTopLeftRadius:8,borderBottomLeftRadius:8,"&:before":{content:'""',height:2,width:10,bgcolor:"#f7f7f7",position:"absolute",top:-1,left:-7},"&:after":{content:'""',height:2,width:10,bgcolor:"#f7f7f7",position:"absolute",bottom:-1,left:-7}},children:[(0,V.jsx)(d.Z,{sx:{width:"100%",height:47,bgcolor:"#fffafa",py:1,px:1,borderTopLeftRadius:8,borderBottomLeftRadius:8},onClick:function(){return re()},children:(0,V.jsx)(k.Z,{sx:{color:"gray"},children:"Active (".concat(o.length,")")})}),o.map((function(e,t){return(0,V.jsx)(Nt,{group:"active",isFixed:!0,row:e,y:t,popup:r,visible:Q,setVisible:X,setOrder:Y},t)}))]}),(0,V.jsxs)(l.Z,{sx:{width:t,borderTopRightRadius:8,borderBottomRightRadius:8,borderTop:"1px solid #dde1e3",borderBottom:"1px solid #dde1e3"},children:[(0,V.jsx)(d.Z,{sx:{bgcolor:"#fffafa",height:47,py:1,px:1,borderTopRightRadius:8,borderRight:"1px solid #dde1e3",borderBottomRightRadius:o.length?0:8},onClick:function(){return re()}}),o.map((function(e,t){return(0,V.jsx)(Nt,{group:"active",isFixed:!1,row:e,y:t,popup:r,visible:Q,setVisible:X,setOrder:Y},t)}))]})]}),(0,V.jsx)(l.Z,{direction:"row",sx:{height:16},onClick:function(){return re()},children:(0,V.jsx)(d.Z,{sx:{width:n,height:"100%",position:"sticky",left:0,zIndex:9,bgcolor:"#f7f7f7"}})}),(0,V.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,V.jsx)(d.Z,{sx:{width:16,bgcolor:"#f7f7f7",zIndex:9,position:"sticky",left:0},onClick:function(){return re()}}),(0,V.jsxs)(l.Z,{sx:{zIndex:9,position:"sticky",left:16,width:n,border:"1px solid #dde1e3",borderTopLeftRadius:8,borderBottomLeftRadius:8,"&:before":{content:'""',height:2,width:10,bgcolor:"#f7f7f7",position:"absolute",top:-1,left:-7},"&:after":{content:'""',height:2,width:10,bgcolor:"#f7f7f7",position:"absolute",bottom:-1,left:-7}},children:[(0,V.jsx)(d.Z,{sx:{width:"100%",height:47,bgcolor:"#fffafa",py:1,px:1,borderTopLeftRadius:8,borderBottomLeftRadius:8},onClick:function(){return re()},children:(0,V.jsx)(k.Z,{sx:{color:"gray"},children:"Completed (".concat(i.length,")")})}),i.map((function(e,t){return(0,V.jsx)(Nt,{group:"completed",isFixed:!0,row:e,y:t,popup:r,visible:Q,setVisible:X,setOrder:Y},t)}))]}),(0,V.jsxs)(l.Z,{sx:{width:t,borderTopRightRadius:8,borderBottomRightRadius:8,borderTop:"1px solid #dde1e3",borderBottom:"1px solid #dde1e3"},children:[(0,V.jsx)(d.Z,{sx:{bgcolor:"#fffafa",height:47,py:1,px:1,borderTopRightRadius:8,borderRight:"1px solid #dde1e3",borderBottomRightRadius:i.length?0:8},onClick:function(){return re()}}),i.map((function(e,t){return(0,V.jsx)(Nt,{group:"completed",isFixed:!1,row:e,y:t,popup:r,visible:Q,setVisible:X,setOrder:Y},t)}))]})]})]})})}()})}),(0,V.jsx)(d.Z,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:3,bgcolor:"#ffffff",borderTop:"1px solid #dde1e3"},children:(0,V.jsxs)(d.Z,{sx:{height:35,display:"flex"},children:[(0,V.jsx)(d.Z,{sx:{width:66,bgcolor:"#ffffff80",borderTop:"1px solid #dde1e3"},children:(0,V.jsx)(d.Z,{sx:{top:0,left:0,height:34,overflow:"visible",position:"absolute"},children:(0,V.jsx)(d.Z,{sx:{position:"relative"},children:(0,V.jsxs)(l.Z,{direction:"row",sx:{position:"absolute",zIndex:1,height:24,left:0,top:0},children:[Boolean(h.filter((function(e){return e.allowed})).length)&&"Developer"!==n.role&&(0,V.jsx)(l.Z,{direction:"row",sx:{position:"relative",pl:1,flex:"1 1 auto",bottom:16},children:(0,V.jsx)(S.Z,{onClick:function(){return te()},sx:{position:"relative",height:36,width:36,borderRadius:50,border:"1px solid #0000001a",bgcolor:"#fff",p:1,"&:hover":{bgcolor:"#fff"}},children:(0,V.jsx)(A.Z,{})})}),(0,V.jsx)(d.Z,{sx:{px:1,pt:"3px",pb:"2px",fontSize:11,width:"auto",overflow:"hidden",position:"static",bgcolor:"#fbfbfb",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:"".concat(m.length," records")})]})})})}),function(){for(var e=[],t=0;t<h.length;t++)!h[t].hide&&h[t].allowed&&e.push((0,V.jsx)(d.Z,{sx:{height:34,width:h[t].width}},t));return e}()]})}),(0,V.jsx)(pe.Z,{})]}),(0,V.jsx)(d.Z,{ref:r,sx:{py:2,position:"absolute",display:Q?"block":"none",zIndex:Q?1200:0,bgcolor:"#fff",borderRadius:1,boxShadow:"0px 5px 5px -3px rgb(0 0 0 / 20%), 0px 8px 10px 1px rgb(0 0 0 / 14%), 0px 3px 14px 2px rgb(0 0 0 / 12%)"},children:(0,V.jsxs)(l.Z,{spacing:.5,sx:{minWidth:200},children:[(0,V.jsx)(v.Z,{disabled:J.index<=0,onClick:function(){return ie(J,!0)},startIcon:(0,V.jsx)(fe.Z,{sx:{fontSize:15}}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize",borderRadius:0,pl:2},children:"Move Up"}),(0,V.jsx)(v.Z,{disabled:(C?y:m).length-1<=J.index,onClick:function(){return ie(J,!1)},startIcon:(0,V.jsx)(xe.Z,{sx:{fontSize:15}}),sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize",borderRadius:0,pl:2},children:"Move Down"}),(0,V.jsx)(I.Z,{}),(0,V.jsx)(v.Z,{startIcon:(0,V.jsx)(he.Z,{sx:{fontSize:15}}),onClick:function(){return ae(J)},sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize",borderRadius:0,pl:2},children:"Duplicate Row"}),R&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(I.Z,{}),(0,V.jsx)(v.Z,{startIcon:(0,V.jsx)(D.Z,{}),onClick:oe,sx:{color:"#4d4d4d",justifyContent:"flex-start",textTransform:"capitalize",borderRadius:0,pl:2},children:"Delete Row"})]})]})})]})},Wt=function(){var e=(0,s.useContext)(le.X),t=e.header,r=e.isAdmin,n=(0,s.useContext)(ct.E).user,i=(0,s.useState)({fixedHeader:[],rightHeader:[],mainW:0}),o=(0,a.Z)(i,2),l=o[0],c=o[1];(0,s.useEffect)((function(){var e,n=[],i=[],o=(0,h.Z)(t);try{for(o.s();!(e=o.n()).done;){var a=e.value;a.fixed?n.push(a):i.push(a)}}catch(f){o.e(f)}finally{o.f()}var s,d=r?Ee.GS+Ee.cn:Ee.cn+Ee.tB,l=(0,h.Z)(t);try{for(l.s();!(s=l.n()).done;){var u=s.value;!u.hide&&u.allowed&&(d+=u.width)}}catch(f){l.e(f)}finally{l.f()}d=d>window.screen.width?d:window.screen.width,c({fixedHeader:n,rightHeader:i,mainW:d})}),[t,n.role,r]);var u=l.mainW;return(0,V.jsx)(d.Z,{sx:{top:0,left:0,right:0,bottom:0,position:"absolute",overflow:"auto"},children:(0,V.jsx)(Tt,{mainW:u})})},Bt=r(3763),Et=function(){var e=(0,p.s0)(),t=(0,p.UO)().projectId,r=(0,H.Z)().user,n=(0,P.Z)(),f=n.initData,x=n.users,h=n.setUsers,m=n.tableName,g=(0,s.useState)([]),b=(0,a.Z)(g,2),w=b[0],j=b[1],v=(0,s.useState)(!1),y=(0,a.Z)(v,2),C=y[0],S=y[1];return(0,s.useEffect)((function(){(0,o.Z)((0,i.Z)().mark((function n(){var o,a,s,d,l,u;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.jk)({userId:r._id,projectId:t});case 2:if(!(o=n.sent).status){n.next=17;break}return o=o.data,s=o.users.filter((function(e){return e._id===r._id}))[0],d=null!==(a=o.header._id)&&void 0!==a?a:"",n.next=9,(0,U.Jk)(s,d,r,o.header.row);case 9:l=n.sent,u=o.users.map((function(e){return e.allowed||(e.allowed={}),e.editable||(e.editable={}),e.showList||(e.showList={}),e.allowIds||(e.allowIds={}),e.myTable||(e.myTable=[]),e})),h(u),j(o.headers),f({header:l,hId:d,body:o.body,notifications:o.notification,project:o.project}),S(!0),n.next=19;break;case 17:Z.Am.error(o.message),e("/");case 19:case"end":return n.stop()}}),n)})))()}),[]),(0,V.jsxs)(l.Z,{sx:{width:"100%",height:"100%"},children:[(0,V.jsx)(Q,{headerNames:w,setHeaderNames:j}),(0,V.jsxs)(l.Z,{sx:{width:"100%",height:"100%"},children:[(0,V.jsx)(de,{active:"User Management"===m}),(0,V.jsx)(l.Z,{sx:{height:"100%",width:"100%",bgcolor:"#f5f5f5"},children:(0,V.jsx)(l.Z,{sx:{height:"100%",flex:"1 1 auto"},children:(0,V.jsx)(l.Z,{sx:{height:"100%",position:"relative",overflow:"hidden"},children:(0,V.jsx)(d.Z,{sx:{height:"100%",width:"100%",bgcolor:"#f7f7f7"},children:(0,V.jsx)(d.Z,{sx:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:4,overflow:"hidden",opacity:1},children:C&&x.length?(0,V.jsx)(V.Fragment,{children:w.length?(0,V.jsx)(Wt,{}):(0,V.jsx)(d.Z,{})}):(0,V.jsx)(d.Z,{sx:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,V.jsx)(u.Z,{})})})})})})})]}),(0,V.jsx)(Bt.Z,{})]})}},4683:function(e,t,r){r.d(t,{R:function(){return n}});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var r=1024,n=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(r));return"".concat(parseFloat((e/Math.pow(r,o)).toFixed(n))," ").concat(i[o])}},8923:function(e,t,r){r.d(t,{s:function(){return n}});var n=function(e){return new Promise((function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return r(e)}}))}}}]);
//# sourceMappingURL=22.fd504da8.chunk.js.map