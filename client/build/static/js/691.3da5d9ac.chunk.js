"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[691],{3477:function(e,t,n){n.r(t),n.d(t,{default:function(){return We}});var r=n(4165),i=n(5861),o=n(885),s=n(2791),d=n(6015),a=n(6283),l=n(4162),c=n(4565),u=n(456),h=n(1356),x=n(7762),f=n(1413),p=n(4803),m=n(8400),g=n(96),b=n(184),j=function(e){var t=e.i,n=e.me,r=(0,g.Z)().header;return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{height:"100%",width:"100%",px:"5px"},children:(0,b.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{overflow:"hidden"},children:[(0,b.jsx)(d.Z,{sx:{display:"flex"},children:(0,b.jsx)(m.Z,{type:r[t].type,editable:!1})}),(0,b.jsx)(d.Z,{sx:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(0,b.jsx)(c.Z,{variant:"span",sx:{ml:"5px",color:"#333333",fontWeight:300,fontSize:13,userSelect:"none"},children:n.name})})]})})})},w=n(2982),Z=n(5473),v=n(8490),y=n(7043),S=function(){var e=(0,s.useContext)(v.X),t=e.body,n=e.deleteRowList,r=e.setDeleteRowList;return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(d.Z,{sx:{position:"sticky",left:0,zIndex:9,display:"flex",alignItems:"center",order:-2,height:"100%",width:y.cn,bgcolor:"#f5f5f5",borderBottom:"1px solid #d1d1d1",borderRight:"1px solid #dde1e3"},children:[(0,b.jsx)(d.Z,{sx:{width:32,height:32,cursor:"default",borderLeft:"none",borderRight:"none",position:"relative",ml:2},children:(0,b.jsx)(Z.Z,{onChange:function(e){if(e.target.checked){var n=t.map((function(e){return e._id}));r((0,w.Z)(n))}else r([])},checked:Boolean(n.length),sx:{"& .MuiSvgIcon-root":{fontSize:15}}})}),(0,b.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:"Actions"})]})})},C=n(3811),I=n(5020),z=n(333),k=n(2426),R=n.n(k),W=n(8277),N=n(5953),_=n(3423),B=n(2637),E=n(7205),M=n(5702),F=n(5017),T=n(464),D=n(1835),O=n(5514),A=n(4346),H=n(8440),L=n(4407),P=n(5814),V=n(872),X=n(9823),U=n(2885),Y=n(1131),J=n(9663),K=n(8421),Q=n(6759),G=n(9652),q=n(2775),$=n(3292),ee=n(7154),te=n(5315),ne=function(e){var t=e.data,n=e.position,a=e.group,l=(0,g.Z)().header,u=(0,s.useState)([]),h=(0,o.Z)(u,2),x=h[0],f=h[1],p=(0,s.useState)(null),m=(0,o.Z)(p,2),j=m[0],w=m[1],Z=(0,s.useState)(""),v=(0,o.Z)(Z,2),y=v[0],S=v[1],C=(0,s.useMemo)((function(){return Boolean(j)}),[j]),I=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(null),S("");case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=l[n[1]].list.map((function(e,t){return e.index=t,e}));f(e)}),[l,n]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},onClick:function(e){"active"===a&&w(e.currentTarget)},children:function(){var e,r=x.findIndex((function(e){return e.id===t.data}));return-1!==r?(0,b.jsx)(c.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:l[n[1]].colored?null===(e=x[r])||void 0===e?void 0:e.color:"#b3b0b0",px:1,minWidth:18},children:(0,b.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:x[r].label})}):null}()}),(0,b.jsx)(L.ZP,{anchorEl:j,open:C,onClose:function(){w(null),S("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPaper-rounded":{mt:-1.5}},children:(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(F.Z,{placeholder:"Find an option",onChange:function(e){return S(e.target.value)},autoFocus:!0,sx:{pt:1,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),function(){var e=x.filter((function(e){return-1!==e.label.toLowerCase().search(y)}));return e.length?(0,b.jsx)(b.Fragment,{children:e.map((function(e,t){var r=e.label,i=e.color,o=e.id;return(0,b.jsx)(M.Z,{onClick:function(){return I(o,r,i)},children:(0,b.jsx)(c.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:l[n[1]].colored?i:"#b3b0b0",px:1,minWidth:18},children:(0,b.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:r})})},t)}))}):(0,b.jsx)(d.Z,{sx:{p:1}})}()]})})]})},re=n(2419),ie=function(e){var t=e.data,n=e.width,a=e.position,u=(0,g.Z)().header,h=(0,s.useState)([]),x=(0,o.Z)(h,2),f=x[0],p=x[1],m=(0,s.useState)(null),j=(0,o.Z)(m,2),w=j[0],Z=j[1],v=(0,s.useState)(""),y=(0,o.Z)(v,2),S=y[0],I=y[1],z=Boolean(w),k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(null),I("");case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=u[a[1]].list.map((function(e,t){return e.index=t,e}));p(e)}),[u,a,t.data]),(0,b.jsxs)(d.Z,{sx:{position:"relative"},children:[(0,b.jsx)(l.Z,{className:"selectItems-wrap",sx:{border:"1px solid #0000003b",width:"100%",minHeight:34,borderRadius:1,flexWrap:"wrap",bgcolor:"#fff","&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,b.jsxs)(l.Z,{direction:"row",sx:{flexWrap:"wrap",alignItems:"center"},children:[t.data.length?(0,b.jsx)(b.Fragment,{children:t.data.map((function(e,t){var n,r,i=f.findIndex((function(t){return t.id===e}));return(0,b.jsx)(c.Z,{component:"span",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:"3px",ml:"3px",height:18,borderRadius:50,bgcolor:u[a[1]].colored?null===(n=f[i])||void 0===n?void 0:n.color:"#b3b0b0",px:1,minWidth:18,mr:.5},children:(0,b.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:null===(r=f[i])||void 0===r?void 0:r.label})},t)}))}):null,(0,b.jsx)(C.Z,{onClick:function(e){Z(e.currentTarget.parentElement.parentElement)},sx:{mt:.25,height:28,borderRadius:"3px",px:.5,cursor:"pointer",bgcolor:"#0000000d","&:hover":{bgcolor:"#0000001a"}},children:(0,b.jsx)(re.Z,{sx:{fontSize:12}})})]})}),(0,b.jsx)(L.ZP,{anchorEl:w,open:z,onClose:function(){Z(null),I("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPaper-rounded":{width:n,mt:-1.5,minWidth:160}},children:(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(F.Z,{placeholder:"Find an option",onChange:function(e){return I(e.target.value)},autoFocus:!0,sx:{pt:1,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),function(){var e=f.filter((function(e){return-1===t.data.findIndex((function(t){return t===e.id}))&&-1!==e.label.toLowerCase().search(S)}));return e.length?(0,b.jsx)(b.Fragment,{children:e.map((function(e,t){var n=e.label,r=e.color,i=e.id;return(0,b.jsx)(M.Z,{onClick:function(){return k(i,n,r)},children:(0,b.jsx)(c.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:u[a[1]].colored?r:"#b3b0b0",px:1,minWidth:18},children:(0,b.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:n})})},t)}))}):(0,b.jsx)(d.Z,{sx:{p:1}})}()]})})]})},oe=n(4942),se=n(1211),de=function(e){var t=e.data,n=e.position,a=e.onModal,l=e.status,h=e.isDel,x=e.group,f=(0,s.useContext)(v.X),p=f.header,m=f.body,g=f.modalChange,j=f.changeBody,w=f.editable,Z=f.editabled,y=(0,s.useContext)(se.E).user,S=(0,s.useState)(t.data),C=(0,o.Z)(S,2),I=C[0],z=C[1],k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i,o,s){var d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.RQ)({data:i,updater:y._id});case 2:e.sent.status?(d={type:"activity",old:o,rowId:s,new:I,dataType:"string",sign:(0,oe.Z)({},y._id,!0),creator:y,cellName:p[n[1]].name,cellId:t.id,columnId:p[n[1]].id},(0,u.Hw)(d)):alert("server error!");case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){I===t.data||h||(a&&!1===l||Z===n.join("_"))&&function(){var e,t={data:m},r=t.data[n[0]]._id,i=t.data[n[0]].row[n[1]].data;if(t.data[n[0]].row[n[1]].data=I,(null===(e=t.data[n[0]].updater)||void 0===e?void 0:e._id)!==y._id){var o={firstName:y.firstName,lastName:y.lastName,email:y.email,color:y.color};t.data[n[0]].updater=o}t.data[n[0]].updatedAt=new Date,k(t.data[n[0]],i,r),j(t.data)}(),z(t.data)}),[Z,n,g,l,a,h,t.data]),a?(0,b.jsx)(F.Z,{variant:"outlined",disabled:!0,value:I,sx:{width:"100%",height:"100%","& input":{height:"100%",p:1.5,fontSize:13}}}):w===n.join("_")&&"active"===x&&p[n[1]].editable?(0,b.jsx)(F.Z,{variant:"outlined",value:I,sx:{width:"100%",height:"100%","& fieldset":{display:"none"},"& input":{height:"100%",p:1,fontSize:13}}}):(0,b.jsx)(d.Z,{sx:{p:"6px"},children:(0,b.jsx)(c.Z,{component:"div",sx:{userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default"},children:I})})},ae=function(e){var t=e.data,n=e.position,a=e.onModal,l=e.status,h=e.isDel,x=e.group,f=(0,s.useContext)(v.X),p=f.header,m=f.body,g=f.modalChange,j=f.changeBody,w=f.editabled,Z=(0,s.useContext)(se.E).user,y=(0,s.useState)(t.data),S=(0,o.Z)(y,2),C=S[0],I=S[1],z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i,o,s){var d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.RQ)({data:i,updater:Z._id});case 2:e.sent.status?(d={type:"activity",old:o,rowId:s,new:C,dataType:"string",sign:(0,oe.Z)({},Z._id,!0),creator:Z,cellName:p[n[1]].name,cellId:t.id,columnId:p[n[1]].id},(0,u.Hw)(d)):alert("server error!");case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){C===t.data||h||(a&&!1===l||w===n.join("_"))&&function(){var e,t={data:m},r=t.data[n[0]]._id,i=t.data[n[0]].row[n[1]].data;if(t.data[n[0]].row[n[1]].data=C,(null===(e=t.data[n[0]].updater)||void 0===e?void 0:e._id)!==Z._id){var o={firstName:Z.firstName,lastName:Z.lastName,email:Z.email,color:Z.color};t.data[n[0]].updater=o}t.data[n[0]].updatedAt=new Date,z(t.data[n[0]],i,r),j(t.data)}(),I(t.data)}),[w,n,g,l,a,h,t.data]),a?(0,b.jsx)(F.Z,{variant:"outlined",defaultValue:C,multiline:!0,disabled:!0,rows:4,sx:{width:"100%",height:"100%","& .MuiInputBase-multiline":{height:"100%"},"& textarea":{padding:.5,height:"100% !important",fontSize:13}}}):l&&"active"===x&&p[n[1]].editable?(0,b.jsx)(F.Z,{variant:"outlined",autoFocus:!0,defaultValue:C,multiline:!0,disabled:!0,rows:2,sx:{width:"100%",height:"100%","& .MuiInputBase-multiline":{height:"100%"},"& fieldset":{display:a?"block":"none"},"& textarea":{padding:a?.5:0,height:"100% !important",fontSize:13}}}):(0,b.jsx)(d.Z,{sx:{p:"6px"},children:(0,b.jsx)(c.Z,{component:"div",sx:{userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default"},children:C})})},le=function(e){var t=e.data,n=e.position,a=e.onModal,l=e.status,h=e.isDel,x=e.group,f=(0,s.useContext)(v.X),p=f.header,m=f.body,g=f.modalChange,j=f.changeBody,w=f.editable,Z=f.editabled,y=f.selectEditable,S=f.selectEditabled,C=f.selectActive,I=(0,s.useContext)(se.E).user,z=(0,s.useState)(t.data),k=(0,o.Z)(z,2),R=k[0],W=k[1],N=function(e){"Enter"!==e.key||a||(C(n[0]+1+"_"+n[1]),y(""),S(w))},_=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i,o,s){var d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.RQ)({data:i,updater:I._id});case 2:e.sent.status?(d={type:"activity",old:o,rowId:s,new:R,dataType:"string",sign:(0,oe.Z)({},I._id,!0),creator:I,cellName:p[n[1]].name,cellId:t.id,columnId:p[n[1]].id},(0,u.Hw)(d)):alert("server error!");case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){R===t.data||h||(a&&!1===l||Z===n.join("_"))&&function(){var e,t={data:m},r=t.data[n[0]]._id,i=t.data[n[0]].row[n[1]].data;if(t.data[n[0]].row[n[1]].data=R,(null===(e=t.data[n[0]].updater)||void 0===e?void 0:e._id)!==I._id){var o={firstName:I.firstName,lastName:I.lastName,email:I.email,color:I.color};t.data[n[0]].updater=o}t.data[n[0]].updatedAt=new Date,_(t.data[n[0]],i,r),j(t.data)}(),W(t.data)}),[Z,n,g,l,a,h,t.data]),a?(0,b.jsx)(F.Z,{variant:"outlined",autoFocus:!0,disabled:"active"!==x||!p[n[1]].editable,value:R,onChange:function(e){return W(e.target.value)},onKeyDown:N,sx:{width:"100%",height:"100%","& input":{height:"100%",p:1.5,fontSize:13}}}):w===n.join("_")&&"active"===x&&p[n[1]].editable?(0,b.jsx)(F.Z,{variant:"outlined",autoFocus:!0,value:R,onChange:function(e){return W(e.target.value)},onKeyDown:N,sx:{width:"100%",height:"100%","& fieldset":{display:"none"},"& input":{height:"100%",p:1,fontSize:13}}}):(0,b.jsx)(d.Z,{sx:{p:"6px"},children:(0,b.jsx)(c.Z,{component:"div",sx:{userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default"},children:(0,b.jsx)("a",{href:R,target:"_blank",rel:"noreferrer",children:R})})})},ce=n(2196),ue=n(7792),he=n(6571),xe=function(e){var t=e.data;return(0,b.jsx)(he._,{dateAdapter:ue.y,children:(0,b.jsx)(ce.M,{disabled:!0,value:t.data,onChange:function(){return!1},renderInput:function(e){return(0,b.jsx)(F.Z,(0,f.Z)((0,f.Z)({},e),{},{sx:{width:"100%",height:"100%","& fieldset":{display:"none"},"& div":{height:"100%"},"& input":{padding:0,height:"100%",px:.7,fontSize:13}}}))}})})},fe=function(e){var t=e.data,n=e.position,r=e.onModal,i=(0,s.useState)(t.data),a=(0,o.Z)(i,2),l=a[0],c=a[1];return(0,s.useEffect)((function(){c(t.data)}),[n,t.data]),r?(0,b.jsx)(Z.Z,{disabled:!0,checked:l,sx:{p:0,"& .MuiSvgIcon-root":{fontSize:28}}}):(0,b.jsx)(d.Z,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,b.jsx)(Z.Z,{disabled:!0,checked:l,sx:{p:"0px !important","& .MuiSvgIcon-root":{fontSize:28}}})})},pe=function(e){var t=e.data;return e.onModal?(0,b.jsx)(b.Fragment,{children:null!==t&&void 0!==t&&t.data?(0,b.jsx)(l.Z,{sx:{height:"100%",justifyContent:"center",width:"100%",minHeight:34,borderRadius:1,flexWrap:"wrap",bgcolor:"#fff","&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:R()(t.data).format("M/d/yyyy h:mm a")}):null}):(0,b.jsx)(d.Z,{sx:{p:"6px"},children:null!==t&&void 0!==t&&t.data?(0,b.jsx)(c.Z,{component:"div",sx:{userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default"},children:R()(t.data).format("DD/MM/yyyy h:mm a")}):null})},me=function(e){var t=e.onModal,n=e.data;return t?(0,b.jsx)(l.Z,{sx:{height:"100%",justifyContent:"center",width:"100%",minHeight:34,borderRadius:1,flexWrap:"wrap",bgcolor:"#fff","&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:function(){var e,t,r;return n.data&&n.data.color?(0,b.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,b.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:22,height:22,border:"1px solid #eee",borderRadius:50,color:"#fff",bgcolor:n.data&&n.data.color?n.data.color:"#999",zIndex:2},children:null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.firstName[0]}),(0,b.jsxs)(c.Z,{component:"span",sx:{bgcolor:"#eee",userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default",pr:1,pl:2.5,lineHeight:1.4,borderRadius:4,ml:-2},children:[null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.firstName," ",null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.lastName]})]}):null}()}):(0,b.jsx)(d.Z,{sx:{p:"6px"},children:function(){var e,t,r;return n.data?(0,b.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,b.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:22,height:22,border:"1px solid #eee",borderRadius:50,color:"#fff",bgcolor:n.data&&n.data.color?n.data.color:"#999",zIndex:2},children:null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.firstName[0]}),(0,b.jsxs)(c.Z,{component:"span",sx:{bgcolor:"#eee",userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default",pr:1,pl:2.5,lineHeight:1.4,borderRadius:4,ml:-2},children:[null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.firstName," ",null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.lastName]})]}):null}()})},ge=n(1377),be=function(e){var t,n=e.y,a=e.open,h=e.handleClose,f=e.changeItem,p=e.group,j=(0,ee.Z)().user,Z=(0,g.Z)(),v=Z.header,S=Z.body,I=Z.users,k=Z.isAdmin,re=Z.hId,oe=(0,s.useState)([]),se=(0,o.Z)(oe,2),ce=se[0],ue=se[1],he=(0,s.useState)(!1),be=(0,o.Z)(he,2),je=be[0],we=be[1],Ze=(0,s.useState)(""),ve=(0,o.Z)(Ze,2),ye=ve[0],Se=ve[1],Ce=(0,s.useState)([]),Ie=(0,o.Z)(Ce,2),ze=Ie[0],ke=Ie[1],Re=(0,s.useState)(!1),We=(0,o.Z)(Re,2),Ne=We[0],_e=We[1],Be=(0,s.useState)(!0),Ee=(0,o.Z)(Be,2),Me=Ee[0],Fe=Ee[1],Te=(0,s.useState)(null),De=(0,o.Z)(Te,2),Oe=De[0],Ae=De[1],He=(0,s.useState)([]),Le=(0,o.Z)(He,2),Pe=Le[0],Ve=Le[1],Xe=(0,s.useState)(0),Ue=(0,o.Z)(Xe,2),Ye=Ue[0],Je=Ue[1],Ke=(0,s.useState)(1),Qe=(0,o.Z)(Ke,2),Ge=Qe[0],qe=Qe[1],$e=(0,s.useState)(null),et=(0,o.Z)($e,2),tt=et[0],nt=et[1],rt=(0,s.useState)([]),it=(0,o.Z)(rt,2),ot=it[0],st=it[1],dt=(0,s.useState)(""),at=(0,o.Z)(dt,2),lt=at[0],ct=at[1],ut=Boolean(tt),ht=Boolean(Oe),xt=function(e){Ae(e?e.currentTarget:null)},ft=function(e){qe(e),document.getElementsByClassName("commentBoxWrap")[0].scroll({top:document.getElementsByClassName("commentBox")[0].clientHeight,behavior:"smooth"}),Ae(null)},pt=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,s,d,a,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],j.allowIds&&j.allowIds[re]&&(n=j.allowIds[re]),e.next=4,(0,u.Bd)({rowId:t,allowIds:n});case 4:if((i=e.sent).status){ue(i.data),o={},s=(0,x.Z)(i.data);try{for(s.s();!(d=s.n()).done;)a=d.value,o[a.creator._id]=!0}catch(r){s.e(r)}finally{s.f()}for(l=I.filter((function(e){return Object.keys(o).findIndex((function(t){return t===e._id}))>-1})),c=0;c<Object.keys(o).length;c++);Ve(l)}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){a&&(we(!1),pt(S[n]._id))}),[a,n]),(0,s.useEffect)((function(){ce.length&&document.getElementsByClassName("commentBoxWrap")[0]&&document.getElementsByClassName("commentBox")[0].lastChild&&document.getElementsByClassName("commentBoxWrap")[0].scroll({top:document.getElementsByClassName("commentBox")[0].clientHeight+document.getElementsByClassName("commentBox")[0].lastChild.clientHeight,behavior:"smooth"})}),[ce]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(B.Z,{open:a,maxWidth:"lg",onClose:function(){h()},sx:{"& .MuiDialog-paper":{height:"calc(100% - 64px)",width:"100%"}},children:[(0,b.jsx)(T.Z,{sx:{borderBottom:"1px solid #bdbdbd"},children:(0,b.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,b.jsx)(C.Z,{onClick:function(){return f(!1)},disabled:0===n,children:(0,b.jsx)(U.Z,{sx:{fontSize:16}})}),(0,b.jsx)(C.Z,{onClick:function(){return f(!0)},disabled:n===S.length-1,children:(0,b.jsx)(Y.Z,{sx:{fontSize:16}})})]}),(0,b.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,b.jsx)(C.Z,{onClick:function(){return Fe(!Me)},children:Me?(0,b.jsx)(G.Z,{sx:{fontSize:15}}):(0,b.jsx)(K.Z,{sx:{fontSize:15}})}),(0,b.jsx)(d.Z,{sx:{width:"1px",height:15,bgcolor:"gray",mx:2}}),(0,b.jsx)(C.Z,{onClick:h,children:(0,b.jsx)(X.Z,{sx:{fontSize:15}})})]})]})}),(0,b.jsx)(H.Z,{sx:{p:0},children:(0,b.jsxs)(N.ZP,{container:!0,sx:{height:"100%"},children:[(0,b.jsx)(N.ZP,{item:!0,md:Me?8:12,sx:{height:"100%",overflow:"auto",borderRight:"1px solid #bdbdbd",p:6,pt:4},children:(0,b.jsx)(N.ZP,{container:!0,spacing:2,sx:{maxWidth:"640px",m:"auto"},children:null===(t=S[n])||void 0===t?void 0:t.row.map((function(e,t){return(0,b.jsx)(s.Fragment,{children:v[t].allowed?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N.ZP,{item:!0,md:3,sm:12,sx:{order:2*v[t].order},children:(0,b.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{opacity:.75},children:[(0,b.jsx)(m.Z,{type:v[t].type,editable:!1}),(0,b.jsx)(c.Z,{sx:{opacity:.75,ml:.5,fontSize:13,color:"#333333"},children:v[t].name})]})}),(0,b.jsx)(N.ZP,{item:!0,md:9,sm:12,sx:{order:2*v[t].order+1},children:function(){switch(v[t].type){case"text":case"email":return(0,b.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,b.jsx)(de,{group:p,data:e,status:a,position:[n,t],onModal:!0,isDel:je})});case"checkBox":return(0,b.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,b.jsx)(fe,{group:p,data:e,status:a,position:[n,t],onModal:!0,isDel:je})});case"link":return(0,b.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,b.jsx)(le,{group:p,data:e,status:a,position:[n,t],onModal:!0,isDel:je})});case"longText":return(0,b.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,b.jsx)(ae,{group:p,data:e,status:a,position:[n,t],onModal:!0,isDel:je})});case"select":return(0,b.jsx)(ne,{group:p,data:e,status:!1,height:38,position:[n,t]});case"multiSelect":return(0,b.jsx)(ie,{group:p,data:e,status:!1,height:38,position:[n,t]});case"date":return(0,b.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,b.jsx)(xe,{group:p,data:e,position:[n,t]})});case"createdAt":return(0,b.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,b.jsx)(pe,{data:{data:S[n].createdAt},onModal:!0})});case"updatedAt":return(0,b.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,b.jsx)(pe,{data:{data:S[n].updater?S[n].updatedAt:null},onModal:!0})});case"createdBy":return(0,b.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,b.jsx)(me,{data:{data:S[n].creator},onModal:!0})});case"updatedBy":return(0,b.jsx)(d.Z,{sx:{display:"flex",px:1,justifyContent:"space-between",alignItems:"center",borderRadius:1,border:"1px solid #0000003b",cursor:"pointer",width:"100%",height:38,"&:hover":{borderColor:"#000"},"&:focus":{borderColor:"#1976d2",borderWidth:2}},children:(0,b.jsx)(me,{data:{data:S[n].updater},onModal:!0})});case"attached":return e.data||(e.data=[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{sx:{width:"100%",mb:2},children:(0,b.jsx)(E.Z,{disabled:!0,variant:"outlined",sx:{color:"#333333",fontSize:11,textTransform:"capitalize",py:.5,px:1},startIcon:(0,b.jsx)(J.Z,{sx:{fontSize:"15px !important"}}),children:"Attach file"})}),(0,b.jsx)(N.ZP,{container:!0,spacing:2,children:e.data.map((function(e,r){return(0,b.jsxs)(N.ZP,{item:!0,md:6,children:[(0,b.jsx)(d.Z,{sx:{height:250,cursor:"pointer",bgcolor:"#fafafa",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #00000052",overflow:"hidden",borderRadius:2,mb:2},children:(0,b.jsx)(d.Z,{alt:"img",component:"img",src:e.mimetype.startsWith("image")?"".concat(y.P_).concat(e.filename):(0,ge.Pk)(e),sx:{height:e.mimetype.startsWith("image")?"auto":100,maxWidth:"100%",maxHeight:"100%"},onClick:function(){return function(e,t,n){ke(S[e].row[t].data),Je(n),_e(!0)}(n,t,r)}})}),(0,b.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{position:"relative"},children:[(0,b.jsxs)(c.Z,{sx:{fontSize:13,width:"calc(100% - 60px)",textOverflow:"ellipsis",overflow:"hidden"},children:[e.originalname," "]}),(0,b.jsx)(l.Z,{direction:"row",sx:{position:"absolute",bottom:0,right:0,bgcolor:"#fff"},children:(0,b.jsx)(C.Z,{sx:{p:0,mr:1},onClick:function(){return t=e,void(0,u.Sv)(t);var t},children:(0,b.jsx)(q.Z,{})})})]})]},r)}))})]});default:return(0,b.jsx)(F.Z,{size:"small",sx:{width:"100%"},multiline:!0})}}()})]}):null},t)}))})}),(0,b.jsx)(N.ZP,{item:!0,md:4,sx:{height:"100%",display:Me?"block":"none"},children:(0,b.jsxs)(l.Z,{sx:{height:"100%",pb:2},justifyContent:"space-between",children:[(0,b.jsxs)(l.Z,{sx:{p:2,borderBottom:"1px solid #bdbdbd"},justifyContent:"flex-start",alignItems:"flex-start",children:[(0,b.jsxs)(l.Z,{children:[(0,b.jsx)(E.Z,{size:"small",endIcon:(0,b.jsx)(Q.Z,{sx:{fontSize:16}}),onClick:xt,sx:{px:1,fontSize:13,color:"#4d4d4d",textTransform:"capitalize","&:hover":{bgcolor:"#0000000d"}},children:y.Jg[Ge].label}),k?(0,b.jsx)(W.Z,{anchorEl:Oe,open:ht,onClose:function(){return xt(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:y.Jg.map((function(e,t){return t===Ge?(0,b.jsxs)(M.Z,{onClick:function(){return ft(t)},children:[(0,b.jsx)(O.Z,{children:(0,b.jsx)(V.Z,{sx:{fontSize:15}})}),e.label]},t):(0,b.jsx)(M.Z,{onClick:function(){return ft(t)},children:(0,b.jsx)(A.Z,{inset:!0,children:e.label})},t)}))}):null]}),(0,b.jsx)(l.Z,{direction:"row",children:Pe.length?(0,b.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,b.jsx)(D.Z,{max:20,sx:{"& .MuiAvatarGroup-avatar":{borderWidth:"0px !important",color:"#fff",width:20,height:20,fontSize:9,textTransform:"uppercase"}},children:Pe.map((function(e,t){return(0,b.jsx)(_.Z,{sx:{borderWidth:"0px !important",color:"#fff",width:20,height:20,fontSize:9,bgcolor:e.color?e.color:"#bdbdbd",textTransform:"uppercase"},alt:e.firstName,src:"/static/images/avatar/1.jpg"},t)}))}),(0,b.jsx)(c.Z,{sx:{ml:.5,fontSize:11,opacity:.75},children:"".concat(Pe.length>1?"are":"is"," following this.")})]}):null})]}),(0,b.jsx)(d.Z,{className:"commentBoxWrap",sx:{px:2,height:"100%",overflow:"auto"},children:(0,b.jsx)(d.Z,{className:"commentBox",children:ce.filter((function(e){return!y.Jg[Ge].type||e.type===y.Jg[Ge].type})).map((function(e,t){if("activity"===e.type||"workflow"===e.type)return(0,b.jsx)(d.Z,{sx:{py:1},children:(0,b.jsxs)(l.Z,{direction:"row",children:[function(){var t=I.filter((function(t){return t._id===e.creator._id}))[0];return(0,b.jsx)(_.Z,{sx:{bgcolor:t.color?t.color:"#999",textTransform:"uppercase",color:"white",mr:1,width:24,height:24,fontSize:12},alt:"Trevor Henderson",src:"/static/images/avatar/5.jpg",children:e.creator.firstName[0]})}(),(0,b.jsxs)(d.Z,{sx:{width:"100%"},children:[(0,b.jsxs)(l.Z,{sx:{fontSize:12,mb:.1},direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsx)(c.Z,{sx:{fontSize:12},children:e.creator.email===j.email?"You":"".concat(e.creator.firstName," ").concat(e.creator.lastName)}),(0,b.jsx)(z.Z,{date:new Date(e.updatedAt),locale:"en-US"})]}),(0,b.jsxs)(l.Z,{sx:{bgcolor:"#f2f2f2",width:"100%",borderRadius:1,fontSize:13,py:1,px:1},children:[(0,b.jsx)(c.Z,{sx:"workflow"===e.type?{fontSize:12,fontWeight:600}:{fontSize:9},children:function(){if("workflow"===e.type){var t="",n=ce.filter((function(e){return"workflow"===e.type})).sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})).filter((function(t){return new Date(t.createdAt)<new Date(e.createdAt)})).pop();if(n){var r=new Date(n.createdAt),i=new Date(e.createdAt).getTime()-r.getTime(),o=Math.floor(i/864e5),s=i%864e5,d=Math.floor(s/36e5),a=s%36e5,l=Math.floor(a/6e4),c=a%6e4,u=Math.floor(c/1e3);o&&(t+=o,t+=o>1?" days ":" day "),d&&(t+=d,t+=d>1?" hours ":" hour "),l&&(t+=l,t+=l>1?" minutes ":" minute "),u&&!t&&(t+=u,t+=u>1?" seconds ":" second ")}return t?e.cellName+" - "+t:e.cellName}return e.cellName}()}),(0,b.jsx)(d.Z,{sx:{display:"flex",mt:.5},children:"string"===e.dataType?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,bgcolor:"#ffdce5",textDecoration:"workflow"===e.type?"":"line-through",mr:.2},children:e.old}),(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,bgcolor:"#d1f7c4"},children:e.new})]}):"date"===e.dataType?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,bgcolor:"#ffdce5",textDecoration:"line-through",mr:.2},children:e.old?R()(e.old).format("MMMM D, yyyy"):""}),(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,bgcolor:"#d1f7c4"},children:e.new?R()(e.new).format("MMMM D, yyyy"):""})]}):"checkBox"===e.dataType?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(c.Z,{component:"span",sx:{display:"flex",alignItems:"center",fontSize:13,bgcolor:"true"===e.new?"#d1f7c4":"#ffdce5",textDecoration:"line-through",mr:.2},children:(0,b.jsx)(V.Z,{sx:{color:"rgb(32, 201, 51)"}})})}):"select"===e.dataType?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{sx:{border:"1px solid #93e088",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5,mr:.2},children:(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.color},children:e.new})}),e.old?(0,b.jsx)(d.Z,{sx:{border:"1px solid #ff9eb7",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5},children:(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.oldColor,textDecoration:"line-through"},children:e.old})}):null]}):"multiSelect"===e.dataType?(0,b.jsx)(b.Fragment,{children:e.history.map((function(e,t){return"add"===e.status?(0,b.jsx)(d.Z,{sx:{border:"1px solid #93e088",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5,mr:.2},children:(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.color},children:e.label})},t):"remove"===e.status?(0,b.jsx)(d.Z,{sx:{border:"1px solid #ff9eb7",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5},children:(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.color,textDecoration:"line-through"},children:e.label})},t):(0,b.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5},children:(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,border:"1px solid #fff",borderRadius:5,px:1,color:"#fff",bgcolor:e.color},children:e.label})},t)}))}):"attached"===e.dataType?(0,b.jsx)(l.Z,{direction:"row",spacing:.5,children:e.history.data.map((function(t,n){return(0,b.jsx)(d.Z,{sx:{overflow:"hidden",width:48,height:48,border:"add"===e.history.status?"2px solid #93e088":"2px solid #ff9eb7",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:.5},children:(0,b.jsx)(d.Z,{component:"img",src:t.mimetype.startsWith("image")?"".concat(y.P_).concat(t.filename):(0,ge.Pk)(t),sx:{width:48,height:48,maxHeight:48}})},n)}))}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,bgcolor:"#ffdce5",textDecoration:"line-through",mr:.2},children:e.old}),(0,b.jsx)(c.Z,{component:"span",sx:{fontSize:13,bgcolor:"#d1f7c4"},children:e.new})]})})]})]})]})},t);var n=-1;return e.whiteList&&e.whiteList.length&&-1===(n=e.whiteList.findIndex((function(e){return e===j._id})))?null:(0,b.jsx)(d.Z,{sx:{py:1},children:(0,b.jsxs)(l.Z,{direction:"row",children:[function(){var t=I.filter((function(t){return t._id===e.creator._id}))[0];return(0,b.jsx)(_.Z,{sx:{bgcolor:t.color?t.color:"#999",textTransform:"uppercase",color:"white",mr:1,width:24,height:24,fontSize:12},alt:"Trevor Henderson",src:"/static/images/avatar/5.jpg",children:e.creator.firstName[0]})}(),(0,b.jsxs)(d.Z,{sx:{width:"100%"},children:[(0,b.jsxs)(l.Z,{sx:{fontSize:12,mb:.1},direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsx)(c.Z,{sx:{fontSize:12},children:e.creator.email===j.email?"You":"".concat(e.creator.firstName," ").concat(e.creator.lastName)}),(0,b.jsx)(z.Z,{date:new Date(e.updatedAt),locale:"en-US"})]}),(0,b.jsx)(d.Z,{children:(0,b.jsxs)(d.Z,{sx:{display:"inline-block",position:"relative",bgcolor:"#2d7ff9",borderRadius:2,color:"#fff",fontSize:13,py:.5,px:1,pr:5},children:[e.new,-1!==n&&(0,b.jsx)(P.Z,{title:"".concat(e.creator.firstName," ").concat(e.creator.lastName),children:(0,b.jsx)($.Z,{sx:{position:"absolute",right:4,bottom:2,fontSize:16}})})]})})]})]})},t)}))})}),(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(l.Z,{sx:{px:1,flexWrap:"wrap"},direction:"row",children:ot.map((function(e,t){return(0,b.jsxs)(l.Z,{direction:"row",sx:{display:"inline-flex",mb:1,mr:1},onClick:function(){return function(e){var t=ot;t.splice(e,1),st((0,w.Z)(t))}(t)},children:[(0,b.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:22,height:22,border:"1px solid #eee",borderRadius:50,color:"#fff",bgcolor:e&&e.color?e.color:"#999",zIndex:2},children:null===e||void 0===e?void 0:e.firstName[0]}),(0,b.jsxs)(c.Z,{component:"span",sx:{bgcolor:"#eee",cursor:"pointer",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",pr:1,pl:2.5,lineHeight:1.4,borderRadius:4,ml:-2},children:[e.firstName," ",e.lastName]})]},t)}))}),(0,b.jsx)(L.ZP,{anchorEl:tt,open:ut,onClose:function(e){nt(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPopover-paper":{boxShadow:"0 0 0 2px #00000040",maxHeight:"80vh"}},children:(0,b.jsx)(d.Z,{sx:{py:1,px:1,width:200},children:(0,b.jsxs)(l.Z,{spacing:1,children:[(0,b.jsx)(F.Z,{sx:{ml:1,"& input":{px:1,py:1,fontSize:12}},onKeyDown:function(e){if("Enter"===e.key){var t=I.filter((function(e){return-1!==(e.firstName+" "+e.lastName).search(lt)}));if(t.length)-1===ot.findIndex((function(e){return e._id===t[0]._id}))&&st([].concat((0,w.Z)(ot),[t[0]])),Se(ye.slice(0,-1));nt(null),ct("")}},value:lt,onChange:function(e){return ct(e.target.value)},autoFocus:!0}),I.filter((function(e){return-1!==(e.firstName+" "+e.lastName).search(lt)})).map((function(e,t){return(0,b.jsxs)(E.Z,{sx:{justifyContent:"flex-start"},onClick:function(){return function(e){-1===ot.findIndex((function(t){return t._id===e._id}))&&st([].concat((0,w.Z)(ot),[e])),nt(null),ct(""),Se(ye.slice(0,-1))}(e)},children:[(0,b.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:22,height:22,border:"1px solid #eee",borderRadius:50,color:"#fff",bgcolor:e&&e.color?e.color:"#999",zIndex:2},children:null===e||void 0===e?void 0:e.firstName[0]}),(0,b.jsxs)(c.Z,{component:"span",sx:{bgcolor:"#eee",userSelect:"none",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13,color:"#111111",cursor:"default",pr:1,pl:2.5,lineHeight:1.4,borderRadius:4,ml:-2},children:[e.firstName," ",e.lastName]})]},t)}))]})})})]})]})})]})})]}),(0,b.jsx)(te.Z,{open:Ne,close:function(){return _e(!1)},data:ze,index:Ye})]})},je=function(e){var t=e.id,n=e.y,r=e.group,i=(0,s.useState)(0),a=(0,o.Z)(i,2),c=a[0],u=a[1],h=(0,s.useState)(0),x=(0,o.Z)(h,2),f=x[0],p=x[1],m=(0,s.useState)(!1),j=(0,o.Z)(m,2),w=j[0],Z=j[1],v=(0,g.Z)().body;return(0,s.useEffect)((function(){var e=v.findIndex((function(e){return e._id===t}));p(e),u(e)}),[v,t]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(l.Z,{direction:"row",className:"cell first-cell",sx:{width:y.aY,height:32,bgcolor:"#fff",borderTop:"1px solid #dde1e3",borderRight:"1px solid #dde1e3"},children:[(0,b.jsx)(d.Z,{sx:{borderRight:"1px solid #dde1e3",display:"inline-block",position:"relative",height:32,width:32,zIndex:2,textAlign:"center"},children:(0,b.jsx)(d.Z,{sx:{position:"absolute",width:"100%",top:7,color:"#707070",textAlign:"center",fontSize:12,userSelect:"none"},children:n+1})}),(0,b.jsx)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-around",sx:{width:"calc(100% - 32px)"},children:(0,b.jsx)(d.Z,{children:(0,b.jsx)(l.Z,{direction:"row",sx:{position:"relative",height:"100%",alignItems:"center",cursor:"pointer"},children:(0,b.jsx)(C.Z,{onClick:function(){return Z(!0)},color:"info",sx:{height:32,width:32,display:"flex",alignItems:"center",justifyContent:"center"},children:function(){var e;return(0,b.jsx)(b.Fragment,{children:null!==(e=v[f])&&void 0!==e&&e.chat?(0,b.jsx)(d.Z,{sx:{fontSize:16,color:"#2d7ff9",borderRadius:5,p:.5},children:v[f].chat}):(0,b.jsx)(I.Z,{className:"show-head",sx:{fontSize:16,color:"#2d7ff9"}})})}()})})})})]},-2),(0,b.jsx)(be,{y:c,open:w,handleClose:function(){Z(!1),u(f)},changeItem:function(e){u(e?c+1:c-1)},group:r})]})},we=function(e){var t=e.data,n=e.focus,r=e.position,i=(0,s.useState)(!1),a=(0,o.Z)(i,2),c=a[0],u=a[1],h=(0,s.useState)(0),x=(0,o.Z)(h,2),f=x[0],p=x[1],m=function(e){n&&(p(e),u(!0))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{tabIndex:r.join("-"),sx:{height:"100%",width:"100%"},children:(0,b.jsx)(l.Z,{direction:"row",alignItems:"center",sx:{px:"3px",height:"100%",display:"inline-flex",position:"relative"},children:t.data&&t.data.map((function(e,t){return(0,b.jsx)(d.Z,{sx:{height:n?36:25,width:"auto",mr:.25,zIndex:1,overflow:"hidden",cursor:"pointer",border:"2px solid #0000001a",bgcolor:"#0000001a","&:hover":{border:n?"2px solid #00000052":"2px solid #0000001a"}},children:e.mimetype.startsWith("image")?(0,b.jsx)(d.Z,{onClick:function(){return m(t)},sx:{height:n?36:25,maxWidth:n?64:44},component:"img",src:"".concat(y.P_).concat(e.filename),alt:"attached"}):(0,b.jsx)(d.Z,{onClick:function(){return m(t)},sx:{height:n?36:20,width:n?36:20},component:"img",src:(0,ge.Pk)(e),alt:"attached"})},t)}))})}),(0,b.jsx)(te.Z,{open:c,close:function(){u(!1)},data:t.data,index:f})]})},Ze=function(e){var t=e.data,n=e.width,a=e.position,l=(0,g.Z)().header,u=(0,s.useState)([]),h=(0,o.Z)(u,2),x=h[0],f=h[1],p=(0,s.useState)(null),m=(0,o.Z)(p,2),j=m[0],w=m[1],Z=(0,s.useState)(""),v=(0,o.Z)(Z,2),y=v[0],S=v[1],C=Boolean(j),I=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(null),S("");case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=l[a[1]].list.map((function(e,t){return e.index=t,e}));f(e)}),[l,a]),(0,b.jsxs)(d.Z,{sx:{p:"6px",height:"100%",display:"flex"},onDoubleClick:function(e){return w(e.currentTarget)},children:[function(){var e,n=x.findIndex((function(e){return e.id===t.data}));return-1!==n?(0,b.jsx)(c.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:l[a[1]].colored?null===(e=x[n])||void 0===e?void 0:e.color:"#b3b0b0",px:1,minWidth:18},children:(0,b.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:x[n].label})}):null}(),(0,b.jsx)(L.ZP,{anchorEl:j,open:C,onClose:function(){w(null),S("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPaper-rounded":{width:n,mt:-1.5,minWidth:160}},children:(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(F.Z,{placeholder:"Find an option",onChange:function(e){return S(e.target.value)},autoFocus:!0,sx:{pt:1,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),function(){var e=x.filter((function(e){return-1!==e.label.toLowerCase().search(y)}));return e.length?(0,b.jsx)(b.Fragment,{children:e.map((function(e,t){var n=e.label,r=e.color,i=e.id;return(0,b.jsx)(M.Z,{onClick:function(){return I(i,n,r)},children:(0,b.jsx)(c.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:l[a[1]].colored?r:"#b3b0b0",px:1,minWidth:18},children:(0,b.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:n})})},t)}))}):(0,b.jsx)(d.Z,{sx:{p:1}})}()]})})]})},ve=function(e){var t=e.data,n=e.width,a=e.position,u=(0,g.Z)(),h=u.header,x=u.active,f=(0,s.useState)([]),p=(0,o.Z)(f,2),m=p[0],j=p[1],w=(0,s.useState)(null),Z=(0,o.Z)(w,2),v=Z[0],y=Z[1],S=(0,s.useState)(""),C=(0,o.Z)(S,2),I=C[0],z=C[1],k=Boolean(v),R=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(null),z("");case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=h[a[1]].list.map((function(e,t){return e.index=t,e}));j(e)}),[h,a,t.data]),(0,b.jsxs)(b.Fragment,{children:[x===a.join("_")?(0,b.jsx)(l.Z,{className:"selectItems-wrap",sx:{height:"auto",minHeight:34,position:"absolute",borderRadius:"1px",flexWrap:"wrap",bgcolor:"#fff",ml:"-1px",boxShadow:"0 0 0 2px #2d7ff9 !important",width:n+2},children:(0,b.jsxs)(l.Z,{direction:"row",sx:{flexWrap:"wrap",alignItems:"center"},children:[t.data.length?(0,b.jsx)(b.Fragment,{children:t.data.map((function(e,t){var n,r,i=m.findIndex((function(t){return t.id===e}));return(0,b.jsx)(c.Z,{component:"span",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:"3px",ml:"3px",height:18,borderRadius:50,bgcolor:h[a[1]].colored?null===(n=m[i])||void 0===n?void 0:n.color:"#b3b0b0",px:1,minWidth:18,mr:.5},children:(0,b.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:null===(r=m[i])||void 0===r?void 0:r.label})},t)}))}):null,h[a[1]].editable&&(0,b.jsx)(l.Z,{onClick:function(e){y(e.currentTarget.parentElement.parentElement)},alignItems:"center",justifyContent:"center",sx:{mt:.25,height:28,borderRadius:"3px",px:.5,cursor:"pointer",bgcolor:"#0000000d","&:hover":{bgcolor:"#0000001a"}},children:(0,b.jsx)(re.Z,{sx:{fontSize:12}})})]})}):(0,b.jsx)(d.Z,{sx:{p:"6px",height:"100%",display:"flex"},children:t.data.length?(0,b.jsx)(b.Fragment,{children:t.data.map((function(e,t){var n,r,i=m.findIndex((function(t){return t.id===e}));return(0,b.jsx)(c.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:h[a[1]].colored?null===(n=m[i])||void 0===n?void 0:n.color:"#b3b0b0",px:1,mr:.5},children:(0,b.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,color:"#fff"},children:null===(r=m[i])||void 0===r?void 0:r.label})},t)}))}):null}),(0,b.jsx)(L.ZP,{anchorEl:v,open:k,onClose:function(){y(null),z("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPaper-rounded":{width:n,mt:-1.5,minWidth:160}},children:(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(F.Z,{placeholder:"Find an option",onChange:function(e){return z(e.target.value)},autoFocus:!0,sx:{pt:1,width:"100%","& fieldset":{display:"none"},"& input":{py:0,px:1,fontSize:13}}}),function(){var e=m.filter((function(e){return-1===t.data.findIndex((function(t){return t===e.id}))&&-1!==e.label.toLowerCase().search(I)}));return e.length?(0,b.jsx)(b.Fragment,{children:e.map((function(e,t){var n=e.label,r=e.color,i=e.id;return(0,b.jsx)(M.Z,{onClick:function(){return R(i,n,r)},children:(0,b.jsx)(c.Z,{component:"span",sx:{height:18,borderRadius:50,bgcolor:h[a[1]].colored?r:"#b3b0b0",px:1,minWidth:18},children:(0,b.jsx)(d.Z,{sx:{display:"flex",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",fontSize:13,minWidth:18,color:"#fff"},children:n})})},t)}))}):(0,b.jsx)(d.Z,{sx:{p:1}})}()]})})]})},ye=function(e){var t=e.data,n=e.type,r=e.status,i=e.focus,o=e.width,s=e.height,d=e.position,a=e.group;return(0,b.jsx)(b.Fragment,{children:function(){switch(n){case"text":case"email":default:return(0,b.jsx)(de,{group:a,data:t,status:r,position:d});case"link":return(0,b.jsx)(le,{group:a,data:t,status:r,position:d});case"longText":return(0,b.jsx)(ae,{group:a,data:t,status:r,height:s,position:d});case"attached":return(0,b.jsx)(we,{group:a,data:t,focus:i,position:d});case"date":return(0,b.jsx)(xe,{group:a,data:t,position:d});case"select":return(0,b.jsx)(Ze,{group:a,data:t,width:o,position:d});case"multiSelect":return(0,b.jsx)(ve,{group:a,data:t,width:o,position:d});case"checkBox":return(0,b.jsx)(fe,{group:a,data:t,width:o,position:d});case"createdAt":case"updatedAt":return(0,b.jsx)(pe,{group:a,data:t,width:o,position:d});case"createdBy":case"updatedBy":return(0,b.jsx)(me,{group:a,data:t,width:o,position:d})}}()})},Se=function(e){var t=e.data,n=e.handleContextMenu,r=e.width,i=e.position,o=e.type,a=e.order,c=e.group,u=e.cssClass,h=(0,s.useContext)(v.X),x=h.active,p=h.selectActive,m=h.editable,g=h.selectEditable,j=h.selectEditabled,w={order:a,zIndex:1,width:r,bgcolor:t.search?"#97ffa2":"#fff",overflow:"hidden",borderTop:"1px solid #dde1e3",borderRight:"1px solid #dde1e3"},Z={boxSizing:"content-box",border:"1px solid transparent",mt:"-1px",ml:"-2px",pr:0,borderRight:0,boxShadow:"multiSelect"===o?"":"0 0 0 2px #2d7ff9 !important",borderRadius:"1px",zIndex:"8 !important"},y=(0,s.useMemo)((function(){return m===i.join("_")&&x===i.join("_")?"longText"===o?142:32:(m===i.join("_")||x===i.join("_"))&&"attached"===o?40:32}),[m,i]);return(0,b.jsx)(l.Z,{className:"cell"+u,onClick:function(){i.join("_")!==x&&(p(i.join("_")),g(""),j(m))},onContextMenu:n,tabIndex:i.join("-"),sx:x===i.join("_")?(0,f.Z)((0,f.Z)((0,f.Z)({},w),Z),{},{height:y}):(0,f.Z)((0,f.Z)({},w),{},{height:y}),children:(0,b.jsx)(d.Z,{sx:{height:"100%"},children:(0,b.jsx)(ye,{group:c,data:t,width:r,height:y,type:o,status:m===i.join("_"),position:i,focus:x===i.join("_")})})})},Ce=function(e){var t=e.group,n=e.row,r=e.y,i=e.popup,o=e.visible,s=e.setVisible,d=e.setOrder,a=e.isFixed,c=(0,g.Z)(),u=c.header,h=c.body,x=function(e){if(e.preventDefault(),s(!0),d({id:n._id,index:n.order}),i.current){var t=e.clientX,r=e.clientY,o=window.innerWidth-t>200,a=!o,l=window.innerHeight-r>193,c=!l;o&&(i.current.style.left="".concat(t+5,"px")),a&&(i.current.style.left="".concat(t-200-5,"px")),l&&(i.current.style.top="".concat(r-120,"px")),c&&(i.current.style.top="".concat(r-193-130,"px"))}};return(0,b.jsx)(l.Z,{direction:"row",className:"grid-row",sx:{height:32,width:"100%","&:hover":{"& .show-head":{opacity:1},"& .row-num":{opacity:0},"& .cell":{bgcolor:"#f8f8f8"}}},children:function(e,l){if(u.length){var c=[];a&&c.push((0,b.jsx)(je,{order:n.order,id:l,y:r,group:t},r+"_"));var f=u.filter((function(e){return e.allowed}));f=f.length?f.reduce((function(e,t){return e.order>t.order?e:t})):{order:0};for(var p=0;p<e.length;p++){var m=void 0;switch(u[p].type){case"createdAt":m={data:n.createdAt,search:!1};break;case"updatedAt":m={data:n.updater?n.updatedAt:null,search:!1};break;case"createdBy":m={data:n.creator,search:!1};break;case"updatedBy":m={data:n.updater,search:!1};break;default:m=e[p]}if(!u[p].hide&&u[p].allowed){var g=h.findIndex((function(e){return e._id===l}));a&&u[p].fixed?c.push((0,b.jsx)(Se,{cssClass:u[p].order===f.order?" last":"",group:t,rorder:e.order,order:u[p].order,type:u[p].type,width:u[p].width,data:m,position:[g,p],popup:i,visible:o,setVisible:s,setOrder:d,handleContextMenu:x},r+"_"+p)):a||u[p].fixed||c.push((0,b.jsx)(Se,{cssClass:u[p].order===f.order?" last":"",group:t,rorder:e.order,order:u[p].order,type:u[p].type,width:u[p].width,data:m,position:[g,p],popup:i,visible:o,setVisible:s,setOrder:d,handleContextMenu:x},r+"_"+p))}}return c}return null}(n.row,n._id)})},Ie=function(e){var t=e.mainW,n=(0,s.useRef)(0),r=(0,g.Z)(),i=r.header,a=r.changeHeader,h=r.body,x=r.editable,m=r.selectEditable,w=r.selectEditabled,Z=r.selectActive,v=r.hId,C=(0,s.useState)(-1),I=(0,o.Z)(C,2),z=I[0],k=I[1],R=(0,s.useState)(-1),W=(0,o.Z)(R,2),N=W[0],_=W[1],B=(0,s.useState)(!1),E=(0,o.Z)(B,2),M=E[0],F=E[1],T=function(e){console.log(e)},D=function(e,t){k(t),_(e.clientX-i[t].width)},O=function(){var e=i.map((function(e){var t=e;return delete t.hide,t}));(0,u.EH)({row:e,hId:v}),k(-1),_(-1)},A=function(){m(""),w(x),Z("")},H=function(e,t){e.target.contains&&(!(e.target===n.current||e.target.parentElement===n.current)&&t&&(F(!1),T({id:"",index:-1})))};return(0,s.useEffect)((function(){var e=function(e){if(z>-1){var t=i,n=e.clientX-N;n>130&&(t[z].width=n,a(t))}};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[z,N]),(0,s.useEffect)((function(){var e=function(){if(z>-1&&N>-1){var e=i.map((function(e){var t=e;return delete t.hide,t}));(0,u.EH)({row:e,hId:v}),k(-1),_(-1)}};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[N,z,i]),(0,s.useEffect)((function(){return window.addEventListener("click",(function(e){return H(e,M)})),function(){window.removeEventListener("click",(function(e){return H(e,M)}))}}),[M]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{sx:{height:"200%",position:"sticky",left:y.cn-1,width:"6px",bgcolor:"#99999917",zIndex:99,top:0},children:(0,b.jsx)(d.Z,{sx:{height:"100%",width:"1px",bgcolor:"#dde1e3"}})}),(0,b.jsxs)(d.Z,{sx:{position:"absolute",right:0,width:t,left:0,overflow:"visible",top:0,bottom:0},children:[(0,b.jsx)(d.Z,{sx:{height:32,top:0,left:0,right:0,zIndex:3,overflow:"visible",bgcolor:"#f2f2f2",position:"sticky",borderBottom:"1px solid #dde1e3"},children:(0,b.jsx)(d.Z,{sx:{height:32,position:"relative"},children:(0,b.jsx)(d.Z,{sx:{height:32,display:"flex"},children:function(){var e=[];e.push((0,b.jsx)(S,{},-1));var t=Object.assign([],i);t=t.map((function(e,t){return(0,f.Z)((0,f.Z)({},e),{},{index:t})})).sort((function(e,t){return e.order-t.order}));for(var n=y.cn+y.Xu,r=function(r){if(t[r].hide||!t[r].allowed)return"continue";t[r].fixed?(e.push((0,b.jsxs)(d.Z,{sx:{order:t[r].order,height:"100%",position:"sticky",left:n,zIndex:9,width:t[r].width,bgcolor:"#f5f5f5",borderBottom:"1px solid #d1d1d1",borderRight:"1px solid #dde1e3"},children:[(0,b.jsx)(j,{me:t[r],i:t[r].index}),(0,b.jsx)(d.Z,{onMouseDown:function(e){return D(e,t[r].index)},onMouseUp:function(){return O(r)},sx:{width:"2px",bgcolor:z===t[r].index?"#1283da":"#f5f5f5",height:"100%",position:"absolute",top:0,right:0,"&:hover":{cursor:"col-resize"}}})]},r)),n+=t[r].width):e.push((0,b.jsx)(d.Z,{sx:{order:t[r].order,height:"100%",position:"relative",width:t[r].width,bgcolor:"#f5f5f5",borderBottom:"1px solid #d1d1d1",borderRight:"1px solid #dde1e3"},children:(0,b.jsx)(j,{me:t[r],i:t[r].index})},r))},o=0;o<t.length;o++)r(o);return e}()})})}),(0,b.jsx)(d.Z,{className:"tableBody",sx:{top:32,left:0,right:0,bottom:0,zIndex:0,position:"absolute",height:"calc(100% - 67px)"},children:(0,b.jsx)(d.Z,{sx:{position:"relative"},children:function(){for(var e=h,t=0,r=y.aY,o=[],s=[],a=0;a<i.length;a++)!i[a].hide&&i[a].allowed&&(i[a].fixed?r+=i[a].width:t+=i[a].width);for(var u=0;u<e.length;u++)e[u].done?o.push(e[u]):s.push(e[u]);return o.sort((function(e,t){return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf()})),(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(l.Z,{children:[(0,b.jsx)(l.Z,{direction:"row",sx:{height:16},onClick:function(){return A()},children:(0,b.jsx)(d.Z,{sx:{width:r,height:"100%",position:"sticky",left:0,zIndex:9,bgcolor:"#f7f7f7"}})}),(0,b.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,b.jsx)(d.Z,{sx:{width:16,bgcolor:"#f7f7f7",zIndex:9,position:"sticky",left:0},onClick:function(){return A()}}),(0,b.jsxs)(l.Z,{sx:{zIndex:9,position:"sticky",left:16,width:r,border:"1px solid #dde1e3",borderTopLeftRadius:8,borderBottomLeftRadius:8,"&:before":{content:'""',height:2,width:10,bgcolor:"#f7f7f7",position:"absolute",top:-1,left:-7},"&:after":{content:'""',height:2,width:10,bgcolor:"#f7f7f7",position:"absolute",bottom:-1,left:-7}},children:[(0,b.jsx)(d.Z,{sx:{width:"100%",height:47,bgcolor:"#fffafa",py:1,px:1,borderTopLeftRadius:8,borderBottomLeftRadius:8},onClick:function(){return A()},children:(0,b.jsx)(c.Z,{sx:{color:"gray"},children:"Active (".concat(s.length,")")})}),s.map((function(e,t){return(0,b.jsx)(Ce,{group:"active",isFixed:!0,row:e,y:t,popup:n,visible:M,setVisible:F,setOrder:T},t)}))]}),(0,b.jsxs)(l.Z,{sx:{width:t,borderTopRightRadius:8,borderBottomRightRadius:8,borderTop:"1px solid #dde1e3",borderBottom:"1px solid #dde1e3"},children:[(0,b.jsx)(d.Z,{sx:{bgcolor:"#fffafa",height:47,py:1,px:1,borderTopRightRadius:8,borderRight:"1px solid #dde1e3",borderBottomRightRadius:s.length?0:8},onClick:function(){return A()}}),s.map((function(e,t){return(0,b.jsx)(Ce,{group:"active",isFixed:!1,row:e,y:t,popup:n,visible:M,setVisible:F,setOrder:T},t)}))]})]}),(0,b.jsx)(l.Z,{direction:"row",sx:{height:16},onClick:function(){return A()},children:(0,b.jsx)(d.Z,{sx:{width:r,height:"100%",position:"sticky",left:0,zIndex:9,bgcolor:"#f7f7f7"}})}),(0,b.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,b.jsx)(d.Z,{sx:{width:16,bgcolor:"#f7f7f7",zIndex:9,position:"sticky",left:0},onClick:function(){return A()}}),(0,b.jsxs)(l.Z,{sx:{zIndex:9,position:"sticky",left:16,width:r,border:"1px solid #dde1e3",borderTopLeftRadius:8,borderBottomLeftRadius:8,"&:before":{content:'""',height:2,width:10,bgcolor:"#f7f7f7",position:"absolute",top:-1,left:-7},"&:after":{content:'""',height:2,width:10,bgcolor:"#f7f7f7",position:"absolute",bottom:-1,left:-7}},children:[(0,b.jsx)(d.Z,{sx:{width:"100%",height:47,bgcolor:"#fffafa",py:1,px:1,borderTopLeftRadius:8,borderBottomLeftRadius:8},onClick:function(){return A()},children:(0,b.jsx)(c.Z,{sx:{color:"gray"},children:"Completed (".concat(o.length,")")})}),o.map((function(e,t){return(0,b.jsx)(Ce,{group:"completed",isFixed:!0,row:e,y:t,popup:n,visible:M,setVisible:F,setOrder:T},t)}))]}),(0,b.jsxs)(l.Z,{sx:{width:t,borderTopRightRadius:8,borderBottomRightRadius:8,borderTop:"1px solid #dde1e3",borderBottom:"1px solid #dde1e3"},children:[(0,b.jsx)(d.Z,{sx:{bgcolor:"#fffafa",height:47,py:1,px:1,borderTopRightRadius:8,borderRight:"1px solid #dde1e3",borderBottomRightRadius:o.length?0:8},onClick:function(){return A()}}),o.map((function(e,t){return(0,b.jsx)(Ce,{group:"completed",isFixed:!1,row:e,y:t,popup:n,visible:M,setVisible:F,setOrder:T},t)}))]})]})]})})}()})}),(0,b.jsx)(d.Z,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:3,bgcolor:"#ffffff",borderTop:"1px solid #dde1e3"},children:(0,b.jsxs)(d.Z,{sx:{height:35,display:"flex"},children:[(0,b.jsx)(d.Z,{sx:{width:66,bgcolor:"#ffffff80",borderTop:"1px solid #dde1e3"},children:(0,b.jsx)(d.Z,{sx:{top:0,left:0,height:34,overflow:"visible",position:"absolute"},children:(0,b.jsx)(d.Z,{sx:{position:"relative"},children:(0,b.jsx)(l.Z,{direction:"row",sx:{position:"absolute",zIndex:1,height:24,left:0,top:0},children:(0,b.jsx)(d.Z,{sx:{px:1,pt:"3px",pb:"2px",fontSize:11,width:"auto",overflow:"hidden",position:"static",bgcolor:"#fbfbfb",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:"".concat(h.length," records")})})})})}),function(){for(var e=[],t=0;t<i.length;t++)!i[t].hide&&i[t].allowed&&e.push((0,b.jsx)(d.Z,{sx:{height:34,width:i[t].width}},t));return e}()]})}),(0,b.jsx)(p.Z,{})]})]})},ze=function(){var e=(0,g.Z)(),t=e.header,n=e.isAdmin,r=(0,s.useState)({fixedHeader:[],rightHeader:[],mainW:0}),i=(0,o.Z)(r,2),a=i[0],l=i[1];(0,s.useEffect)((function(){var e,r=[],i=[],o=(0,x.Z)(t);try{for(o.s();!(e=o.n()).done;){var s=e.value;s.fixed?r.push(s):i.push(s)}}catch(h){o.e(h)}finally{o.f()}var d,a=n?y.GS+y.cn:y.cn+y.tB,c=(0,x.Z)(t);try{for(c.s();!(d=c.n()).done;){var u=d.value;!u.hide&&u.allowed&&(a+=u.width)}}catch(h){c.e(h)}finally{c.f()}a=a>window.screen.width?a:window.screen.width,l({fixedHeader:r,rightHeader:i,mainW:a})}),[t,n]);var c=a.mainW;return(0,b.jsx)(d.Z,{sx:{top:56,left:0,right:0,bottom:0,position:"absolute",overflow:"auto"},children:(0,b.jsx)(Ie,{mainW:c})})},ke=n(3763),Re=n(7689),We=function(){var e=(0,Re.UO)().id,t=(0,g.Z)(),n=t.initData,x=t.users,f=t.setUsers,p=(0,s.useState)(!1),m=(0,o.Z)(p,2),j=m[0],w=m[1],Z=(0,s.useState)(""),v=(0,o.Z)(Z,2),y=v[0],S=v[1];return(0,s.useEffect)((function(){(0,i.Z)((0,r.Z)().mark((function t(){var i,o,s,d,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.n0)(e);case 2:(i=t.sent).status&&(i=i.data,s=null!==(o=i.header._id)&&void 0!==o?o:"",d=i.header.row,a=i.users,S(i.header.name),f(a),n({header:d,hId:s,body:i.body,notifications:[]}),w(!0));case 4:case"end":return t.stop()}}),t)})))()}),[]),(0,b.jsxs)(l.Z,{sx:{width:"100%",height:"100%"},children:[(0,b.jsx)(l.Z,{sx:{width:"100%",height:"100%"},children:(0,b.jsx)(l.Z,{sx:{height:"100%",width:"100%",bgcolor:"#f5f5f5"},children:(0,b.jsx)(l.Z,{sx:{height:"100%",flex:"1 1 auto"},children:(0,b.jsx)(l.Z,{sx:{height:"100%",position:"relative",overflow:"hidden"},children:(0,b.jsx)(d.Z,{sx:{height:"100%",width:"100%",bgcolor:"#f7f7f7"},children:(0,b.jsx)(d.Z,{sx:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:4,overflow:"hidden",opacity:1},children:j&&x.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{sx:{width:"100%",position:"absolute",top:0,letf:0,right:0,bgcolor:function(e){return e.palette.primary.main}},children:(0,b.jsx)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{height:56,px:2},children:(0,b.jsx)(l.Z,{direction:"row",alignItems:"center",children:(0,b.jsx)(l.Z,{direction:"row",alignItems:"center",children:(0,b.jsx)(a.Z,{href:"/",sx:{display:"flex"},children:(0,b.jsx)(c.Z,{sx:{fontSize:20,color:"#fff"},children:y})})})})})}),(0,b.jsx)(ze,{})]}):(0,b.jsx)(d.Z,{sx:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,b.jsx)(h.Z,{})})})})})})})}),(0,b.jsx)(ke.Z,{})]})}}}]);
//# sourceMappingURL=691.3da5d9ac.chunk.js.map